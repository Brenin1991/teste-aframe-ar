import{r as c,a as Ie,R as be}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const m of t)if(m.type==="childList")for(const l of m.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function d(t){const m={};return t.integrity&&(m.integrity=t.integrity),t.referrerPolicy&&(m.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?m.credentials="include":t.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(t){if(t.ep)return;t.ep=!0;const m=d(t);fetch(t.href,m)}})();var je={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne=c,Ae=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),Ue=Object.prototype.hasOwnProperty,$e=Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function we(a,s,d){var u,t={},m=null,l=null;d!==void 0&&(m=""+d),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(l=s.ref);for(u in s)Ue.call(s,u)&&!Fe.hasOwnProperty(u)&&(t[u]=s[u]);if(a&&a.defaultProps)for(u in s=a.defaultProps,s)t[u]===void 0&&(t[u]=s[u]);return{$$typeof:Ae,type:a,key:m,ref:l,props:t,_owner:$e.current}}ge.Fragment=Pe;ge.jsx=we;ge.jsxs=we;je.exports=ge;var e=je.exports,me={},ve=Ie;me.createRoot=ve.createRoot,me.hydrateRoot=ve.hydrateRoot;let ce=null,fe=null,ue=null;async function Le(){var a,s;try{const d=((s=(a=import.meta)==null?void 0:a.env)==null?void 0:s.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),t=`${d&&d!=="/"?d.endsWith("/")?d:d+"/":"/"}assets/data/ra.json`,m=await fetch(t);return m.ok?(await m.json()).configuracoes||{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}:(console.warn("N√£o foi poss√≠vel carregar ra.json, usando configura√ß√µes padr√£o"),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0})}catch(d){return console.warn("Erro ao carregar configura√ß√µes do RA, usando padr√£o:",d),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}}}async function ke(){return ue||(ue=(async()=>{try{console.log("Iniciando inicializa√ß√£o global...");const a=await Le();console.log("Configura√ß√µes do RA:",a),a.usarAFrame!==!1?(console.log("Aguardando A-Frame..."),await Ce(),console.log("A-Frame pronto"),console.log("Inicializando A-Frame Scene..."),await Be(),console.log("A-Frame Scene inicializado"),Se()):console.log("A-Frame desabilitado nas configura√ß√µes"),a.usarVideo!==!1?(console.log(`Inicializando c√¢mera (${a.cameraFacing||"user"})...`),await Te(a),console.log("C√¢mera inicializada")):console.log("V√≠deo desabilitado nas configura√ß√µes"),a.usarFaceTracking!==!1?(console.log("Carregando face-api.js..."),await ze(),console.log("face-api.js carregado")):console.log("Face Tracking desabilitado nas configura√ß√µes"),console.log("Inicializa√ß√£o global conclu√≠da")}catch(a){throw console.error("Erro na inicializa√ß√£o global:",a),a}})(),ue)}function Se(){const a=new MutationObserver(()=>{const s=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');s&&(console.log("Modal detectado, garantindo que seja clic√°vel..."),s.style.pointerEvents="auto",s.style.zIndex="2147483647",s.style.position="fixed",s.style.display="block",s.style.visibility="visible",s.style.opacity="1",s.querySelectorAll("*").forEach(t=>{t.style.pointerEvents="auto"}),s.querySelectorAll("button").forEach(t=>{t.style.pointerEvents="auto",t.style.cursor="pointer",t.style.zIndex="2147483647",t.style.position="relative"}))});a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(a.disconnect(),Se())},1e3)}function Ce(){return new Promise(a=>{if(typeof window<"u"&&window.AFRAME){a();return}const s=()=>{typeof window<"u"&&window.AFRAME?a():setTimeout(s,100)};s()})}async function Te(a){try{const s=document.getElementById("arjs-video");if(s&&s.srcObject)return ce=s,fe=s.srcObject,fe;const d=(a==null?void 0:a.cameraFacing)||"user",u=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:d}},audio:!1});if(s)ce=s;else{const t=document.createElement("video");t.id="arjs-video",t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.muted=!0,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.objectFit="cover",t.style.zIndex="0",t.style.display="none",t.style.visibility="hidden",t.style.opacity="0",document.body.appendChild(t),ce=t}return ce.srcObject=u,fe=u,await ce.play(),u}catch(s){return console.warn("Erro ao inicializar c√¢mera global:",s),null}}async function ze(){if(!window.faceapi)return new Promise((a,s)=>{const d=document.createElement("script");d.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",d.onload=()=>{console.log("face-api.js carregado"),a()},d.onerror=()=>s(new Error("Failed to load face-api.js")),document.head.appendChild(d)})}async function Be(){if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const a=document.createElement("a-scene");a.id="ar-scene-main",a.setAttribute("embedded","true"),a.setAttribute("vr-mode-ui","enabled: false"),a.setAttribute("device-orientation-permission-ui","enabled: true"),a.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),a.setAttribute("webxr","enabled: false"),a.setAttribute("background","transparent: true"),a.setAttribute("stats","false"),a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="-100",a.style.background="transparent",document.body.appendChild(a),await new Promise(s=>{const d=()=>{const u=document.querySelector("a-scene");u&&u.hasLoaded?s():setTimeout(d,100)};d()}),console.log("A-Frame Scene criado e inicializado")}const ye=({onNavigate:a,onLoadingComplete:s})=>{const[d,u]=c.useState(0),[t,m]=c.useState("Inicializando...");return c.useEffect(()=>((async()=>{const r=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json","/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"],f=(()=>{var y,h;const p=((h=(y=import.meta)==null?void 0:y.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return p&&p!=="/"?p.endsWith("/")?p:p+"/":"/"})();try{m("Aguardando inicializa√ß√£o..."),await ke(),m("Carregando recursos...");for(let p=0;p<r.length;p++){const b=r[p],y=`${f}${b.startsWith("/")?b.slice(1):b}`;if(b.endsWith(".json"))try{if(!(await fetch(y)).ok)throw new Error(`Failed to load ${b}`)}catch(o){console.warn(`Failed to load ${b}:`,o)}else await new Promise(o=>{const x=new Image;x.onload=()=>o(x),x.onerror=()=>{console.warn(`Failed to load image: ${y}`),o(null)},x.src=y});const h=Math.round((p+1)/r.length*100);u(h)}m("Finalizando..."),await new Promise(p=>setTimeout(p,300)),u(100),m("Conclu√≠do!"),await new Promise(p=>setTimeout(p,200)),s==null||s(),a("cover","flip","left")}catch(p){console.error("Erro ao carregar recursos:",p),m("Erro ao carregar. Continuando..."),setTimeout(()=>{a("cover","flip","left")},1e3)}})(),()=>{}),[a,s]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${d}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[d,"%"]})]}),e.jsx("p",{className:"loading-status",children:t})]})})};const Oe=({onNavigate:a,backgroundImage:s})=>{const u=(()=>{var b,y;const f=((y=(b=import.meta)==null?void 0:b.env)==null?void 0:y.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),p=f&&f!=="/"?f.endsWith("/")?f:f+"/":"/";return p==="/"?"":p.endsWith("/")?p.slice(0,-1):p})(),t=f=>{if(u==="")return f.startsWith("/")?f:`/${f}`;const p=f.startsWith("/")?f.slice(1):f;return`${u}/${p}`},m=s||t("assets/images/bg-capa.png"),l=t("assets/images/header-capa.png"),r=t("assets/images/bottom-capa.png"),i=t("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${m}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:l,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>a("tutorial","zoom-out","right"),style:{backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:r,alt:"Bottom",className:"cover-bottom-img"})})]})};const We=({onNavigate:a})=>{const d=(()=>{var f,p;const r=((p=(f=import.meta)==null?void 0:f.env)==null?void 0:p.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=r&&r!=="/"?r.endsWith("/")?r:r+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),u=r=>{if(d==="")return r.startsWith("/")?r:`/${r}`;const i=r.startsWith("/")?r.slice(1):r;return`${d}/${i}`},t=u("assets/images/bg-capa.png"),m=u("assets/images/tutorial-panel.png"),l=u("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:m,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>a("rocket","fade","right"),style:{backgroundImage:`url("${l}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Me=({onNavigate:a})=>{const d=(()=>{var f,p;const r=((p=(f=import.meta)==null?void 0:f.env)==null?void 0:p.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=r&&r!=="/"?r.endsWith("/")?r:r+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),u=r=>{if(d==="")return r.startsWith("/")?r:`/${r}`;const i=r.startsWith("/")?r.slice(1):r;return`${d}/${i}`},t=u("assets/images/bg-capa.png"),m=u("assets/images/tutorial-panel-2.png"),l=u("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:m,alt:"Tutorial Panel 2",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>a("ar","fade","right"),style:{backgroundImage:`url("${l}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})};const De=({onNavigate:a,backgroundImage:s})=>{const[d,u]=c.useState(!0),[t,m]=c.useState(1),[l,r]=c.useState({ponta:1,corpo:0,janela:0,asa:0,jato:0}),i={1:"ponta",2:"corpo",3:"janela",4:"asa",5:"jato"},p=(()=>{var O,H;const j=((H=(O=import.meta)==null?void 0:O.env)==null?void 0:H.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),I=j&&j!=="/"?j.endsWith("/")?j:j+"/":"/";return I==="/"?"":I.endsWith("/")?I.slice(0,-1):I})(),b=j=>{if(p==="")return j.startsWith("/")?j:`/${j}`;const I=j.startsWith("/")?j.slice(1):j;return`${p}/${I}`},y=s||b("assets/images/bg-capa.png"),h=b("assets/images/foguete-top.png"),o=b("assets/images/foguete-bottom.png"),x=b("assets/images/foguete-montagem.png"),U=b("assets/images/btn-jogar-foguete.png"),_=b("assets/images/btn-jogar-foguete-disable.png"),$=b("assets/images/btn-next.png"),M=b("assets/images/btn-back.png"),C=(j,I)=>{if(I===0)return null;const O=I.toString().padStart(2,"0");return b(`assets/images/pecas/${j}/${O}.png`)},B=C("ponta",l.ponta),S=C("corpo",l.corpo),N=C("janela",l.janela),E=C("asa",l.asa),A=C("jato",l.jato),J=j=>b(`assets/images/abas/0${j}${t===j?"":"-disable"}.png`),oe=j=>{m(j);const I=i[j];l[I]===0&&I!=="ponta"&&r(H=>({...H,[I]:1}))},re=()=>{const j=i[t],I=l[j];I===0?r(O=>({...O,[j]:1})):I<3&&r(O=>({...O,[j]:I+1}))},te=()=>{const j=i[t],I=l[j];I>1&&j!=="ponta"&&r(O=>({...O,[j]:I-1}))},X=i[t],T=l[X],V=T<3,G=T>1&&X!=="ponta",K=T>0?C(X,T):null,ee=l.ponta>0&&l.corpo>0&&l.janela>0&&l.asa>0&&l.jato>0;return c.useEffect(()=>{(async()=>{const O=(()=>{var w,R;const g=((R=(w=import.meta)==null?void 0:w.env)==null?void 0:R.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),v=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return v==="/"?"":v.endsWith("/")?v.slice(0,-1):v})(),H=g=>{if(O==="")return g.startsWith("/")?g:`/${g}`;const v=g.startsWith("/")?g.slice(1):g;return`${O}/${v}`},n=["/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"];try{const g=n.map(v=>new Promise(w=>{const R=new Image;R.onload=()=>w(),R.onerror=()=>{console.warn(`Failed to load image: ${v}`),w()},R.src=H(v)}));await Promise.all(g),u(!1)}catch(g){console.error("Erro ao carregar imagens:",g),u(!1)}})()},[]),d?e.jsx("div",{className:"rocket-screen rocket-loading-overlay",children:e.jsxs("div",{className:"rocket-loading-content",children:[e.jsx("div",{className:"rocket-loading-spinner"}),e.jsx("p",{className:"rocket-loading-text",children:"Carregando..."})]})}):e.jsxs("div",{className:"rocket-screen",style:{backgroundImage:`url("${y}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"rocket-top-image",children:e.jsx("img",{src:h,alt:"Foguete Top",className:"rocket-top-img"})}),e.jsx("div",{className:"rocket-tabs-container",children:[1,2,3,4,5].map(j=>e.jsx("button",{className:`rocket-tab ${t===j?"active":""}`,onClick:()=>oe(j),style:{backgroundImage:`url("${J(j)}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},j))}),e.jsxs("div",{className:"rocket-montagem-container",children:[e.jsx("img",{src:x,alt:"Foguete Montagem",className:"rocket-montagem-img"}),B&&e.jsx("img",{src:B,alt:"Ponta",className:"rocket-ponta"}),S&&e.jsx("img",{src:S,alt:"Corpo",className:"rocket-corpo"}),N&&e.jsx("img",{src:N,alt:"Janela",className:"rocket-janela"}),E&&e.jsx("img",{src:E,alt:"Asa",className:"rocket-asa"}),A&&e.jsx("img",{src:A,alt:"Jato",className:"rocket-jato"})]}),e.jsxs("div",{className:"rocket-bottom-image",children:[e.jsx("img",{src:o,alt:"Foguete Bottom",className:"rocket-bottom-img"}),K&&e.jsx("div",{className:"rocket-preview-container",children:e.jsx("img",{src:K,alt:`Preview ${X}`,className:"rocket-preview-image"})}),e.jsxs("div",{className:"rocket-navigation-buttons",children:[e.jsx("button",{className:"rocket-button-back",onClick:te,disabled:!G,style:{backgroundImage:`url("${M}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-jogar",onClick:()=>{try{localStorage.setItem("rocket-pieces",JSON.stringify(l)),console.log("‚úÖ Pe√ßas do foguete salvas:",l)}catch(j){console.error("‚ùå Erro ao salvar pe√ßas do foguete:",j)}a("tutorial2","fade","right")},disabled:!ee,style:{backgroundImage:`url("${ee?U:_}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-next",onClick:re,disabled:!V,style:{backgroundImage:`url("${$}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})]})]})},qe=({enabled:a})=>{const s=c.useRef(null),d=c.useRef(!1),u=c.useRef({x:0,y:0,z:0}),t=c.useRef({x:0,y:1,z:-1.2}),m=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return c.useEffect(()=>{async function l(){if(d.current)return;const i=window.faceapi,f="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";m?await Promise.all([i.nets.tinyFaceDetector.loadFromUri(f),i.nets.faceLandmark68Net.loadFromUri(f)]):await Promise.all([i.nets.tinyFaceDetector.loadFromUri(f),i.nets.faceLandmark68Net.loadFromUri(f),i.nets.faceExpressionNet.loadFromUri(f)]),d.current=!0,console.log("Modelos de face-api carregados")}async function r(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(h=>setTimeout(h,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await l();const i=document.getElementById("arjs-video");if(!i||!i.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(i.readyState<2&&await new Promise(h=>{const o=()=>{i.removeEventListener("loadedmetadata",o),i.removeEventListener("playing",o),h()};i.addEventListener("loadedmetadata",o,{once:!0}),i.addEventListener("playing",o,{once:!0}),i.readyState>=2&&h()}),!i)return;const f=window.faceapi,p=()=>({width:window.innerWidth,height:window.innerHeight}),b=async()=>{try{if(!a)return;if(!i.videoWidth){y();return}if(m&&i.paused){const S=()=>{i.muted=!0,i.play().catch(()=>{}),window.removeEventListener("touchstart",S),window.removeEventListener("click",S)};window.addEventListener("touchstart",S,{passive:!0}),window.addEventListener("click",S)}const h=(getComputedStyle(i).transform||"").includes("matrix(-1")||(i.style.transform||"").includes("scaleX(-1)"),o=new f.TinyFaceDetectorOptions({inputSize:m?160:224,scoreThreshold:m?.35:.5});let x=window.faceapi.detectAllFaces(i,o).withFaceLandmarks();!m&&window.faceapi.nets.faceExpressionNet.isLoaded&&(x=x.withFaceExpressions());const U=await x,_=p(),$=_.width/i.videoWidth,M=_.height/i.videoHeight,C=(S,N=0)=>{const E=S*$;return h?_.width-(E+N):E},B=S=>S*M;U&&U.length?U.forEach(S=>{var A;const N=S.detection.box,E=((A=S.landmarks)==null?void 0:A.positions)||[];if(E.length===68){const J=E[30],oe=[36,37,38,39,40,41],re=[42,43,44,45,46,47],te=L=>L.reduce((z,Y)=>z+Y,0)/L.length,X=L=>({x:te(L.map(z=>E[z].x)),y:te(L.map(z=>E[z].y))}),T=X(oe),V=X(re),G={x:(T.x+V.x)/2,y:(T.y+V.y)/2},K={x:C(G.x),y:B(G.y)},ee=V.x-T.x,j=V.y-T.y;let I=Math.atan2(j,ee)*180/Math.PI;const O=Math.hypot(ee,j)||1;let H=(J.x-G.x)/O*60,n=-(J.y-G.y)/O*50;h&&(H=-H,I=-I);const g=(L,z,Y)=>Math.max(z,Math.min(Y,L));H=g(H,-60,60),n=g(n,-50,50),I=g(I,-45,45);const v=C(G.x),w=B(G.y)+N.height*M*.1,R=v/_.width,W=w/_.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:R,y:W,detected:!0}}));const k=.25,F=u.current,q={x:F.x+(n-F.x)*k,y:F.y+(H-F.y)*k,z:F.z+(I-F.z)*k};u.current=q;const D=document.getElementById("camera"),P=document.getElementById("head-cube");if(D&&P){const L=D.getObject3D&&D.getObject3D("camera");if(L&&window.THREE){const z=window.THREE,Y=K.x/_.width*2-1,Z=-(K.y/_.height*2-1),pe=1.2,se=new z.Vector3,le=new z.Vector3,ie=new z.Vector3(Y,Z,.5);ie.unproject(L),se.copy(L.position),le.copy(ie).sub(se).normalize();const ae=se.clone().add(le.multiplyScalar(pe)),Q=.35,ne=t.current,de={x:ne.x+(ae.x-ne.x)*Q,y:ne.y+(ae.y-ne.y)*Q,z:ne.z+(ae.z-ne.z)*Q};t.current=de,P.setAttribute("position",`${de.x.toFixed(3)} ${de.y.toFixed(3)} ${de.z.toFixed(3)}`),P.setAttribute("rotation",`${q.x.toFixed(2)} ${q.y.toFixed(2)} ${q.z.toFixed(2)}`)}else P.setAttribute&&P.setAttribute("rotation",`${q.x.toFixed(2)} ${q.y.toFixed(2)} ${q.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(h){console.error("FaceTracker detect error:",h)}y()},y=()=>{m?setTimeout(()=>{s.current=requestAnimationFrame(b)},80):s.current=requestAnimationFrame(b)};s.current=requestAnimationFrame(b)}return a?r().catch(i=>{console.error("FaceTracker start error:",i)}):s.current&&(cancelAnimationFrame(s.current),s.current=null),()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null)}},[a]),null},Ee=c.forwardRef(({className:a="",onSceneReady:s},d)=>{const u=c.useRef(null),[t,m]=c.useState(!1);return c.useEffect(()=>{const l=()=>{const r=document.querySelector("a-scene#ar-scene-main");r?(u.current=r,m(!0),s&&s(),requestAnimationFrame(()=>{const i=document.querySelector(".a-enter-vr-button");i&&(i.style.display="none",i.style.visibility="hidden")})):setTimeout(l,100)};l()},[s]),c.useImperativeHandle(d,()=>({addEntity:l=>{const r=u.current||document.querySelector("a-scene#ar-scene-main");if(r){const i=document.createElement("a-entity");return Object.keys(l).forEach(f=>{i.setAttribute(f,typeof l[f]=="object"?Object.entries(l[f]).map(([p,b])=>`${p}: ${b}`).join("; "):l[f])}),i.id=`entity-${Date.now()}`,r.appendChild(i),i.id}return""},removeEntity:l=>{const r=document.getElementById(l);r&&r.remove()},getScene:()=>u.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const l=u.current||document.querySelector("a-scene#ar-scene-main");if(l){const r=l.renderer;if(r&&r.domElement)return r.domElement.toDataURL("image/png")}return""},setCameraFacing:l=>{console.log("Camera facing changed to:",l)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${a}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:t&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});Ee.displayName="ARSceneAFrame";const Re=c.createContext(void 0),_e=()=>{const a=c.useContext(Re);if(a===void 0)throw new Error("useRA deve ser usado dentro de um RAProvider");return a},Ve=({children:a})=>{const[s,d]=c.useState(null),[u,t]=c.useState(!0),[m,l]=c.useState(null),r=async()=>{var p,b;try{t(!0),l(null),console.log("üîÑ Carregando dados do RA...");const y=((b=(p=import.meta)==null?void 0:p.env)==null?void 0:b.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),o=`${y&&y!=="/"?y.endsWith("/")?y:y+"/":"/"}assets/data/ra.json`,x=await fetch(o);if(!x.ok)throw new Error(`Erro ao carregar dados: ${x.status}`);const U=await x.json();console.log("‚úÖ Dados do RA carregados:",U),d(U)}catch(y){const h=y instanceof Error?y.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",h),l(h)}finally{t(!1)}},i=()=>{r()};c.useEffect(()=>{r()},[]);const f={raData:s,loading:u,error:m,refreshData:i};return e.jsx(Re.Provider,{value:f,children:a})};const He=({onNavigate:a})=>{const{raData:s}=_e(),d=(s==null?void 0:s.configuracoes)||{},u=d.usarAFrame!==!1,t=d.usarVideo!==!1,m=d.usarFaceTracking!==!1,l=c.useRef(null),r=c.useRef(null),[i,f]=c.useState(0),[p,b]=c.useState(60),[y,h]=c.useState(!1),[o,x]=c.useState(!1),[U,_]=c.useState(0),[$,M]=c.useState(null),[C,B]=c.useState(!0),[S,N]=c.useState(null),E=c.useRef([]),A=c.useRef({x:.5,y:.5}),J=c.useRef(!1),oe=c.useRef(null),re=c.useRef(null);c.useEffect(()=>{if(!t){B(!1);return}async function n(){try{const g=document.getElementById("arjs-video");if(!g||!g.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(R=>setTimeout(R,1e3));const w=document.getElementById("arjs-video");if(!w||!w.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),B(!1);return}}const v=g||document.getElementById("arjs-video");v&&v.srcObject?(v.classList.add("ar-video-visible"),oe.current=v,re.current=v.srcObject,B(!1)):(console.error("V√≠deo n√£o tem stream"),B(!1))}catch(g){console.error("Erro ao configurar c√¢mera:",g),B(!1)}}return n(),()=>{}},[t]),c.useEffect(()=>{!C&&!y&&S===null&&N(3)},[C,y,S]),c.useEffect(()=>{if(S===null||S<=0){S===0&&setTimeout(()=>{N(null),h(!0)},500);return}const n=setTimeout(()=>{N(S-1)},1e3);return()=>clearTimeout(n)},[S]);const te=()=>{var v,w;const n=((w=(v=import.meta)==null?void 0:v.env)==null?void 0:w.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),g=n&&n!=="/"?n.endsWith("/")?n:n+"/":"/";return g==="/"?"":g.endsWith("/")?g.slice(0,-1):g},X=c.useMemo(()=>te(),[]),T=c.useCallback(n=>{if(X==="")return n.startsWith("/")?n:`/${n}`;const g=n.startsWith("/")?n.slice(1):n;return`${X}/${g}`},[X]),V=c.useMemo(()=>({nave:T("assets/images/sprites/nave.png"),estrela:T("assets/images/sprites/estrela.png"),cometa:T("assets/images/sprites/cometa.png"),barraProgresso:T("assets/images/sprites/barra-progresso.png"),contador:T("assets/images/sprites/contador.png"),feedbackAcerto:T("assets/images/sprites/feedback-acerto.png"),feedbackErro:T("assets/images/sprites/feedback-erro.png"),bgAcerto:T("assets/images/bg_acerto.png"),bgErro:T("assets/images/bg_erro.png"),estrelaProgresso:T("assets/images/estrela-progresso.png")}),[T]),G=c.useRef({}),[K,ee]=c.useState(null),j=c.useRef({});c.useEffect(()=>{try{const n=localStorage.getItem("rocket-pieces");if(n){const g=JSON.parse(n);ee(g),console.log("‚úÖ Pe√ßas do foguete carregadas:",g)}else console.warn("‚ö†Ô∏è Nenhuma pe√ßa do foguete encontrada no localStorage, usando nave padr√£o")}catch(n){console.error("‚ùå Erro ao carregar pe√ßas do foguete:",n)}},[]),c.useEffect(()=>{if(!K)return;(async()=>{const g=K,w=["ponta","corpo","janela","asa","jato"].map(R=>{const W=g[R];if(W===0)return Promise.resolve();const k=W.toString().padStart(2,"0"),F=T(`assets/images/pecas/${R}/${k}.png`),q=`rocket-${R}-${k}`;return new Promise(D=>{const P=new Image;P.onload=()=>{j.current[q]=P,D()},P.onerror=()=>{console.warn(`Failed to load rocket piece: ${F}`),D()},P.src=F})});await Promise.all(w),console.log("‚úÖ Todas as pe√ßas do foguete carregadas")})()},[K,T]),c.useEffect(()=>{(async()=>{const g=Object.entries(V).map(([v,w])=>new Promise(R=>{const W=new Image;W.onload=()=>{G.current[v]=W,R()},W.onerror=()=>{console.warn(`Failed to load image: ${w}`),R()},W.src=w}));await Promise.all(g)})()},[V]),c.useEffect(()=>{if(!y||o)return;const n=setInterval(()=>{b(g=>g<=1?(x(!0),0):g-1)},1e3);return()=>clearInterval(n)},[y,o]),c.useEffect(()=>{const n=g=>{const{x:v,y:w,detected:R}=g.detail;J.current=R,R&&(A.current={x:v,y:w})};return window.addEventListener("nave-position",n),()=>{window.removeEventListener("nave-position",n)}},[]);const I=c.useCallback(()=>{const n=Math.random()>.5?"star":"comet",g={id:Math.random().toString(36).substr(2,9),type:n,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};E.current.push(g)},[]);c.useEffect(()=>{if(!y||o)return;const n=setInterval(()=>{I()},1e3);return()=>clearInterval(n)},[y,o,I]);const O=c.useCallback(()=>{const n=A.current,g=.08;E.current=E.current.filter(v=>{const w=v.x-n.x,R=v.y-n.y;return Math.sqrt(w*w+R*R)<g+.03?(v.type==="star"?(f(k=>k+10),_(k=>Math.min(100,k+5)),M("acerto"),setTimeout(()=>M(null),500)):(f(k=>Math.max(0,k-5)),_(k=>Math.max(0,k-5)),M("erro"),setTimeout(()=>M(null),500)),!1):!(v.y>1.1)})},[]);c.useEffect(()=>{var F,q;if(!u||!y||o)return;const n=document.querySelector("a-scene#ar-scene-main");if(!n){console.warn("A-Frame Scene n√£o encontrado");return}let g=n.querySelector("a-assets");if(!g){g=document.createElement("a-assets");const D=document.createElement("img");D.id="skyTexture";const P=((q=(F=import.meta)==null?void 0:F.env)==null?void 0:q.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),L=z=>{if(!P||P==="/")return z.startsWith("/")?z:`/${z}`;const Y=P.endsWith("/")?P:P+"/";return z.startsWith("/")?Y+z.slice(1):Y+z};D.src=L("assets/images/SKY.jpg"),D.setAttribute("crossorigin","anonymous"),g.appendChild(D),n.appendChild(g)}let v=n.querySelector("a-sky");v||(v=document.createElement("a-sky"),v.setAttribute("rotation","0 -90 0"),v.setAttribute("material","src: #skyTexture; opacity: 0.5; transparent: true"),n.appendChild(v));let w=document.getElementById("camera");w||(w=document.createElement("a-entity"),w.id="camera",w.setAttribute("camera","active: true"),w.setAttribute("look-controls","enabled: true; reverseMouseDrag: false; touchEnabled: true; magicWindowTrackingEnabled: true; pointerLockEnabled: false; touchSensitivity: 1; mouseSensitivity: 1"),w.setAttribute("wasd-controls","enabled: false"),w.setAttribute("position","0 1.6 0"),n.appendChild(w));let R=n.querySelector("#ambient-light");R||(R=document.createElement("a-entity"),R.id="ambient-light",R.setAttribute("light","type: ambient; color: #888"),n.appendChild(R));let W=n.querySelector("#directional-light");W||(W=document.createElement("a-entity"),W.id="directional-light",W.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),W.setAttribute("position","1 1 1"),n.appendChild(W));let k=document.getElementById("head-cube");return k||(k=document.createElement("a-entity"),k.id="head-cube",k.setAttribute("geometry","primitive: box; width: 0.3; height: 0.3; depth: 0.3"),k.setAttribute("material","color: #FF6B6B; opacity: 0; transparent: true"),k.setAttribute("position","0 1 -1.2"),k.setAttribute("rotation","0 0 0"),n.appendChild(k)),()=>{const D=document.getElementById("head-cube");D&&D.remove();const P=n.querySelector("a-sky");P&&P.remove();const L=document.getElementById("camera");L&&L.remove();const z=n.querySelector("#ambient-light");z&&z.remove();const Y=n.querySelector("#directional-light");Y&&Y.remove();const Z=n.querySelector("a-assets");Z&&Z.remove()}},[y,o]),c.useEffect(()=>{if(!y||o)return;let n=l.current;n||(n=document.createElement("canvas"),n.id="ar-game-canvas",n.className="ar-game-canvas",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.zIndex="9999",document.body.appendChild(n),l.current=n);const g=n.getContext("2d");if(!g){console.error("N√£o foi poss√≠vel criar contexto 2D");return}const v=()=>{n.width=window.innerWidth,n.height=window.innerHeight};v(),window.addEventListener("resize",v);const w=()=>{if(!g)return;g.clearRect(0,0,n.width,n.height),E.current.forEach(F=>{F.y+=F.speed});const R=A.current.x*n.width,W=A.current.y*n.height,k=n.width*.15;if(K&&Object.keys(j.current).length>0){const F=K,q=["ponta","corpo","janela","asa","jato"],D={ponta:1,corpo:1,janela:.7,asa:1.7,jato:.9};q.forEach(P=>{const L=F[P];if(L===0)return;const z=L.toString().padStart(2,"0"),Y=`rocket-${P}-${z}`,Z=j.current[Y];if(Z){const pe=D[P]||1,se=k*pe,le=Z.naturalHeight/Z.naturalWidth,ie=se,ae=se*le;let Q=0;switch(P){case"ponta":Q=-k*1.2;break;case"corpo":Q=-k*.1;break;case"janela":Q=k*-.35;break;case"asa":Q=k*.1;break;case"jato":Q=k*1;break}g.drawImage(Z,R-ie/2,W-ae/2+Q,ie,ae)}})}else{const F=G.current.nave;F&&g.drawImage(F,R-k/2,W-k/2,k,k)}E.current.forEach(F=>{const q=G.current[F.type==="star"?"estrela":"cometa"];if(q){const D=F.x*n.width,P=F.y*n.height,L=n.width*.12;g.drawImage(q,D-L/2,P-L/2,L,L)}}),O(),r.current=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",v),r.current&&cancelAnimationFrame(r.current)}},[y,o,O]),c.useEffect(()=>{if(o&&p===0){const n=U>=50,g=n?"acerto":"erro";l.current&&(l.current.remove(),l.current=null);const v=document.getElementById("arjs-video");v&&(v.classList.remove("ar-video-visible"),v.style.display="none",v.style.visibility="hidden",v.style.opacity="0");try{localStorage.removeItem("ar-result"),localStorage.removeItem("ar-score"),localStorage.removeItem("ar-progress"),localStorage.setItem("ar-result",g),localStorage.setItem("ar-score",i.toString()),localStorage.setItem("ar-progress",U.toString()),localStorage.getItem("ar-result")!==g&&localStorage.setItem("ar-result",g);const w=localStorage.getItem("ar-result");console.log("‚úÖ Resultado salvo:",w,"Progress:",U,"Score:",i,"IsAcerto:",n),(!w||w!==g)&&(console.error("‚ùå Erro: resultado n√£o foi salvo corretamente. Tentando novamente..."),localStorage.setItem("ar-result",g),localStorage.setItem("ar-score",i.toString()),localStorage.setItem("ar-progress",U.toString()))}catch(w){console.error("‚ùå Erro ao salvar no localStorage:",w)}setTimeout(()=>{const w=localStorage.getItem("ar-result");console.log("üîç Verifica√ß√£o final antes de navegar:",w),a("resultado","flip","right")},150)}},[o,p,U,i,a]);const H=n=>{const g=Math.floor(n/60),v=n%60;return`${g}:${v.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[C&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),S!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:S>0?e.jsx("div",{className:"ar-countdown-number",children:S}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),u&&e.jsx(Ee,{}),m&&e.jsx(qe,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:V.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:H(p)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsxs("div",{className:"ar-progress-wrapper",children:[e.jsx("img",{src:V.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${U}%`}})]}),e.jsx("img",{src:V.estrelaProgresso,alt:"Estrela Progresso",className:"ar-progress-star"})]}),$&&e.jsx("div",{className:`ar-feedback-overlay ar-feedback-overlay-${$}`,style:{backgroundImage:`url("${$==="acerto"?V.bgAcerto:V.bgErro}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),$&&e.jsx("div",{className:`ar-feedback ar-feedback-${$}`,children:e.jsx("img",{src:$==="acerto"?V.feedbackAcerto:V.feedbackErro,alt:$,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",i]})]})};const Ye=({onNavigate:a})=>{const[s,d]=c.useState(null);c.useEffect(()=>{const p=(b=0)=>{const y=localStorage.getItem("ar-result");console.log(`Tentativa ${b+1}: resultado no localStorage =`,y),console.log("Todos os itens:",{result:localStorage.getItem("ar-result"),score:localStorage.getItem("ar-score"),progress:localStorage.getItem("ar-progress")}),y==="acerto"||y==="erro"?d(y):b<5?setTimeout(()=>p(b+1),100):(console.error("Resultado n√£o encontrado no localStorage ap√≥s m√∫ltiplas tentativas, voltando para cover"),a("cover","zoom-in","left"))};p(0)},[a]);const t=(()=>{var y,h;const p=((h=(y=import.meta)==null?void 0:y.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),b=p&&p!=="/"?p.endsWith("/")?p:p+"/":"/";return b==="/"?"":b.endsWith("/")?b.slice(0,-1):b})(),m=p=>{if(t==="")return p.startsWith("/")?p:`/${p}`;const b=p.startsWith("/")?p.slice(1):p;return`${t}/${b}`},l={bgCapa:m("assets/images/bg-capa.png"),modalAcerto:m("assets/images/modal-acerto.png"),modalErro:m("assets/images/modal-erro.png"),btnRegistrar:m("assets/images/btn-registrar.png"),btnInicio:m("assets/images/btn-inicio.png"),btnVoltar:m("assets/images/btn-voltar.png")},r=()=>{a("selfie","fade","up")},i=()=>{a("cover","zoom-in","left")},f=()=>{a("ar","fade","left")};return s?e.jsx("div",{className:"result-screen",style:{backgroundImage:`url("${l.bgCapa}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsxs("div",{className:"result-content",children:[e.jsx("img",{src:s==="acerto"?l.modalAcerto:l.modalErro,alt:s==="acerto"?"Acerto":"Erro",className:"result-modal-image"}),s==="acerto"&&e.jsxs("div",{className:"result-modal-buttons",children:[e.jsx("button",{className:"result-button result-button-registrar",onClick:r,style:{backgroundImage:`url(${l.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"result-button result-button-inicio",onClick:i,style:{backgroundImage:`url(${l.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),s==="erro"&&e.jsx("div",{className:"result-modal-buttons",children:e.jsx("button",{className:"result-button result-button-voltar",onClick:f,style:{backgroundImage:`url(${l.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})}):null},he={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},Je=({onNavigate:a,onSettingsChange:s})=>{const[d,u]=c.useState(he),t=(r,i)=>{const f={...d,[r]:i};u(f),s==null||s(f)},m=()=>{a("ar")},l=()=>{u(he),s==null||s(he)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:m,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:d.quality,onChange:r=>t("quality",r.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.enableSound,onChange:r=>t("enableSound",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.enableVibration,onChange:r=>t("enableVibration",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:d.autoSave,onChange:r=>t("autoSave",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:d.language,onChange:r=>t("language",r.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:l,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:m,children:"Salvar"})]})]})},Ge=({onNavigate:a,appName:s="Realidade Aumentada",version:d="1.0.0",description:u="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:t="Desenvolvedor AR"})=>{const m=()=>{a("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:m,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:s}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",d]}),e.jsx("p",{className:"app-description",children:u})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:m,children:"Voltar ao In√≠cio"})})]})},Xe=({onNavigate:a})=>{const s=()=>{a("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:s,children:"Jogar Novamente"})})]})})};const Ke=()=>{const a=c.useRef(null),s=c.useRef(null),d=c.useRef(null),u=c.useRef(null),[t,m]=c.useState(!1),r=(()=>{var x,U;const h=((U=(x=import.meta)==null?void 0:x.env)==null?void 0:U.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),o=h&&h!=="/"?h.endsWith("/")?h:h+"/":"/";return o==="/"?"":o.endsWith("/")?o.slice(0,-1):o})(),i=h=>{if(r==="")return h.startsWith("/")?h:`/${h}`;const o=h.startsWith("/")?h.slice(1):h;return`${r}/${o}`},f=i("assets/images/selfie-top.png"),p=i("assets/images/selfie-bottom.png"),b=i("assets/images/camera-icon.png");c.useEffect(()=>{async function h(){try{let o=document.getElementById("selfie-video");if(o&&o.srcObject){o.classList.add("selfie-video-visible"),a.current=o;return}const x=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});o||(o=document.createElement("video"),o.setAttribute("id","selfie-video"),o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.muted=!0,o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.objectFit="cover",o.style.zIndex="0",o.classList.add("selfie-video-visible"),document.body.appendChild(o)),o.srcObject=x,s.current=x,a.current=o,await o.play()}catch(o){console.error("Erro ao inicializar c√¢mera:",o)}}return h(),()=>{}},[]),c.useEffect(()=>{(()=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{d.current=o},o.onerror=()=>{console.warn("Erro ao carregar imagem top")},o.src=f;const x=new Image;x.crossOrigin="anonymous",x.onload=()=>{u.current=x},x.onerror=()=>{console.warn("Erro ao carregar imagem bottom")},x.src=p})()},[f,p]);const y=async()=>{if(!(!a.current||t)){m(!0);try{const h=a.current,o=document.createElement("canvas");o.width=window.innerWidth,o.height=window.innerHeight;const x=o.getContext("2d");if(!x){m(!1);return}const U=(h.videoWidth||h.clientWidth)/(h.videoHeight||h.clientHeight),_=o.width/o.height;let $=o.width,M=o.height,C=0,B=0;if(U>_?(M=o.width/U,B=(o.height-M)/2):($=o.height*U,C=(o.width-$)/2),x.drawImage(h,C,B,$,M),await(()=>new Promise(N=>{if(d.current&&u.current)N();else{const E=setInterval(()=>{d.current&&u.current&&(clearInterval(E),N())},50);setTimeout(()=>{clearInterval(E),N()},2e3)}}))(),d.current){const N=d.current,E=N.naturalWidth/N.naturalHeight,A=o.width/E;x.drawImage(N,0,0,o.width,A)}if(u.current){const N=u.current,E=N.naturalWidth/N.naturalHeight,A=o.width/E;x.drawImage(N,0,o.height-A,o.width,A)}o.toBlob(async N=>{if(N)try{if(navigator.share&&navigator.canShare){const E=new File([N],`selfie-${Date.now()}.png`,{type:"image/png"});if(navigator.canShare({files:[E]}))await navigator.share({files:[E],title:"Minha Selfie",text:"Confira minha selfie!"});else{const A=URL.createObjectURL(N);await navigator.share({title:"Minha Selfie",text:"Confira minha selfie!",url:A}),URL.revokeObjectURL(A)}}else{const E=URL.createObjectURL(N),A=document.createElement("a");A.href=E,A.download=`selfie-${Date.now()}.png`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(E)}}catch(E){if(E instanceof Error&&E.name!=="AbortError"){console.error("Erro ao compartilhar:",E);const A=URL.createObjectURL(N),J=document.createElement("a");J.href=A,J.download=`selfie-${Date.now()}.png`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(A)}}m(!1)},"image/png")}catch(h){console.error("Erro ao capturar foto:",h),m(!1)}}};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:f,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:p,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:y,disabled:t,style:{backgroundImage:`url(${b})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Qe=({initialScreen:a="loading",appConfig:s,defaultTransition:d="zoom-out",defaultDirection:u="right"})=>{const[t,m]=c.useState(a||"loading"),[l,r]=c.useState(!1),[i,f]=c.useState(d),[p,b]=c.useState(u),[y,h]=c.useState(null);c.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",t)},[]),c.useEffect(()=>{if(!l){const $=setTimeout(()=>{t!=="loading"&&h(null)},1e3);return()=>clearTimeout($)}},[t,l]);const o=($,M)=>{const C=["loading","cover","tutorial","rocket","tutorial2","ar","resultado","final","settings","about","selfie"],B=C.indexOf($),S=C.indexOf(M);return S>B?"right":S<B?"left":"right"},x=($,M,C)=>{const B=M||i,S=C||o(t,$);h(t),f(B),b(S);const N=t==="loading"?800:300;r(!0),setTimeout(()=>{m($),r(!1)},N)},U=()=>{switch(t){case"loading":return e.jsx(ye,{onNavigate:x});case"cover":return e.jsx(Oe,{onNavigate:x,title:s.title,subtitle:s.subtitle});case"tutorial":return e.jsx(We,{onNavigate:x});case"rocket":return e.jsx(De,{onNavigate:x});case"tutorial2":return e.jsx(Me,{onNavigate:x});case"ar":return e.jsx(He,{onNavigate:x});case"resultado":return e.jsx(Ye,{onNavigate:x});case"final":return e.jsx(Xe,{onNavigate:x});case"settings":return e.jsx(Je,{onNavigate:x});case"about":return e.jsx(Ge,{onNavigate:x});case"selfie":return e.jsx(Ke,{onNavigate:x});default:return e.jsx(ye,{onNavigate:x})}},_=()=>{const $="screen-manager",M=`transition-${i}`,C=`direction-${p}`,B=l?"transitioning":"",S=y?`from-${y}`:"";return`${$} ${M} ${C} ${B} ${S}`.trim()};return e.jsx("div",{className:_(),children:U()})},Ze=()=>{const[a,s]=c.useState(!1),d=()=>{const u=window.innerWidth,t=window.innerHeight,m=u>t,l=navigator.userAgent.toLowerCase(),r=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(l)||"ontouchstart"in window||navigator.maxTouchPoints>0,i=u<=768;r&&m||i&&m?(s(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(s(!1),document.body.style.overflow="",document.body.style.touchAction="")};return c.useEffect(()=>{d();let u,t;const m=()=>{clearTimeout(u),u=setTimeout(()=>{d()},100)},l=()=>{clearTimeout(t),t=setTimeout(()=>{d()},300)},r=()=>{clearTimeout(t),t=setTimeout(()=>{d()},300)},i=b=>{clearTimeout(t),t=setTimeout(()=>{d()},100)};window.addEventListener("resize",m),window.addEventListener("orientationchange",l),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",r);const f=window.matchMedia("(orientation: landscape)");f.addEventListener("change",i);const p=setInterval(()=>{d()},2e3);return()=>{clearTimeout(u),clearTimeout(t),clearInterval(p),window.removeEventListener("resize",m),window.removeEventListener("orientationchange",l),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",r),f.removeEventListener("change",i),document.body.style.overflow="",document.body.style.touchAction=""}},[]),a?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function xe(){const a={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(Ve,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Ze,{}),e.jsx(Qe,{initialScreen:"loading",appConfig:a})]})})}ke().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),me.createRoot(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(xe,{})}))}).catch(a=>{console.error("Erro na inicializa√ß√£o global:",a),me.createRoot(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(xe,{})}))});
//# sourceMappingURL=index-d566cce8.js.map
