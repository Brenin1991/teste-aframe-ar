import{r as u,a as ke,R as fe}from"./vendor-b1791c80.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();var xe={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=u,Ie=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),Fe=Object.prototype.hasOwnProperty,Te=Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ce={key:!0,ref:!0,__self:!0,__source:!0};function we(s,t,a){var m,n={},c=null,p=null;a!==void 0&&(c=""+a),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(p=t.ref);for(m in t)Fe.call(t,m)&&!Ce.hasOwnProperty(m)&&(n[m]=t[m]);if(s&&s.defaultProps)for(m in t=s.defaultProps,t)n[m]===void 0&&(n[m]=t[m]);return{$$typeof:Ie,type:s,key:c,ref:p,props:n,_owner:Te.current}}ae.Fragment=Pe;ae.jsx=we;ae.jsxs=we;xe.exports=ae;var e=xe.exports,ne={},be=ke;ne.createRoot=be.createRoot,ne.hydrateRoot=be.hydrateRoot;let X=null,ue=null,te=null,se=null;async function je(){return te||(te=(async()=>{try{console.log("Iniciando inicializa√ß√£o global..."),console.log("Aguardando A-Frame..."),await ze(),console.log("A-Frame pronto"),console.log("Inicializando c√¢mera..."),await Ue(),console.log("C√¢mera inicializada"),console.log("Carregando face-api.js..."),await $e(),console.log("face-api.js carregado"),console.log("Inicializando A-Frame Scene..."),await Be(),console.log("A-Frame Scene inicializado"),console.log("Inicializa√ß√£o global conclu√≠da"),Ee()}catch(s){throw console.error("Erro na inicializa√ß√£o global:",s),s}})(),te)}function Le(){return se||(se=new Promise(s=>{let t=!1,a=null,m=!1;const n=p=>{console.log("Resposta do modal recebida:",p.detail),setTimeout(()=>{!document.querySelector(".a-orientation-modal")&&!document.querySelector('[class*="orientation-modal"]')&&!document.querySelector('[class*="a-orientation"]')&&(m=!0,a&&(clearInterval(a),a=null),window.removeEventListener("aframe-orientation-permission-response",n),console.log("Permiss√£o aceita - navegando para cover"),s(!0))},1e3)};window.addEventListener("aframe-orientation-permission-response",n);const c=()=>{const p=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');p&&!t?(t=!0,console.log("Modal de permiss√£o detectado - aguardando resposta do usu√°rio")):!p&&t&&!m&&(t=!1,setTimeout(()=>{const o=!document.querySelector(".a-orientation-modal")&&!document.querySelector('[class*="orientation-modal"]')&&!document.querySelector('[class*="a-orientation"]');o&&!m?(m=!0,a&&(clearInterval(a),a=null),window.removeEventListener("aframe-orientation-permission-response",n),console.log("Permiss√£o aceita - modal desapareceu"),s(!0)):o||(t=!0)},1e3))};c(),a=setInterval(c,300)}),se)}function Ee(){const s=new MutationObserver(()=>{const t=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');t&&(console.log("Modal detectado, garantindo que seja clic√°vel..."),t.style.pointerEvents="auto",t.style.zIndex="2147483647",t.style.position="fixed",t.style.display="block",t.style.visibility="visible",t.style.opacity="1",t.querySelectorAll("*").forEach(n=>{n.style.pointerEvents="auto"}),t.querySelectorAll("button").forEach(n=>{n.style.pointerEvents="auto",n.style.cursor="pointer",n.style.zIndex="2147483647",n.style.position="relative";const c=()=>{console.log("Bot√£o do modal clicado"),window.dispatchEvent(new CustomEvent("aframe-orientation-permission-response",{detail:{button:n.textContent||""}}))};n.addEventListener("click",c,{once:!0})}))});s.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(s.disconnect(),Ee())},1e3)}function ze(){return new Promise(s=>{if(typeof window<"u"&&window.AFRAME){s();return}const t=()=>{typeof window<"u"&&window.AFRAME?s():setTimeout(t,100)};t()})}async function Ue(){try{const s=document.getElementById("arjs-video");if(s&&s.srcObject)return X=s,ue=s.srcObject,ue;const t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});if(s)X=s;else{const a=document.createElement("video");a.id="arjs-video",a.setAttribute("playsinline",""),a.setAttribute("autoplay",""),a.muted=!0,a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100vw",a.style.height="100vh",a.style.objectFit="cover",a.style.zIndex="0",a.style.display="none",a.style.visibility="hidden",a.style.opacity="0",document.body.appendChild(a),X=a}return X.srcObject=t,ue=t,await X.play(),t}catch(s){return console.warn("Erro ao inicializar c√¢mera global:",s),null}}async function $e(){if(!window.faceapi)return new Promise((s,t)=>{const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",a.onload=()=>{console.log("face-api.js carregado"),s()},a.onerror=()=>t(new Error("Failed to load face-api.js")),document.head.appendChild(a)})}async function Be(){var h,g;if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const s=document.createElement("a-scene");s.id="ar-scene-main",s.setAttribute("embedded","true"),s.setAttribute("vr-mode-ui","enabled: false"),s.setAttribute("device-orientation-permission-ui","enabled: true"),s.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),s.setAttribute("webxr","enabled: false"),s.setAttribute("background","transparent: true"),s.setAttribute("stats","false");const t=document.createElement("a-assets"),a=document.createElement("img");a.id="skyTexture";const m=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=r=>{if(!m||m==="/")return r.startsWith("/")?r:`/${r}`;const f=m.endsWith("/")?m:m+"/";return r.startsWith("/")?f+r.slice(1):f+r};a.src=n("assets/images/SKY.jpg"),a.setAttribute("crossorigin","anonymous"),t.appendChild(a),s.appendChild(t);const c=document.createElement("a-sky");c.setAttribute("rotation","0 -90 0"),c.setAttribute("material","src: #skyTexture; opacity: 0.5; transparent: true"),s.appendChild(c);const p=document.createElement("a-entity");p.id="camera",p.setAttribute("camera","active: true"),p.setAttribute("look-controls","enabled: true; reverseMouseDrag: false; touchEnabled: true; magicWindowTrackingEnabled: true; pointerLockEnabled: false; touchSensitivity: 1; mouseSensitivity: 1"),p.setAttribute("wasd-controls","enabled: false"),p.setAttribute("position","0 1.6 0"),s.appendChild(p);const o=document.createElement("a-entity");o.setAttribute("light","type: ambient; color: #888"),s.appendChild(o);const i=document.createElement("a-entity");i.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),i.setAttribute("position","1 1 1"),s.appendChild(i);const d=document.createElement("a-entity");d.id="head-cube",d.setAttribute("geometry","primitive: box; width: 0.3; height: 0.3; depth: 0.3"),d.setAttribute("material","color: #FF6B6B; opacity: 0; transparent: true"),d.setAttribute("position","0 1 -1.2"),d.setAttribute("rotation","0 0 0"),s.appendChild(d),s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.zIndex="-100",s.style.background="transparent",document.body.appendChild(s),await new Promise(r=>{const f=()=>{const v=document.querySelector("a-scene");v&&v.hasLoaded?r():setTimeout(f,100)};f()}),console.log("A-Frame Scene criado e inicializado")}const ve=({onNavigate:s,onLoadingComplete:t})=>{const[a,m]=u.useState(0),[n,c]=u.useState("Inicializando...");return u.useEffect(()=>((async()=>{const o=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json"],d=(()=>{var r,f;const h=((f=(r=import.meta)==null?void 0:r.env)==null?void 0:f.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return h&&h!=="/"?h.endsWith("/")?h:h+"/":"/"})();try{c("Aguardando inicializa√ß√£o..."),await je(),c("Carregando imagens...");for(let h=0;h<o.length;h++){const g=o[h],r=`${d}${g.startsWith("/")?g.slice(1):g}`;if(g.endsWith(".json"))try{if(!(await fetch(r)).ok)throw new Error(`Failed to load ${g}`)}catch(v){console.warn(`Failed to load ${g}:`,v)}else await new Promise(v=>{const y=new Image;y.onload=()=>v(y),y.onerror=()=>{console.warn(`Failed to load image: ${r}`),v(null)},y.src=r});const f=Math.round((h+1)/o.length*100);m(f)}c("Finalizando..."),await new Promise(h=>setTimeout(h,300)),m(100),c("Aguardando permiss√£o de orienta√ß√£o...");try{await Le()?(c("Conclu√≠do!"),await new Promise(g=>setTimeout(g,200)),t==null||t(),s("cover","fade")):c("Aguardando permiss√£o de orienta√ß√£o...")}catch(h){console.error("Erro ao aguardar permiss√£o:",h),c("Conclu√≠do!"),await new Promise(g=>setTimeout(g,200)),t==null||t(),s("cover","fade")}}catch(h){console.error("Erro ao carregar recursos:",h),c("Erro ao carregar. Continuando..."),setTimeout(()=>{s("cover")},1e3)}})(),()=>{}),[s,t]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${a}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[a,"%"]})]}),e.jsx("p",{className:"loading-status",children:n})]})})},Me=({onNavigate:s,backgroundImage:t})=>{const m=(()=>{var g,r;const d=((r=(g=import.meta)==null?void 0:g.env)==null?void 0:r.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),h=d&&d!=="/"?d.endsWith("/")?d:d+"/":"/";return h==="/"?"":h.endsWith("/")?h.slice(0,-1):h})(),n=d=>{if(m==="")return d.startsWith("/")?d:`/${d}`;const h=d.startsWith("/")?d.slice(1):d;return`${m}/${h}`},c=t||n("assets/images/bg-capa.png"),p=n("assets/images/header-capa.png"),o=n("assets/images/bottom-capa.png"),i=n("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${c}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:p,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>s("tutorial"),style:{backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:o,alt:"Bottom",className:"cover-bottom-img"})})]})},Oe=({onNavigate:s})=>{const a=(()=>{var d,h;const o=((h=(d=import.meta)==null?void 0:d.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=o&&o!=="/"?o.endsWith("/")?o:o+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),m=o=>{if(a==="")return o.startsWith("/")?o:`/${o}`;const i=o.startsWith("/")?o.slice(1):o;return`${a}/${i}`},n=m("assets/images/bg-capa.png"),c=m("assets/images/tutorial-panel.png"),p=m("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${n}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:c,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>s("ar"),style:{backgroundImage:`url("${p}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},De=({enabled:s})=>{const t=u.useRef(null),a=u.useRef(!1),m=u.useRef({x:0,y:0,z:0}),n=u.useRef({x:0,y:1,z:-1.2}),c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return u.useEffect(()=>{async function p(){if(a.current)return;const i=window.faceapi,d="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";c?await Promise.all([i.nets.tinyFaceDetector.loadFromUri(d),i.nets.faceLandmark68Net.loadFromUri(d)]):await Promise.all([i.nets.tinyFaceDetector.loadFromUri(d),i.nets.faceLandmark68Net.loadFromUri(d),i.nets.faceExpressionNet.loadFromUri(d)]),a.current=!0,console.log("Modelos de face-api carregados")}async function o(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(f=>setTimeout(f,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await p();const i=document.getElementById("arjs-video");if(!i||!i.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(i.readyState<2&&await new Promise(f=>{const v=()=>{i.removeEventListener("loadedmetadata",v),i.removeEventListener("playing",v),f()};i.addEventListener("loadedmetadata",v,{once:!0}),i.addEventListener("playing",v,{once:!0}),i.readyState>=2&&f()}),!i)return;const d=window.faceapi,h=()=>({width:window.innerWidth,height:window.innerHeight}),g=async()=>{try{if(!s)return;if(!i.videoWidth){r();return}if(c&&i.paused){const w=()=>{i.muted=!0,i.play().catch(()=>{}),window.removeEventListener("touchstart",w),window.removeEventListener("click",w)};window.addEventListener("touchstart",w,{passive:!0}),window.addEventListener("click",w)}const f=(getComputedStyle(i).transform||"").includes("matrix(-1")||(i.style.transform||"").includes("scaleX(-1)"),v=new d.TinyFaceDetectorOptions({inputSize:c?160:224,scoreThreshold:c?.35:.5});let y=window.faceapi.detectAllFaces(i,v).withFaceLandmarks();!c&&window.faceapi.nets.faceExpressionNet.isLoaded&&(y=y.withFaceExpressions());const S=await y,j=h(),k=j.width/i.videoWidth,C=j.height/i.videoHeight,F=(w,L=0)=>{const z=w*k;return f?j.width-(z+L):z},A=w=>w*C;S&&S.length?S.forEach(w=>{var J;const L=w.detection.box,z=((J=w.landmarks)==null?void 0:J.positions)||[];if(z.length===68){const K=z[30],re=[36,37,38,39,40,41],ge=[42,43,44,45,46,47],V=U=>U.reduce(($,Y)=>$+Y,0)/U.length,I=U=>({x:V(U.map($=>z[$].x)),y:V(U.map($=>z[$].y))}),P=I(re),M=I(ge),B={x:(P.x+M.x)/2,y:(P.y+M.y)/2},H={x:F(B.x),y:A(B.y)},Q=M.x-P.x,Z=M.y-P.y;let l=Math.atan2(Z,Q)*180/Math.PI;const b=Math.hypot(Q,Z)||1;let x=(K.x-B.x)/b*60,E=-(K.y-B.y)/b*50;f&&(x=-x,l=-l);const R=(U,$,Y)=>Math.max($,Math.min(Y,U));x=R(x,-60,60),E=R(E,-50,50),l=R(l,-45,45);const N=F(B.x),T=A(B.y)+L.height*C*.1,O=N/j.width,oe=T/j.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:O,y:oe,detected:!0}}));const D=.25,W=m.current,q={x:W.x+(E-W.x)*D,y:W.y+(x-W.y)*D,z:W.z+(l-W.z)*D};m.current=q;const ie=document.getElementById("camera"),G=document.getElementById("head-cube");if(ie&&G){const U=ie.getObject3D&&ie.getObject3D("camera");if(U&&window.THREE){const $=window.THREE,Y=H.x/j.width*2-1,Re=-(H.y/j.height*2-1),Ne=1.2,ce=new $.Vector3,he=new $.Vector3,pe=new $.Vector3(Y,Re,.5);pe.unproject(U),ce.copy(U.position),he.copy(pe).sub(ce).normalize();const le=ce.clone().add(he.multiplyScalar(Ne)),de=.35,_=n.current,ee={x:_.x+(le.x-_.x)*de,y:_.y+(le.y-_.y)*de,z:_.z+(le.z-_.z)*de};n.current=ee,G.setAttribute("position",`${ee.x.toFixed(3)} ${ee.y.toFixed(3)} ${ee.z.toFixed(3)}`),G.setAttribute("rotation",`${q.x.toFixed(2)} ${q.y.toFixed(2)} ${q.z.toFixed(2)}`)}else G.setAttribute&&G.setAttribute("rotation",`${q.x.toFixed(2)} ${q.y.toFixed(2)} ${q.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(f){console.error("FaceTracker detect error:",f)}r()},r=()=>{c?setTimeout(()=>{t.current=requestAnimationFrame(g)},80):t.current=requestAnimationFrame(g)};t.current=requestAnimationFrame(g)}return s?o().catch(i=>{console.error("FaceTracker start error:",i)}):t.current&&(cancelAnimationFrame(t.current),t.current=null),()=>{t.current&&(cancelAnimationFrame(t.current),t.current=null)}},[s]),null},Se=u.forwardRef(({className:s="",onSceneReady:t,cameraFacing:a="environment"},m)=>{const n=u.useRef(null),[c,p]=u.useState(!1);return u.useEffect(()=>{const o=()=>{const i=document.querySelector("a-scene#ar-scene-main");i?(n.current=i,p(!0),t&&t(),requestAnimationFrame(()=>{const d=document.querySelector(".a-enter-vr-button");d&&(d.style.display="none",d.style.visibility="hidden")})):setTimeout(o,100)};o()},[t]),u.useImperativeHandle(m,()=>({addEntity:o=>{const i=n.current||document.querySelector("a-scene#ar-scene-main");if(i){const d=document.createElement("a-entity");return Object.keys(o).forEach(h=>{d.setAttribute(h,typeof o[h]=="object"?Object.entries(o[h]).map(([g,r])=>`${g}: ${r}`).join("; "):o[h])}),d.id=`entity-${Date.now()}`,i.appendChild(d),d.id}return""},removeEntity:o=>{const i=document.getElementById(o);i&&i.remove()},getScene:()=>n.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const o=n.current||document.querySelector("a-scene#ar-scene-main");if(o){const i=o.renderer;if(i&&i.domElement)return i.domElement.toDataURL("image/png")}return""},setCameraFacing:o=>{console.log("Camera facing changed to:",o)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${s}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:c&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});Se.displayName="ARSceneAFrame";const qe=({onNavigate:s})=>{const t=u.useRef(null),a=u.useRef(null),[m,n]=u.useState(0),[c,p]=u.useState(60),[o,i]=u.useState(!1),[d,h]=u.useState(!1),[g,r]=u.useState(0),[f,v]=u.useState(null),[y,S]=u.useState(!0),[j,k]=u.useState(null),[C,F]=u.useState(!1),[A,w]=u.useState(null),L=u.useRef([]),z=u.useRef({x:.5,y:.5}),J=u.useRef(!1),K=u.useRef(null),re=u.useRef(null);u.useEffect(()=>{async function l(){try{const b=document.getElementById("arjs-video");if(!b||!b.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(R=>setTimeout(R,1e3));const E=document.getElementById("arjs-video");if(!E||!E.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),S(!1);return}}const x=b||document.getElementById("arjs-video");x&&x.srcObject?(x.classList.add("ar-video-visible"),K.current=x,re.current=x.srcObject,S(!1)):(console.error("V√≠deo n√£o tem stream"),S(!1))}catch(b){console.error("Erro ao configurar c√¢mera:",b),S(!1)}}return l(),()=>{}},[]),u.useEffect(()=>{!y&&!o&&j===null&&k(3)},[y,o,j]),u.useEffect(()=>{if(j===null||j<=0){j===0&&setTimeout(()=>{k(null),i(!0)},500);return}const l=setTimeout(()=>{k(j-1)},1e3);return()=>clearTimeout(l)},[j]);const V=(()=>{var x,E;const l=((E=(x=import.meta)==null?void 0:x.env)==null?void 0:E.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),b=l&&l!=="/"?l.endsWith("/")?l:l+"/":"/";return b==="/"?"":b.endsWith("/")?b.slice(0,-1):b})(),I=l=>{if(V==="")return l.startsWith("/")?l:`/${l}`;const b=l.startsWith("/")?l.slice(1):l;return`${V}/${b}`},P={nave:I("assets/images/sprites/nave.png"),estrela:I("assets/images/sprites/estrela.png"),cometa:I("assets/images/sprites/cometa.png"),barraProgresso:I("assets/images/sprites/barra-progresso.png"),contador:I("assets/images/sprites/contador.png"),feedbackAcerto:I("assets/images/sprites/feedback-acerto.png"),feedbackErro:I("assets/images/sprites/feedback-erro.png"),modalAcerto:I("assets/images/modal-acerto.png"),modalErro:I("assets/images/modal-erro.png"),btnRegistrar:I("assets/images/btn-registrar.png"),btnInicio:I("assets/images/btn-inicio.png"),btnVoltar:I("assets/images/btn-voltar.png")},M=u.useRef({});u.useEffect(()=>{(async()=>{const b=Object.entries(P).map(([x,E])=>new Promise(R=>{const N=new Image;N.onload=()=>{M.current[x]=N,R()},N.onerror=()=>{console.warn(`Failed to load image: ${E}`),R()},N.src=E}));await Promise.all(b)})()},[]),u.useEffect(()=>{if(!o||d)return;const l=setInterval(()=>{p(b=>b<=1?(h(!0),0):b-1)},1e3);return()=>clearInterval(l)},[o,d]),u.useEffect(()=>{const l=b=>{const{x,y:E,detected:R}=b.detail;J.current=R,R&&(z.current={x,y:E})};return window.addEventListener("nave-position",l),()=>{window.removeEventListener("nave-position",l)}},[]);const B=u.useCallback(()=>{const l=Math.random()>.5?"star":"comet",b={id:Math.random().toString(36).substr(2,9),type:l,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};L.current.push(b)},[]);u.useEffect(()=>{if(!o||d)return;const l=setInterval(()=>{B()},1e3);return()=>clearInterval(l)},[o,d,B]);const H=u.useCallback(()=>{const l=z.current,b=.08;L.current=L.current.filter(x=>{const E=x.x-l.x,R=x.y-l.y;return Math.sqrt(E*E+R*R)<b+.03?(x.type==="star"?(n(T=>T+10),r(T=>Math.min(100,T+5)),v("acerto"),setTimeout(()=>v(null),500)):(n(T=>Math.max(0,T-5)),r(T=>Math.max(0,T-5)),v("erro"),setTimeout(()=>v(null),500)),!1):!(x.y>1.1)})},[]);u.useEffect(()=>{if(!o||d)return;let l=t.current;l||(l=document.createElement("canvas"),l.id="ar-game-canvas",l.className="ar-game-canvas",l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100vw",l.style.height="100vh",l.style.zIndex="9999",document.body.appendChild(l),t.current=l);const b=l.getContext("2d");if(!b){console.error("N√£o foi poss√≠vel criar contexto 2D");return}const x=()=>{l.width=window.innerWidth,l.height=window.innerHeight};x(),window.addEventListener("resize",x);const E=()=>{if(!b)return;b.clearRect(0,0,l.width,l.height),L.current.forEach(N=>{N.y+=N.speed});const R=M.current.nave;if(R){const N=z.current.x*l.width,T=z.current.y*l.height,O=l.width*.25;b.drawImage(R,N-O/2,T-O/2,O,O)}L.current.forEach(N=>{const T=M.current[N.type==="star"?"estrela":"cometa"];if(T){const O=N.x*l.width,oe=N.y*l.height,D=l.width*.12;b.drawImage(T,O-D/2,oe-D/2,D,D)}}),H(),a.current=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",x),a.current&&cancelAnimationFrame(a.current)}},[o,d,H]),u.useEffect(()=>{if(d&&c===0&&!C){const l=g>=50;w(l?"acerto":"erro"),setTimeout(()=>{F(!0)},1e3)}},[d,c,g,C]);const Q=()=>{F(!1),w(null),n(0),p(60),r(0),v(null),h(!1),i(!1),L.current=[],k(3)},Z=l=>{const b=Math.floor(l/60),x=l%60;return`${b}:${x.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[y&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),j!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:j>0?e.jsx("div",{className:"ar-countdown-number",children:j}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),e.jsx(Se,{cameraFacing:"user"}),e.jsx(De,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:P.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:Z(c)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsx("img",{src:P.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${g}%`}})]}),f&&e.jsx("div",{className:`ar-feedback ar-feedback-${f}`,children:e.jsx("img",{src:f==="acerto"?P.feedbackAcerto:P.feedbackErro,alt:f,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",m]}),C&&A&&e.jsx("div",{className:"ar-result-modal-overlay",children:e.jsxs("div",{className:"ar-result-modal-content",children:[e.jsx("img",{src:A==="acerto"?P.modalAcerto:P.modalErro,alt:A==="acerto"?"Acerto":"Erro",className:"ar-result-modal-image"}),A==="acerto"&&e.jsxs("div",{className:"ar-result-modal-buttons",children:[e.jsx("button",{className:"ar-result-button ar-result-button-registrar",onClick:()=>{F(!1),s("selfie")},style:{backgroundImage:`url(${P.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"ar-result-button ar-result-button-inicio",onClick:()=>{F(!1),s("cover")},style:{backgroundImage:`url(${P.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),A==="erro"&&e.jsx("div",{className:"ar-result-modal-buttons",children:e.jsx("button",{className:"ar-result-button ar-result-button-voltar",onClick:()=>{Q()},style:{backgroundImage:`url(${P.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})})]})},me={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},We=({onNavigate:s,onSettingsChange:t})=>{const[a,m]=u.useState(me),n=(o,i)=>{const d={...a,[o]:i};m(d),t==null||t(d)},c=()=>{s("ar")},p=()=>{m(me),t==null||t(me)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:c,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:a.quality,onChange:o=>n("quality",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:a.enableSound,onChange:o=>n("enableSound",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:a.enableVibration,onChange:o=>n("enableVibration",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:a.autoSave,onChange:o=>n("autoSave",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:a.language,onChange:o=>n("language",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:p,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:c,children:"Salvar"})]})]})},_e=({onNavigate:s,appName:t="Realidade Aumentada",version:a="1.0.0",description:m="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:n="Desenvolvedor AR"})=>{const c=()=>{s("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:c,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:t}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",a]}),e.jsx("p",{className:"app-description",children:m})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:n})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:c,children:"Voltar ao In√≠cio"})})]})},Ve=({onNavigate:s})=>{const t=()=>{s("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:t,children:"Jogar Novamente"})})]})})},He=()=>{const s=u.useRef(null),t=u.useRef(null),[a,m]=u.useState(!1),c=(()=>{var f,v;const g=((v=(f=import.meta)==null?void 0:f.env)==null?void 0:v.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),r=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return r==="/"?"":r.endsWith("/")?r.slice(0,-1):r})(),p=g=>{if(c==="")return g.startsWith("/")?g:`/${g}`;const r=g.startsWith("/")?g.slice(1):g;return`${c}/${r}`},o=p("assets/images/selfie-top.png"),i=p("assets/images/selfie-bottom.png"),d=p("assets/images/camera-icon.png");u.useEffect(()=>{async function g(){try{let r=document.getElementById("selfie-video");if(r&&r.srcObject){r.classList.add("selfie-video-visible"),s.current=r;return}const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});r||(r=document.createElement("video"),r.setAttribute("id","selfie-video"),r.setAttribute("playsinline",""),r.setAttribute("autoplay",""),r.muted=!0,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.objectFit="cover",r.style.zIndex="0",r.classList.add("selfie-video-visible"),document.body.appendChild(r)),r.srcObject=f,t.current=f,s.current=r,await r.play()}catch(r){console.error("Erro ao inicializar c√¢mera:",r)}}return g(),()=>{}},[]);const h=()=>{if(!s.current||a)return;m(!0);const g=s.current,r=document.createElement("canvas");r.width=g.videoWidth||g.clientWidth,r.height=g.videoHeight||g.clientHeight;const f=r.getContext("2d");f?(f.drawImage(g,0,0,r.width,r.height),r.toBlob(v=>{if(v){const y=URL.createObjectURL(v),S=document.createElement("a");S.href=y,S.download=`selfie-${Date.now()}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(y)}m(!1)},"image/png")):m(!1)};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:o,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:i,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:h,disabled:a,style:{backgroundImage:`url(${d})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Ge=({initialScreen:s="loading",appConfig:t,defaultTransition:a="zoom-out",defaultDirection:m="right"})=>{const[n,c]=u.useState(s||"loading"),[p,o]=u.useState(!1),[i,d]=u.useState(a),[h,g]=u.useState(m),[r,f]=u.useState(null);u.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",n)},[]),u.useEffect(()=>{if(!p){const k=setTimeout(()=>{n!=="loading"&&f(null)},1e3);return()=>clearTimeout(k)}},[n,p]);const v=(k,C)=>{const F=["loading","cover","tutorial","ar","final","settings","about","selfie"],A=F.indexOf(k),w=F.indexOf(C);return w>A?"right":w<A?"left":"right"},y=(k,C,F)=>{const A=C||i,w=F||v(n,k);f(n),d(A),g(w);const L=n==="loading"?800:300;o(!0),setTimeout(()=>{c(k),o(!1)},L)},S=()=>{switch(n){case"loading":return e.jsx(ve,{onNavigate:y});case"cover":return e.jsx(Me,{onNavigate:y,title:t.title,subtitle:t.subtitle});case"tutorial":return e.jsx(Oe,{onNavigate:y});case"ar":return e.jsx(qe,{onNavigate:y});case"final":return e.jsx(Ve,{onNavigate:y});case"settings":return e.jsx(We,{onNavigate:y});case"about":return e.jsx(_e,{onNavigate:y});case"selfie":return e.jsx(He,{onNavigate:y});default:return e.jsx(ve,{onNavigate:y})}},j=()=>{const k="screen-manager",C=`transition-${i}`,F=`direction-${h}`,A=p?"transitioning":"",w=r?`from-${r}`:"";return`${k} ${C} ${F} ${A} ${w}`.trim()};return e.jsx("div",{className:j(),children:S()})},Ye=u.createContext(void 0),Xe=({children:s})=>{const[t,a]=u.useState(null),[m,n]=u.useState(!0),[c,p]=u.useState(null),o=async()=>{var h,g;try{n(!0),p(null),console.log("üîÑ Carregando dados do RA...");const r=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),v=`${r&&r!=="/"?r.endsWith("/")?r:r+"/":"/"}assets/data/ra.json`,y=await fetch(v);if(!y.ok)throw new Error(`Erro ao carregar dados: ${y.status}`);const S=await y.json();console.log("‚úÖ Dados do RA carregados:",S),a(S)}catch(r){const f=r instanceof Error?r.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",f),p(f)}finally{n(!1)}},i=()=>{o()};u.useEffect(()=>{o()},[]);const d={raData:t,loading:m,error:c,refreshData:i};return e.jsx(Ye.Provider,{value:d,children:s})},Je=()=>{const[s,t]=u.useState(!1),a=()=>{const m=window.innerWidth,n=window.innerHeight,c=m>n,p=navigator.userAgent.toLowerCase(),o=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(p)||"ontouchstart"in window||navigator.maxTouchPoints>0,i=m<=768;o&&c||i&&c?(t(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(t(!1),document.body.style.overflow="",document.body.style.touchAction="")};return u.useEffect(()=>{a();let m,n;const c=()=>{clearTimeout(m),m=setTimeout(()=>{a()},100)},p=()=>{clearTimeout(n),n=setTimeout(()=>{a()},300)},o=()=>{clearTimeout(n),n=setTimeout(()=>{a()},300)},i=g=>{clearTimeout(n),n=setTimeout(()=>{a()},100)};window.addEventListener("resize",c),window.addEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",o);const d=window.matchMedia("(orientation: landscape)");d.addEventListener("change",i);const h=setInterval(()=>{a()},2e3);return()=>{clearTimeout(m),clearTimeout(n),clearInterval(h),window.removeEventListener("resize",c),window.removeEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",o),d.removeEventListener("change",i),document.body.style.overflow="",document.body.style.touchAction=""}},[]),s?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function ye(){const s={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(Xe,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Je,{}),e.jsx(Ge,{initialScreen:"loading",appConfig:s})]})})}je().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),ne.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(ye,{})}))}).catch(s=>{console.error("Erro na inicializa√ß√£o global:",s),ne.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(ye,{})}))});
//# sourceMappingURL=index-9250fab6.js.map
