import{r as l,a as $e,R as ye}from"./vendor-b1791c80.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Se={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e=l,Me=Symbol.for("react.element"),Be=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,We=_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0};function ke(a,t,n){var s,r={},o=null,h=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(h=t.ref);for(s in t)De.call(t,s)&&!qe.hasOwnProperty(s)&&(r[s]=t[s]);if(a&&a.defaultProps)for(s in t=a.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:Me,type:a,key:o,ref:h,props:r,_owner:We.current}}re.Fragment=Be;re.jsx=ke;re.jsxs=ke;Se.exports=re;var e=Se.exports,ae={},xe=$e;ae.createRoot=xe.createRoot,ae.hydrateRoot=xe.hydrateRoot;let K=null,me=null,se=null;async function Ae(){return se||(se=(async()=>{try{console.log("Iniciando inicializa√ß√£o global..."),console.log("Aguardando A-Frame..."),await Ve(),console.log("A-Frame pronto"),console.log("Inicializando c√¢mera..."),await He(),console.log("C√¢mera inicializada"),console.log("Carregando face-api.js..."),await Ye(),console.log("face-api.js carregado"),console.log("Inicializa√ß√£o global conclu√≠da"),Ie()}catch(a){throw console.error("Erro na inicializa√ß√£o global:",a),a}})(),se)}function Ie(){const a=new MutationObserver(()=>{const t=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');if(t){console.log("Modal detectado, garantindo que seja clic√°vel...");const n=document.querySelector("a-scene canvas");n&&(n.style.pointerEvents="none",n.style.zIndex="1"),t.style.pointerEvents="auto",t.style.zIndex="2147483647",t.style.position="fixed",t.style.display="block",t.style.visibility="visible",t.style.opacity="1",t.querySelectorAll("*").forEach(o=>{o.style.pointerEvents="auto"}),t.querySelectorAll("button").forEach(o=>{o.style.pointerEvents="auto",o.style.cursor="pointer",o.style.zIndex="2147483647",o.style.position="relative"})}});a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(a.disconnect(),Ie())},1e3)}function Ve(){return new Promise(a=>{if(typeof window<"u"&&window.AFRAME){a();return}const t=()=>{typeof window<"u"&&window.AFRAME?a():setTimeout(t,100)};t()})}async function He(){try{const a=document.getElementById("arjs-video");if(a&&a.srcObject)return K=a,me=a.srcObject,me;const t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});if(a)K=a;else{const n=document.createElement("video");n.id="arjs-video",n.setAttribute("playsinline",""),n.setAttribute("autoplay",""),n.muted=!0,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.objectFit="cover",n.style.zIndex="0",n.style.display="none",n.style.visibility="hidden",n.style.opacity="0",document.body.appendChild(n),K=n}return K.srcObject=t,me=t,await K.play(),t}catch(a){return console.warn("Erro ao inicializar c√¢mera global:",a),null}}async function Ye(){if(!window.faceapi)return new Promise((a,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",n.onload=()=>{console.log("face-api.js carregado"),a()},n.onerror=()=>t(new Error("Failed to load face-api.js")),document.head.appendChild(n)})}const je=({onNavigate:a,onLoadingComplete:t})=>{const[n,s]=l.useState(0),[r,o]=l.useState("Inicializando...");return l.useEffect(()=>((async()=>{const m=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json"],f=(()=>{var i,p;const d=((p=(i=import.meta)==null?void 0:i.env)==null?void 0:p.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return d&&d!=="/"?d.endsWith("/")?d:d+"/":"/"})();try{o("Aguardando inicializa√ß√£o..."),await Ae(),o("Carregando imagens...");for(let d=0;d<m.length;d++){const u=m[d],i=`${f}${u.startsWith("/")?u.slice(1):u}`;if(u.endsWith(".json"))try{if(!(await fetch(i)).ok)throw new Error(`Failed to load ${u}`)}catch(x){console.warn(`Failed to load ${u}:`,x)}else await new Promise(x=>{const b=new Image;b.onload=()=>x(b),b.onerror=()=>{console.warn(`Failed to load image: ${i}`),x(null)},b.src=i});const p=Math.round((d+1)/m.length*100);s(p)}o("Finalizando..."),await new Promise(d=>setTimeout(d,300)),s(100),o("Conclu√≠do!"),await new Promise(d=>setTimeout(d,200)),t==null||t(),a("cover","fade")}catch(d){console.error("Erro ao carregar recursos:",d),o("Erro ao carregar. Continuando..."),setTimeout(()=>{a("cover")},1e3)}})(),()=>{}),[a,t]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${n}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[n,"%"]})]}),e.jsx("p",{className:"loading-status",children:r})]})})},Ge=({onNavigate:a,backgroundImage:t})=>{const s=(()=>{var u,i;const f=((i=(u=import.meta)==null?void 0:u.env)==null?void 0:i.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),d=f&&f!=="/"?f.endsWith("/")?f:f+"/":"/";return d==="/"?"":d.endsWith("/")?d.slice(0,-1):d})(),r=f=>{if(s==="")return f.startsWith("/")?f:`/${f}`;const d=f.startsWith("/")?f.slice(1):f;return`${s}/${d}`},o=t||r("assets/images/bg-capa.png"),h=r("assets/images/header-capa.png"),m=r("assets/images/bottom-capa.png"),g=r("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${o}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:h,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>a("tutorial"),style:{backgroundImage:`url(${g})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:m,alt:"Bottom",className:"cover-bottom-img"})})]})},Xe=({onNavigate:a})=>{const n=(()=>{var f,d;const m=((d=(f=import.meta)==null?void 0:f.env)==null?void 0:d.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),g=m&&m!=="/"?m.endsWith("/")?m:m+"/":"/";return g==="/"?"":g.endsWith("/")?g.slice(0,-1):g})(),s=m=>{if(n==="")return m.startsWith("/")?m:`/${m}`;const g=m.startsWith("/")?m.slice(1):m;return`${n}/${g}`},r=s("assets/images/bg-capa.png"),o=s("assets/images/tutorial-panel.png"),h=s("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${r}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:o,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>a("ar"),style:{backgroundImage:`url("${h}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Je=({enabled:a})=>{const t=l.useRef(null),n=l.useRef(!1),s=l.useRef({x:0,y:0,z:0}),r=l.useRef({x:0,y:1,z:-1.2}),o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return l.useEffect(()=>{async function h(){if(n.current)return;const g=window.faceapi,f="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";o?await Promise.all([g.nets.tinyFaceDetector.loadFromUri(f),g.nets.faceLandmark68Net.loadFromUri(f)]):await Promise.all([g.nets.tinyFaceDetector.loadFromUri(f),g.nets.faceLandmark68Net.loadFromUri(f),g.nets.faceExpressionNet.loadFromUri(f)]),n.current=!0,console.log("Modelos de face-api carregados")}async function m(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(p=>setTimeout(p,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await h();const g=document.getElementById("arjs-video");if(!g||!g.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(g.readyState<2&&await new Promise(p=>{const x=()=>{g.removeEventListener("loadedmetadata",x),g.removeEventListener("playing",x),p()};g.addEventListener("loadedmetadata",x,{once:!0}),g.addEventListener("playing",x,{once:!0}),g.readyState>=2&&p()}),!g)return;const f=window.faceapi,d=()=>({width:window.innerWidth,height:window.innerHeight}),u=async()=>{try{if(!a)return;if(!g.videoWidth){i();return}if(o&&g.paused){const j=()=>{g.muted=!0,g.play().catch(()=>{}),window.removeEventListener("touchstart",j),window.removeEventListener("click",j)};window.addEventListener("touchstart",j,{passive:!0}),window.addEventListener("click",j)}const p=(getComputedStyle(g).transform||"").includes("matrix(-1")||(g.style.transform||"").includes("scaleX(-1)"),x=new f.TinyFaceDetectorOptions({inputSize:o?160:224,scoreThreshold:o?.35:.5});let b=window.faceapi.detectAllFaces(g,x).withFaceLandmarks();!o&&window.faceapi.nets.faceExpressionNet.isLoaded&&(b=b.withFaceExpressions());const N=await b,w=d(),k=w.width/g.videoWidth,T=w.height/g.videoHeight,P=(j,z=0)=>{const O=j*k;return p?w.width-(O+z):O},A=j=>j*T;N&&N.length?N.forEach(j=>{var Q;const z=j.detection.box,O=((Q=j.landmarks)==null?void 0:Q.positions)||[];if(O.length===68){const Z=O[30],oe=[36,37,38,39,40,41],pe=[42,43,44,45,46,47],Y=U=>U.reduce((C,J)=>C+J,0)/U.length,I=U=>({x:Y(U.map(C=>O[C].x)),y:Y(U.map(C=>O[C].y))}),F=I(oe),M=I(pe),$={x:(F.x+M.x)/2,y:(F.y+M.y)/2},G={x:P($.x),y:A($.y)},ee=M.x-F.x,te=M.y-F.y;let c=Math.atan2(te,ee)*180/Math.PI;const v=Math.hypot(ee,te)||1;let y=(Z.x-$.x)/v*60,E=-(Z.y-$.y)/v*50;p&&(y=-y,c=-c);const R=(U,C,J)=>Math.max(C,Math.min(J,U));y=R(y,-60,60),E=R(E,-50,50),c=R(c,-45,45);const S=P($.x),L=A($.y)+z.height*T*.1,B=S/w.width,ie=L/w.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:B,y:ie,detected:!0}}));const D=.25,V=s.current,W={x:V.x+(E-V.x)*D,y:V.y+(y-V.y)*D,z:V.z+(c-V.z)*D};s.current=W;const ce=document.getElementById("camera"),X=document.getElementById("head-cube");if(ce&&X){const U=ce.getObject3D&&ce.getObject3D("camera");if(U&&window.THREE){const C=window.THREE,J=G.x/w.width*2-1,Ue=-(G.y/w.height*2-1),Ce=1.2,le=new C.Vector3,ve=new C.Vector3,be=new C.Vector3(J,Ue,.5);be.unproject(U),le.copy(U.position),ve.copy(be).sub(le).normalize();const de=le.clone().add(ve.multiplyScalar(Ce)),ue=.35,H=r.current,ne={x:H.x+(de.x-H.x)*ue,y:H.y+(de.y-H.y)*ue,z:H.z+(de.z-H.z)*ue};r.current=ne,X.setAttribute("position",`${ne.x.toFixed(3)} ${ne.y.toFixed(3)} ${ne.z.toFixed(3)}`),X.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}else X.setAttribute&&X.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(p){console.error("FaceTracker detect error:",p)}i()},i=()=>{o?setTimeout(()=>{t.current=requestAnimationFrame(u)},80):t.current=requestAnimationFrame(u)};t.current=requestAnimationFrame(u)}return a?m().catch(g=>{console.error("FaceTracker start error:",g)}):t.current&&(cancelAnimationFrame(t.current),t.current=null),()=>{t.current&&(cancelAnimationFrame(t.current),t.current=null)}},[a]),null};var q={},_;Object.defineProperty(q,"__esModule",{value:!0});var Fe=q.Scene=_=q.Entity=q.options=void 0,Ke=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=n[s])}return a},Qe=function(){function a(t,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,s){return n&&a(t.prototype,n),s&&a(t,s),t}}(),Ze=l,we=et(Ze);function et(a){return a&&a.__esModule?a:{default:a}}function Pe(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:a}function Le(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)}var tt=["children","events","primitive"],Ee=function(t){return tt.indexOf(t)===-1},Te={runSetAttributeOnUpdates:!0};q.options=Te;function nt(a,t,n){if(n==="className")a.setAttribute("class",t.className);else{if(t[n]&&t[n].constructor===Function)return;a.setAttribute(n,t[n])}}function Ne(a,t,n){var s;if(!(!n||t===n)){for(s in n)Ee(s)&&nt(a,n,s);if(t)for(s in t)Ee(s)&&n[s]===void 0&&a.removeAttribute(s)}}var st=_=q.Entity=function(a){Le(t,a);function t(){var n,s,r,o;Pe(this,t);for(var h=arguments.length,m=Array(h),g=0;g<h;g++)m[g]=arguments[g];return o=(s=(r=fe(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(m))),r),r.initEntity=function(f){var d=r.props,u;if(f){if(r.el=f,d.events)for(u in d.events)ze(f,u,d.events[u]);Ne(f,null,d),d._ref&&d._ref(f)}},s),fe(r,o)}return Qe(t,[{key:"componentDidUpdate",value:function(s,r){var o=this.el,h=this.props;at(o,s.events,h.events),Te.runSetAttributeOnUpdates&&Ne(o,s,h)}},{key:"componentWillUnmount",value:function(){var s=this.el,r=this.props,o;if(r.events)for(o in r.events)he(s,o,r.events[o])}},{key:"render",value:function(){var s=this.props,r=this.isScene?"a-scene":s.primitive||"a-entity",o,h={};for(o in s)(["className","id","mixin"].indexOf(o)!==-1||o.indexOf("data-")===0)&&(h[o]=s[o]);return we.default.createElement(r,Ke({ref:this.initEntity},h),s.children)}}]),t}(we.default.Component);Fe=q.Scene=function(a){Le(t,a);function t(n){Pe(this,t);var s=fe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return s.isScene=!0,s}return t}(st);function at(a,t,n){var s;if(!(!t||!n||t===n)){for(s in n)t[s]!==n[s]&&(t[s]&&he(a,s,t[s]),ze(a,s,n[s]));for(s in t)n[s]||he(a,s,t[s])}}function ze(a,t,n){var s;if(n)for(n.constructor===Function&&(n=[n]),s=0;s<n.length;s++)a.addEventListener(t,n[s])}function he(a,t,n){var s;if(n)for(n.constructor===Function&&(n=[n]),s=0;s<n.length;s++)a.removeEventListener(t,n[s])}const Oe=l.forwardRef(({className:a="",onSceneReady:t,cameraFacing:n="environment"},s)=>{const r=l.useRef(null),[o,h]=l.useState([]),[m,g]=l.useState(!1);l.useEffect(()=>{const d=()=>{typeof window<"u"&&window.AFRAME?(g(!0),t&&t(),requestAnimationFrame(()=>{const u=document.querySelector(".a-enter-vr-button");u&&(u.style.display="none",u.style.visibility="hidden",u.style.pointerEvents="none")})):setTimeout(d,100)};d()},[t]),l.useImperativeHandle(s,()=>({addEntity:d=>{const u=`entity-${Date.now()}`;return h(i=>[...i,{id:u,data:d}]),u},removeEntity:d=>{h(u=>u.filter(i=>i.id!==d))},getScene:()=>typeof window<"u"&&window.AFRAME&&document.querySelector("a-scene")||r.current,captureScreenshot:()=>{if(typeof window<"u"&&window.AFRAME){const d=document.querySelector("a-scene");if(d){const u=d.renderer;if(u&&u.domElement)return u.domElement.toDataURL("image/png")}}return""},setCameraFacing:d=>{console.log("Camera facing changed to:",d)}}),[]);const f={embedded:!0,"vr-mode-ui":"enabled: false","device-orientation-permission-ui":"enabled: true",renderer:"alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;",webxr:"enabled: false",background:"transparent: true",stats:"false",id:"ar-scene-main"};return e.jsxs("div",{className:`ar-scene-aframe ${a}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:[m&&e.jsxs(Fe,{...f,children:[e.jsx(_,{primitive:"a-assets",children:e.jsx("img",{id:"skyTexture",src:"/teste-aframe-ar/assets/images/SKY.jpg",crossOrigin:"anonymous"})}),e.jsx(_,{primitive:"a-sky",rotation:"0 -90 0",material:{src:"#skyTexture",opacity:.5,transparent:!0}}),e.jsx(_,{id:"camera",camera:{active:!0},lookControls:{enabled:!0,reverseMouseDrag:!1,touchEnabled:!0,magicWindowTrackingEnabled:!0,pointerLockEnabled:!1,touchSensitivity:1,mouseSensitivity:1},wasdControls:{enabled:!1},position:"0 1.6 0"}),e.jsx(_,{light:{type:"ambient",color:"#888"}}),e.jsx(_,{light:{type:"directional",color:"#fff",intensity:.6},position:"1 1 1"}),o.map(d=>e.jsx(_,{...d.data},d.id)),e.jsx(_,{id:"head-cube",geometry:{primitive:"box",width:.3,height:.3,depth:.3},material:{color:"#FF6B6B",opacity:.9,transparent:!0},position:"0 1 -1.2",rotation:"0 0 0"}),!1]}),!m&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Carregando A-Frame..."})]})});Oe.displayName="ARSceneAFrame";const rt=({onNavigate:a})=>{const t=l.useRef(null),n=l.useRef(null),[s,r]=l.useState(0),[o,h]=l.useState(60),[m,g]=l.useState(!1),[f,d]=l.useState(!1),[u,i]=l.useState(0),[p,x]=l.useState(null),[b,N]=l.useState(!0),[w,k]=l.useState(null),[T,P]=l.useState(!1),[A,j]=l.useState(null),z=l.useRef([]),O=l.useRef({x:.5,y:.5}),Q=l.useRef(!1),Z=l.useRef(null),oe=l.useRef(null);l.useEffect(()=>{async function c(){try{const v=document.getElementById("arjs-video");if(!v||!v.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(R=>setTimeout(R,1e3));const E=document.getElementById("arjs-video");if(!E||!E.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),N(!1);return}}const y=v||document.getElementById("arjs-video");y&&y.srcObject?(y.classList.add("ar-video-visible"),Z.current=y,oe.current=y.srcObject,N(!1)):(console.error("V√≠deo n√£o tem stream"),N(!1))}catch(v){console.error("Erro ao configurar c√¢mera:",v),N(!1)}}return c(),()=>{}},[]),l.useEffect(()=>{!b&&!m&&w===null&&k(3)},[b,m,w]),l.useEffect(()=>{if(w===null||w<=0){w===0&&setTimeout(()=>{k(null),g(!0)},500);return}const c=setTimeout(()=>{k(w-1)},1e3);return()=>clearTimeout(c)},[w]);const Y=(()=>{var y,E;const c=((E=(y=import.meta)==null?void 0:y.env)==null?void 0:E.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),v=c&&c!=="/"?c.endsWith("/")?c:c+"/":"/";return v==="/"?"":v.endsWith("/")?v.slice(0,-1):v})(),I=c=>{if(Y==="")return c.startsWith("/")?c:`/${c}`;const v=c.startsWith("/")?c.slice(1):c;return`${Y}/${v}`},F={nave:I("assets/images/sprites/nave.png"),estrela:I("assets/images/sprites/estrela.png"),cometa:I("assets/images/sprites/cometa.png"),barraProgresso:I("assets/images/sprites/barra-progresso.png"),contador:I("assets/images/sprites/contador.png"),feedbackAcerto:I("assets/images/sprites/feedback-acerto.png"),feedbackErro:I("assets/images/sprites/feedback-erro.png"),modalAcerto:I("assets/images/modal-acerto.png"),modalErro:I("assets/images/modal-erro.png"),btnRegistrar:I("assets/images/btn-registrar.png"),btnInicio:I("assets/images/btn-inicio.png"),btnVoltar:I("assets/images/btn-voltar.png")},M=l.useRef({});l.useEffect(()=>{(async()=>{const v=Object.entries(F).map(([y,E])=>new Promise(R=>{const S=new Image;S.onload=()=>{M.current[y]=S,R()},S.onerror=()=>{console.warn(`Failed to load image: ${E}`),R()},S.src=E}));await Promise.all(v)})()},[]),l.useEffect(()=>{if(!m||f)return;const c=setInterval(()=>{h(v=>v<=1?(d(!0),0):v-1)},1e3);return()=>clearInterval(c)},[m,f]),l.useEffect(()=>{const c=v=>{const{x:y,y:E,detected:R}=v.detail;Q.current=R,R&&(O.current={x:y,y:E})};return window.addEventListener("nave-position",c),()=>{window.removeEventListener("nave-position",c)}},[]);const $=l.useCallback(()=>{const c=Math.random()>.5?"star":"comet",v={id:Math.random().toString(36).substr(2,9),type:c,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};z.current.push(v)},[]);l.useEffect(()=>{if(!m||f)return;const c=setInterval(()=>{$()},1e3);return()=>clearInterval(c)},[m,f,$]);const G=l.useCallback(()=>{const c=O.current,v=.08;z.current=z.current.filter(y=>{const E=y.x-c.x,R=y.y-c.y;return Math.sqrt(E*E+R*R)<v+.03?(y.type==="star"?(r(L=>L+10),i(L=>Math.min(100,L+5)),x("acerto"),setTimeout(()=>x(null),500)):(r(L=>Math.max(0,L-5)),i(L=>Math.max(0,L-5)),x("erro"),setTimeout(()=>x(null),500)),!1):!(y.y>1.1)})},[]);l.useEffect(()=>{if(!m||f)return;let c=t.current;c||(c=document.createElement("canvas"),c.id="ar-game-canvas",c.className="ar-game-canvas",c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100vw",c.style.height="100vh",c.style.pointerEvents="none",c.style.zIndex="3",document.body.appendChild(c),t.current=c);const v=c.getContext("2d");if(!v){console.error("N√£o foi poss√≠vel criar contexto 2D");return}const y=()=>{c.width=window.innerWidth,c.height=window.innerHeight};y(),window.addEventListener("resize",y);const E=()=>{if(!v)return;v.clearRect(0,0,c.width,c.height),z.current.forEach(S=>{S.y+=S.speed});const R=M.current.nave;if(R){const S=O.current.x*c.width,L=O.current.y*c.height,B=c.width*.25;v.drawImage(R,S-B/2,L-B/2,B,B)}z.current.forEach(S=>{const L=M.current[S.type==="star"?"estrela":"cometa"];if(L){const B=S.x*c.width,ie=S.y*c.height,D=c.width*.12;v.drawImage(L,B-D/2,ie-D/2,D,D)}}),G(),n.current=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",y),n.current&&cancelAnimationFrame(n.current)}},[m,f,G]),l.useEffect(()=>{if(f&&o===0&&!T){const c=u>=50;j(c?"acerto":"erro"),setTimeout(()=>{P(!0)},1e3)}},[f,o,u,T]);const ee=()=>{P(!1),j(null),r(0),h(60),i(0),x(null),d(!1),g(!1),z.current=[],k(3)},te=c=>{const v=Math.floor(c/60),y=c%60;return`${v}:${y.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[b&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),w!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:w>0?e.jsx("div",{className:"ar-countdown-number",children:w}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),e.jsx(Oe,{cameraFacing:"user"}),e.jsx(Je,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:F.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:te(o)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsx("img",{src:F.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${u}%`}})]}),p&&e.jsx("div",{className:`ar-feedback ar-feedback-${p}`,children:e.jsx("img",{src:p==="acerto"?F.feedbackAcerto:F.feedbackErro,alt:p,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",s]}),T&&A&&e.jsx("div",{className:"ar-result-modal-overlay",children:e.jsxs("div",{className:"ar-result-modal-content",children:[e.jsx("img",{src:A==="acerto"?F.modalAcerto:F.modalErro,alt:A==="acerto"?"Acerto":"Erro",className:"ar-result-modal-image"}),A==="acerto"&&e.jsxs("div",{className:"ar-result-modal-buttons",children:[e.jsx("button",{className:"ar-result-button ar-result-button-registrar",onClick:()=>{P(!1),a("selfie")},style:{backgroundImage:`url(${F.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"ar-result-button ar-result-button-inicio",onClick:()=>{P(!1),a("cover")},style:{backgroundImage:`url(${F.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),A==="erro"&&e.jsx("div",{className:"ar-result-modal-buttons",children:e.jsx("button",{className:"ar-result-button ar-result-button-voltar",onClick:()=>{ee()},style:{backgroundImage:`url(${F.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})})]})},ge={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},ot=({onNavigate:a,onSettingsChange:t})=>{const[n,s]=l.useState(ge),r=(m,g)=>{const f={...n,[m]:g};s(f),t==null||t(f)},o=()=>{a("ar")},h=()=>{s(ge),t==null||t(ge)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:o,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:n.quality,onChange:m=>r("quality",m.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.enableSound,onChange:m=>r("enableSound",m.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.enableVibration,onChange:m=>r("enableVibration",m.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.autoSave,onChange:m=>r("autoSave",m.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:n.language,onChange:m=>r("language",m.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:h,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:o,children:"Salvar"})]})]})},it=({onNavigate:a,appName:t="Realidade Aumentada",version:n="1.0.0",description:s="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:r="Desenvolvedor AR"})=>{const o=()=>{a("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:o,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:t}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",n]}),e.jsx("p",{className:"app-description",children:s})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:r})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:o,children:"Voltar ao In√≠cio"})})]})},ct=({onNavigate:a})=>{const t=()=>{a("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:t,children:"Jogar Novamente"})})]})})},lt=()=>{const a=l.useRef(null),t=l.useRef(null),[n,s]=l.useState(!1),o=(()=>{var p,x;const u=((x=(p=import.meta)==null?void 0:p.env)==null?void 0:x.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=u&&u!=="/"?u.endsWith("/")?u:u+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),h=u=>{if(o==="")return u.startsWith("/")?u:`/${u}`;const i=u.startsWith("/")?u.slice(1):u;return`${o}/${i}`},m=h("assets/images/selfie-top.png"),g=h("assets/images/selfie-bottom.png"),f=h("assets/images/camera-icon.png");l.useEffect(()=>{async function u(){try{let i=document.getElementById("selfie-video");if(i&&i.srcObject){i.classList.add("selfie-video-visible"),a.current=i;return}const p=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});i||(i=document.createElement("video"),i.setAttribute("id","selfie-video"),i.setAttribute("playsinline",""),i.setAttribute("autoplay",""),i.muted=!0,i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100vw",i.style.height="100vh",i.style.objectFit="cover",i.style.zIndex="0",i.classList.add("selfie-video-visible"),document.body.appendChild(i)),i.srcObject=p,t.current=p,a.current=i,await i.play()}catch(i){console.error("Erro ao inicializar c√¢mera:",i)}}return u(),()=>{}},[]);const d=()=>{if(!a.current||n)return;s(!0);const u=a.current,i=document.createElement("canvas");i.width=u.videoWidth||u.clientWidth,i.height=u.videoHeight||u.clientHeight;const p=i.getContext("2d");p?(p.drawImage(u,0,0,i.width,i.height),i.toBlob(x=>{if(x){const b=URL.createObjectURL(x),N=document.createElement("a");N.href=b,N.download=`selfie-${Date.now()}.png`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(b)}s(!1)},"image/png")):s(!1)};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:m,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:g,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:d,disabled:n,style:{backgroundImage:`url(${f})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const dt=({initialScreen:a="loading",appConfig:t,defaultTransition:n="zoom-out",defaultDirection:s="right"})=>{const[r,o]=l.useState(a||"loading"),[h,m]=l.useState(!1),[g,f]=l.useState(n),[d,u]=l.useState(s),[i,p]=l.useState(null);l.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",r)},[]),l.useEffect(()=>{if(!h){const k=setTimeout(()=>{r!=="loading"&&p(null)},1e3);return()=>clearTimeout(k)}},[r,h]);const x=(k,T)=>{const P=["loading","cover","tutorial","ar","final","settings","about","selfie"],A=P.indexOf(k),j=P.indexOf(T);return j>A?"right":j<A?"left":"right"},b=(k,T,P)=>{const A=T||g,j=P||x(r,k);p(r),f(A),u(j);const z=r==="loading"?800:300;m(!0),setTimeout(()=>{o(k),m(!1)},z)},N=()=>{switch(r){case"loading":return e.jsx(je,{onNavigate:b});case"cover":return e.jsx(Ge,{onNavigate:b,title:t.title,subtitle:t.subtitle});case"tutorial":return e.jsx(Xe,{onNavigate:b});case"ar":return e.jsx(rt,{onNavigate:b});case"final":return e.jsx(ct,{onNavigate:b});case"settings":return e.jsx(ot,{onNavigate:b});case"about":return e.jsx(it,{onNavigate:b});case"selfie":return e.jsx(lt,{onNavigate:b});default:return e.jsx(je,{onNavigate:b})}},w=()=>{const k="screen-manager",T=`transition-${g}`,P=`direction-${d}`,A=h?"transitioning":"",j=i?`from-${i}`:"";return`${k} ${T} ${P} ${A} ${j}`.trim()};return e.jsx("div",{className:w(),children:N()})},ut=l.createContext(void 0),mt=({children:a})=>{const[t,n]=l.useState(null),[s,r]=l.useState(!0),[o,h]=l.useState(null),m=async()=>{var d,u;try{r(!0),h(null),console.log("üîÑ Carregando dados do RA...");const i=((u=(d=import.meta)==null?void 0:d.env)==null?void 0:u.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),x=`${i&&i!=="/"?i.endsWith("/")?i:i+"/":"/"}assets/data/ra.json`,b=await fetch(x);if(!b.ok)throw new Error(`Erro ao carregar dados: ${b.status}`);const N=await b.json();console.log("‚úÖ Dados do RA carregados:",N),n(N)}catch(i){const p=i instanceof Error?i.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",p),h(p)}finally{r(!1)}},g=()=>{m()};l.useEffect(()=>{m()},[]);const f={raData:t,loading:s,error:o,refreshData:g};return e.jsx(ut.Provider,{value:f,children:a})},gt=()=>{const[a,t]=l.useState(!1),n=()=>{const s=window.innerWidth,r=window.innerHeight,o=s>r,h=navigator.userAgent.toLowerCase(),m=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(h)||"ontouchstart"in window||navigator.maxTouchPoints>0,g=s<=768;m&&o||g&&o?(t(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(t(!1),document.body.style.overflow="",document.body.style.touchAction="")};return l.useEffect(()=>{n();let s,r;const o=()=>{clearTimeout(s),s=setTimeout(()=>{n()},100)},h=()=>{clearTimeout(r),r=setTimeout(()=>{n()},300)},m=()=>{clearTimeout(r),r=setTimeout(()=>{n()},300)},g=u=>{clearTimeout(r),r=setTimeout(()=>{n()},100)};window.addEventListener("resize",o),window.addEventListener("orientationchange",h),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",m);const f=window.matchMedia("(orientation: landscape)");f.addEventListener("change",g);const d=setInterval(()=>{n()},2e3);return()=>{clearTimeout(s),clearTimeout(r),clearInterval(d),window.removeEventListener("resize",o),window.removeEventListener("orientationchange",h),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",m),f.removeEventListener("change",g),document.body.style.overflow="",document.body.style.touchAction=""}},[]),a?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function Re(){const a={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(mt,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(gt,{}),e.jsx(dt,{initialScreen:"loading",appConfig:a})]})})}Ae().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),ae.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsx(Re,{})}))}).catch(a=>{console.error("Erro na inicializa√ß√£o global:",a),ae.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsx(Re,{})}))});
//# sourceMappingURL=index-981adc5c.js.map
