import{r as u,a as Ne,R as pe}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))m(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var ye={exports:{}},ne={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ke=u,Ae=Symbol.for("react.element"),Ie=Symbol.for("react.fragment"),Ce=Object.prototype.hasOwnProperty,Fe=ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Le={key:!0,ref:!0,__self:!0,__source:!0};function xe(t,s,r){var m,a={},c=null,p=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(p=s.ref);for(m in s)Ce.call(s,m)&&!Le.hasOwnProperty(m)&&(a[m]=s[m]);if(t&&t.defaultProps)for(m in s=t.defaultProps,s)a[m]===void 0&&(a[m]=s[m]);return{$$typeof:Ae,type:t,key:c,ref:p,props:a,_owner:Fe.current}}ne.Fragment=Ie;ne.jsx=xe;ne.jsxs=xe;ye.exports=ne;var e=ye.exports,se={},fe=Ne;se.createRoot=fe.createRoot,se.hydrateRoot=fe.hydrateRoot;let X=null,de=null,te=null;async function je(){return te||(te=(async()=>{try{console.log("Iniciando inicializa√ß√£o global..."),console.log("Aguardando A-Frame..."),await ze(),console.log("A-Frame pronto"),console.log("Inicializando c√¢mera..."),await Te(),console.log("C√¢mera inicializada"),console.log("Carregando face-api.js..."),await Pe(),console.log("face-api.js carregado"),console.log("Inicializando A-Frame Scene..."),await Ue(),console.log("A-Frame Scene inicializado"),console.log("Inicializa√ß√£o global conclu√≠da"),we()}catch(t){throw console.error("Erro na inicializa√ß√£o global:",t),t}})(),te)}function we(){const t=new MutationObserver(()=>{const s=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');if(s){console.log("Modal detectado, garantindo que seja clic√°vel...");const r=document.querySelector("a-scene canvas");r&&(r.style.pointerEvents="none",r.style.zIndex="1"),s.style.pointerEvents="auto",s.style.zIndex="2147483647",s.style.position="fixed",s.style.display="block",s.style.visibility="visible",s.style.opacity="1",s.querySelectorAll("*").forEach(c=>{c.style.pointerEvents="auto"}),s.querySelectorAll("button").forEach(c=>{c.style.pointerEvents="auto",c.style.cursor="pointer",c.style.zIndex="2147483647",c.style.position="relative"})}});t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(t.disconnect(),we())},1e3)}function ze(){return new Promise(t=>{if(typeof window<"u"&&window.AFRAME){t();return}const s=()=>{typeof window<"u"&&window.AFRAME?t():setTimeout(s,100)};s()})}async function Te(){try{const t=document.getElementById("arjs-video");if(t&&t.srcObject)return X=t,de=t.srcObject,de;const s=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});if(t)X=t;else{const r=document.createElement("video");r.id="arjs-video",r.setAttribute("playsinline",""),r.setAttribute("autoplay",""),r.muted=!0,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.objectFit="cover",r.style.zIndex="0",r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",document.body.appendChild(r),X=r}return X.srcObject=s,de=s,await X.play(),s}catch(t){return console.warn("Erro ao inicializar c√¢mera global:",t),null}}async function Pe(){if(!window.faceapi)return new Promise((t,s)=>{const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",r.onload=()=>{console.log("face-api.js carregado"),t()},r.onerror=()=>s(new Error("Failed to load face-api.js")),document.head.appendChild(r)})}async function Ue(){var h,g;if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const t=document.createElement("a-scene");t.id="ar-scene-main",t.setAttribute("embedded","true"),t.setAttribute("vr-mode-ui","enabled: false"),t.setAttribute("device-orientation-permission-ui","enabled: true"),t.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),t.setAttribute("webxr","enabled: false"),t.setAttribute("background","transparent: true"),t.setAttribute("stats","false");const s=document.createElement("a-assets"),r=document.createElement("img");r.id="skyTexture";const m=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),a=n=>{if(!m||m==="/")return n.startsWith("/")?n:`/${n}`;const f=m.endsWith("/")?m:m+"/";return n.startsWith("/")?f+n.slice(1):f+n};r.src=a("assets/images/SKY.jpg"),r.setAttribute("crossorigin","anonymous"),s.appendChild(r),t.appendChild(s);const c=document.createElement("a-sky");c.setAttribute("rotation","0 -90 0"),c.setAttribute("material","src: #skyTexture; opacity: 0.5; transparent: true"),t.appendChild(c);const p=document.createElement("a-entity");p.id="camera",p.setAttribute("camera","active: true"),p.setAttribute("look-controls","enabled: true; reverseMouseDrag: false; touchEnabled: true; magicWindowTrackingEnabled: true; pointerLockEnabled: false; touchSensitivity: 1; mouseSensitivity: 1"),p.setAttribute("wasd-controls","enabled: false"),p.setAttribute("position","0 1.6 0"),t.appendChild(p);const o=document.createElement("a-entity");o.setAttribute("light","type: ambient; color: #888"),t.appendChild(o);const i=document.createElement("a-entity");i.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),i.setAttribute("position","1 1 1"),t.appendChild(i);const d=document.createElement("a-entity");d.id="head-cube",d.setAttribute("geometry","primitive: box; width: 0.3; height: 0.3; depth: 0.3"),d.setAttribute("material","color: #FF6B6B; opacity: 0.9; transparent: true"),d.setAttribute("position","0 1 -1.2"),d.setAttribute("rotation","0 0 0"),t.appendChild(d),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="10000",t.style.pointerEvents="none",t.style.background="transparent",document.body.appendChild(t),await new Promise(n=>{const f=()=>{const v=document.querySelector("a-scene");v&&v.hasLoaded?n():setTimeout(f,100)};f()}),console.log("A-Frame Scene criado e inicializado")}const be=({onNavigate:t,onLoadingComplete:s})=>{const[r,m]=u.useState(0),[a,c]=u.useState("Inicializando...");return u.useEffect(()=>((async()=>{const o=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json"],d=(()=>{var n,f;const h=((f=(n=import.meta)==null?void 0:n.env)==null?void 0:f.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return h&&h!=="/"?h.endsWith("/")?h:h+"/":"/"})();try{c("Aguardando inicializa√ß√£o..."),await je(),c("Carregando imagens...");for(let h=0;h<o.length;h++){const g=o[h],n=`${d}${g.startsWith("/")?g.slice(1):g}`;if(g.endsWith(".json"))try{if(!(await fetch(n)).ok)throw new Error(`Failed to load ${g}`)}catch(v){console.warn(`Failed to load ${g}:`,v)}else await new Promise(v=>{const y=new Image;y.onload=()=>v(y),y.onerror=()=>{console.warn(`Failed to load image: ${n}`),v(null)},y.src=n});const f=Math.round((h+1)/o.length*100);m(f)}c("Finalizando..."),await new Promise(h=>setTimeout(h,300)),m(100),c("Conclu√≠do!"),await new Promise(h=>setTimeout(h,200)),s==null||s(),t("cover","fade")}catch(h){console.error("Erro ao carregar recursos:",h),c("Erro ao carregar. Continuando..."),setTimeout(()=>{t("cover")},1e3)}})(),()=>{}),[t,s]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${r}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[r,"%"]})]}),e.jsx("p",{className:"loading-status",children:a})]})})},$e=({onNavigate:t,backgroundImage:s})=>{const m=(()=>{var g,n;const d=((n=(g=import.meta)==null?void 0:g.env)==null?void 0:n.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),h=d&&d!=="/"?d.endsWith("/")?d:d+"/":"/";return h==="/"?"":h.endsWith("/")?h.slice(0,-1):h})(),a=d=>{if(m==="")return d.startsWith("/")?d:`/${d}`;const h=d.startsWith("/")?d.slice(1):d;return`${m}/${h}`},c=s||a("assets/images/bg-capa.png"),p=a("assets/images/header-capa.png"),o=a("assets/images/bottom-capa.png"),i=a("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${c}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:p,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>t("tutorial"),style:{backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:o,alt:"Bottom",className:"cover-bottom-img"})})]})},Be=({onNavigate:t})=>{const r=(()=>{var d,h;const o=((h=(d=import.meta)==null?void 0:d.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=o&&o!=="/"?o.endsWith("/")?o:o+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),m=o=>{if(r==="")return o.startsWith("/")?o:`/${o}`;const i=o.startsWith("/")?o.slice(1):o;return`${r}/${i}`},a=m("assets/images/bg-capa.png"),c=m("assets/images/tutorial-panel.png"),p=m("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${a}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:c,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>t("ar"),style:{backgroundImage:`url("${p}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Oe=({enabled:t})=>{const s=u.useRef(null),r=u.useRef(!1),m=u.useRef({x:0,y:0,z:0}),a=u.useRef({x:0,y:1,z:-1.2}),c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return u.useEffect(()=>{async function p(){if(r.current)return;const i=window.faceapi,d="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";c?await Promise.all([i.nets.tinyFaceDetector.loadFromUri(d),i.nets.faceLandmark68Net.loadFromUri(d)]):await Promise.all([i.nets.tinyFaceDetector.loadFromUri(d),i.nets.faceLandmark68Net.loadFromUri(d),i.nets.faceExpressionNet.loadFromUri(d)]),r.current=!0,console.log("Modelos de face-api carregados")}async function o(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(f=>setTimeout(f,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await p();const i=document.getElementById("arjs-video");if(!i||!i.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(i.readyState<2&&await new Promise(f=>{const v=()=>{i.removeEventListener("loadedmetadata",v),i.removeEventListener("playing",v),f()};i.addEventListener("loadedmetadata",v,{once:!0}),i.addEventListener("playing",v,{once:!0}),i.readyState>=2&&f()}),!i)return;const d=window.faceapi,h=()=>({width:window.innerWidth,height:window.innerHeight}),g=async()=>{try{if(!t)return;if(!i.videoWidth){n();return}if(c&&i.paused){const j=()=>{i.muted=!0,i.play().catch(()=>{}),window.removeEventListener("touchstart",j),window.removeEventListener("click",j)};window.addEventListener("touchstart",j,{passive:!0}),window.addEventListener("click",j)}const f=(getComputedStyle(i).transform||"").includes("matrix(-1")||(i.style.transform||"").includes("scaleX(-1)"),v=new d.TinyFaceDetectorOptions({inputSize:c?160:224,scoreThreshold:c?.35:.5});let y=window.faceapi.detectAllFaces(i,v).withFaceLandmarks();!c&&window.faceapi.nets.faceExpressionNet.isLoaded&&(y=y.withFaceExpressions());const R=await y,w=h(),k=w.width/i.videoWidth,z=w.height/i.videoHeight,F=(j,T=0)=>{const P=j*k;return f?w.width-(P+T):P},A=j=>j*z;R&&R.length?R.forEach(j=>{var J;const T=j.detection.box,P=((J=j.landmarks)==null?void 0:J.positions)||[];if(P.length===68){const K=P[30],ae=[36,37,38,39,40,41],me=[42,43,44,45,46,47],V=U=>U.reduce(($,G)=>$+G,0)/U.length,I=U=>({x:V(U.map($=>P[$].x)),y:V(U.map($=>P[$].y))}),C=I(ae),O=I(me),B={x:(C.x+O.x)/2,y:(C.y+O.y)/2},H={x:F(B.x),y:A(B.y)},Q=O.x-C.x,Z=O.y-C.y;let l=Math.atan2(Z,Q)*180/Math.PI;const b=Math.hypot(Q,Z)||1;let x=(K.x-B.x)/b*60,E=-(K.y-B.y)/b*50;f&&(x=-x,l=-l);const S=(U,$,G)=>Math.max($,Math.min(G,U));x=S(x,-60,60),E=S(E,-50,50),l=S(l,-45,45);const N=F(B.x),L=A(B.y)+T.height*z*.1,M=N/w.width,re=L/w.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:M,y:re,detected:!0}}));const D=.25,q=m.current,W={x:q.x+(E-q.x)*D,y:q.y+(x-q.y)*D,z:q.z+(l-q.z)*D};m.current=W;const oe=document.getElementById("camera"),Y=document.getElementById("head-cube");if(oe&&Y){const U=oe.getObject3D&&oe.getObject3D("camera");if(U&&window.THREE){const $=window.THREE,G=H.x/w.width*2-1,Re=-(H.y/w.height*2-1),Se=1.2,ie=new $.Vector3,ge=new $.Vector3,he=new $.Vector3(G,Re,.5);he.unproject(U),ie.copy(U.position),ge.copy(he).sub(ie).normalize();const ce=ie.clone().add(ge.multiplyScalar(Se)),le=.35,_=a.current,ee={x:_.x+(ce.x-_.x)*le,y:_.y+(ce.y-_.y)*le,z:_.z+(ce.z-_.z)*le};a.current=ee,Y.setAttribute("position",`${ee.x.toFixed(3)} ${ee.y.toFixed(3)} ${ee.z.toFixed(3)}`),Y.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}else Y.setAttribute&&Y.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(f){console.error("FaceTracker detect error:",f)}n()},n=()=>{c?setTimeout(()=>{s.current=requestAnimationFrame(g)},80):s.current=requestAnimationFrame(g)};s.current=requestAnimationFrame(g)}return t?o().catch(i=>{console.error("FaceTracker start error:",i)}):s.current&&(cancelAnimationFrame(s.current),s.current=null),()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null)}},[t]),null},Ee=u.forwardRef(({className:t="",onSceneReady:s,cameraFacing:r="environment"},m)=>{const a=u.useRef(null),[c,p]=u.useState(!1);return u.useEffect(()=>{const o=()=>{const i=document.querySelector("a-scene#ar-scene-main");i?(a.current=i,p(!0),s&&s(),requestAnimationFrame(()=>{const d=document.querySelector(".a-enter-vr-button");d&&(d.style.display="none",d.style.visibility="hidden",d.style.pointerEvents="none")})):setTimeout(o,100)};o()},[s]),u.useImperativeHandle(m,()=>({addEntity:o=>{const i=a.current||document.querySelector("a-scene#ar-scene-main");if(i){const d=document.createElement("a-entity");return Object.keys(o).forEach(h=>{d.setAttribute(h,typeof o[h]=="object"?Object.entries(o[h]).map(([g,n])=>`${g}: ${n}`).join("; "):o[h])}),d.id=`entity-${Date.now()}`,i.appendChild(d),d.id}return""},removeEntity:o=>{const i=document.getElementById(o);i&&i.remove()},getScene:()=>a.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const o=a.current||document.querySelector("a-scene#ar-scene-main");if(o){const i=o.renderer;if(i&&i.domElement)return i.domElement.toDataURL("image/png")}return""},setCameraFacing:o=>{console.log("Camera facing changed to:",o)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${t}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:c&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});Ee.displayName="ARSceneAFrame";const Me=({onNavigate:t})=>{const s=u.useRef(null),r=u.useRef(null),[m,a]=u.useState(0),[c,p]=u.useState(60),[o,i]=u.useState(!1),[d,h]=u.useState(!1),[g,n]=u.useState(0),[f,v]=u.useState(null),[y,R]=u.useState(!0),[w,k]=u.useState(null),[z,F]=u.useState(!1),[A,j]=u.useState(null),T=u.useRef([]),P=u.useRef({x:.5,y:.5}),J=u.useRef(!1),K=u.useRef(null),ae=u.useRef(null);u.useEffect(()=>{async function l(){try{const b=document.getElementById("arjs-video");if(!b||!b.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(S=>setTimeout(S,1e3));const E=document.getElementById("arjs-video");if(!E||!E.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),R(!1);return}}const x=b||document.getElementById("arjs-video");x&&x.srcObject?(x.classList.add("ar-video-visible"),K.current=x,ae.current=x.srcObject,R(!1)):(console.error("V√≠deo n√£o tem stream"),R(!1))}catch(b){console.error("Erro ao configurar c√¢mera:",b),R(!1)}}return l(),()=>{}},[]),u.useEffect(()=>{!y&&!o&&w===null&&k(3)},[y,o,w]),u.useEffect(()=>{if(w===null||w<=0){w===0&&setTimeout(()=>{k(null),i(!0)},500);return}const l=setTimeout(()=>{k(w-1)},1e3);return()=>clearTimeout(l)},[w]);const V=(()=>{var x,E;const l=((E=(x=import.meta)==null?void 0:x.env)==null?void 0:E.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),b=l&&l!=="/"?l.endsWith("/")?l:l+"/":"/";return b==="/"?"":b.endsWith("/")?b.slice(0,-1):b})(),I=l=>{if(V==="")return l.startsWith("/")?l:`/${l}`;const b=l.startsWith("/")?l.slice(1):l;return`${V}/${b}`},C={nave:I("assets/images/sprites/nave.png"),estrela:I("assets/images/sprites/estrela.png"),cometa:I("assets/images/sprites/cometa.png"),barraProgresso:I("assets/images/sprites/barra-progresso.png"),contador:I("assets/images/sprites/contador.png"),feedbackAcerto:I("assets/images/sprites/feedback-acerto.png"),feedbackErro:I("assets/images/sprites/feedback-erro.png"),modalAcerto:I("assets/images/modal-acerto.png"),modalErro:I("assets/images/modal-erro.png"),btnRegistrar:I("assets/images/btn-registrar.png"),btnInicio:I("assets/images/btn-inicio.png"),btnVoltar:I("assets/images/btn-voltar.png")},O=u.useRef({});u.useEffect(()=>{(async()=>{const b=Object.entries(C).map(([x,E])=>new Promise(S=>{const N=new Image;N.onload=()=>{O.current[x]=N,S()},N.onerror=()=>{console.warn(`Failed to load image: ${E}`),S()},N.src=E}));await Promise.all(b)})()},[]),u.useEffect(()=>{if(!o||d)return;const l=setInterval(()=>{p(b=>b<=1?(h(!0),0):b-1)},1e3);return()=>clearInterval(l)},[o,d]),u.useEffect(()=>{const l=b=>{const{x,y:E,detected:S}=b.detail;J.current=S,S&&(P.current={x,y:E})};return window.addEventListener("nave-position",l),()=>{window.removeEventListener("nave-position",l)}},[]);const B=u.useCallback(()=>{const l=Math.random()>.5?"star":"comet",b={id:Math.random().toString(36).substr(2,9),type:l,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};T.current.push(b)},[]);u.useEffect(()=>{if(!o||d)return;const l=setInterval(()=>{B()},1e3);return()=>clearInterval(l)},[o,d,B]);const H=u.useCallback(()=>{const l=P.current,b=.08;T.current=T.current.filter(x=>{const E=x.x-l.x,S=x.y-l.y;return Math.sqrt(E*E+S*S)<b+.03?(x.type==="star"?(a(L=>L+10),n(L=>Math.min(100,L+5)),v("acerto"),setTimeout(()=>v(null),500)):(a(L=>Math.max(0,L-5)),n(L=>Math.max(0,L-5)),v("erro"),setTimeout(()=>v(null),500)),!1):!(x.y>1.1)})},[]);u.useEffect(()=>{if(!o||d)return;let l=s.current;l||(l=document.createElement("canvas"),l.id="ar-game-canvas",l.className="ar-game-canvas",l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100vw",l.style.height="100vh",l.style.pointerEvents="none",l.style.zIndex="9999",document.body.appendChild(l),s.current=l);const b=l.getContext("2d");if(!b){console.error("N√£o foi poss√≠vel criar contexto 2D");return}const x=()=>{l.width=window.innerWidth,l.height=window.innerHeight};x(),window.addEventListener("resize",x);const E=()=>{if(!b)return;b.clearRect(0,0,l.width,l.height),T.current.forEach(N=>{N.y+=N.speed});const S=O.current.nave;if(S){const N=P.current.x*l.width,L=P.current.y*l.height,M=l.width*.25;b.drawImage(S,N-M/2,L-M/2,M,M)}T.current.forEach(N=>{const L=O.current[N.type==="star"?"estrela":"cometa"];if(L){const M=N.x*l.width,re=N.y*l.height,D=l.width*.12;b.drawImage(L,M-D/2,re-D/2,D,D)}}),H(),r.current=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",x),r.current&&cancelAnimationFrame(r.current)}},[o,d,H]),u.useEffect(()=>{if(d&&c===0&&!z){const l=g>=50;j(l?"acerto":"erro"),setTimeout(()=>{F(!0)},1e3)}},[d,c,g,z]);const Q=()=>{F(!1),j(null),a(0),p(60),n(0),v(null),h(!1),i(!1),T.current=[],k(3)},Z=l=>{const b=Math.floor(l/60),x=l%60;return`${b}:${x.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[y&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),w!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:w>0?e.jsx("div",{className:"ar-countdown-number",children:w}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),e.jsx(Ee,{cameraFacing:"user"}),e.jsx(Oe,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:C.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:Z(c)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsx("img",{src:C.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${g}%`}})]}),f&&e.jsx("div",{className:`ar-feedback ar-feedback-${f}`,children:e.jsx("img",{src:f==="acerto"?C.feedbackAcerto:C.feedbackErro,alt:f,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",m]}),z&&A&&e.jsx("div",{className:"ar-result-modal-overlay",children:e.jsxs("div",{className:"ar-result-modal-content",children:[e.jsx("img",{src:A==="acerto"?C.modalAcerto:C.modalErro,alt:A==="acerto"?"Acerto":"Erro",className:"ar-result-modal-image"}),A==="acerto"&&e.jsxs("div",{className:"ar-result-modal-buttons",children:[e.jsx("button",{className:"ar-result-button ar-result-button-registrar",onClick:()=>{F(!1),t("selfie")},style:{backgroundImage:`url(${C.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"ar-result-button ar-result-button-inicio",onClick:()=>{F(!1),t("cover")},style:{backgroundImage:`url(${C.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),A==="erro"&&e.jsx("div",{className:"ar-result-modal-buttons",children:e.jsx("button",{className:"ar-result-button ar-result-button-voltar",onClick:()=>{Q()},style:{backgroundImage:`url(${C.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})})]})},ue={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},De=({onNavigate:t,onSettingsChange:s})=>{const[r,m]=u.useState(ue),a=(o,i)=>{const d={...r,[o]:i};m(d),s==null||s(d)},c=()=>{t("ar")},p=()=>{m(ue),s==null||s(ue)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:c,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:r.quality,onChange:o=>a("quality",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:r.enableSound,onChange:o=>a("enableSound",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:r.enableVibration,onChange:o=>a("enableVibration",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:r.autoSave,onChange:o=>a("autoSave",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:r.language,onChange:o=>a("language",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:p,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:c,children:"Salvar"})]})]})},We=({onNavigate:t,appName:s="Realidade Aumentada",version:r="1.0.0",description:m="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:a="Desenvolvedor AR"})=>{const c=()=>{t("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:c,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:s}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",r]}),e.jsx("p",{className:"app-description",children:m})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:a})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:c,children:"Voltar ao In√≠cio"})})]})},qe=({onNavigate:t})=>{const s=()=>{t("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:s,children:"Jogar Novamente"})})]})})},_e=()=>{const t=u.useRef(null),s=u.useRef(null),[r,m]=u.useState(!1),c=(()=>{var f,v;const g=((v=(f=import.meta)==null?void 0:f.env)==null?void 0:v.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return n==="/"?"":n.endsWith("/")?n.slice(0,-1):n})(),p=g=>{if(c==="")return g.startsWith("/")?g:`/${g}`;const n=g.startsWith("/")?g.slice(1):g;return`${c}/${n}`},o=p("assets/images/selfie-top.png"),i=p("assets/images/selfie-bottom.png"),d=p("assets/images/camera-icon.png");u.useEffect(()=>{async function g(){try{let n=document.getElementById("selfie-video");if(n&&n.srcObject){n.classList.add("selfie-video-visible"),t.current=n;return}const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});n||(n=document.createElement("video"),n.setAttribute("id","selfie-video"),n.setAttribute("playsinline",""),n.setAttribute("autoplay",""),n.muted=!0,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.objectFit="cover",n.style.zIndex="0",n.classList.add("selfie-video-visible"),document.body.appendChild(n)),n.srcObject=f,s.current=f,t.current=n,await n.play()}catch(n){console.error("Erro ao inicializar c√¢mera:",n)}}return g(),()=>{}},[]);const h=()=>{if(!t.current||r)return;m(!0);const g=t.current,n=document.createElement("canvas");n.width=g.videoWidth||g.clientWidth,n.height=g.videoHeight||g.clientHeight;const f=n.getContext("2d");f?(f.drawImage(g,0,0,n.width,n.height),n.toBlob(v=>{if(v){const y=URL.createObjectURL(v),R=document.createElement("a");R.href=y,R.download=`selfie-${Date.now()}.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(y)}m(!1)},"image/png")):m(!1)};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:o,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:i,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:h,disabled:r,style:{backgroundImage:`url(${d})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Ve=({initialScreen:t="loading",appConfig:s,defaultTransition:r="zoom-out",defaultDirection:m="right"})=>{const[a,c]=u.useState(t||"loading"),[p,o]=u.useState(!1),[i,d]=u.useState(r),[h,g]=u.useState(m),[n,f]=u.useState(null);u.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",a)},[]),u.useEffect(()=>{if(!p){const k=setTimeout(()=>{a!=="loading"&&f(null)},1e3);return()=>clearTimeout(k)}},[a,p]);const v=(k,z)=>{const F=["loading","cover","tutorial","ar","final","settings","about","selfie"],A=F.indexOf(k),j=F.indexOf(z);return j>A?"right":j<A?"left":"right"},y=(k,z,F)=>{const A=z||i,j=F||v(a,k);f(a),d(A),g(j);const T=a==="loading"?800:300;o(!0),setTimeout(()=>{c(k),o(!1)},T)},R=()=>{switch(a){case"loading":return e.jsx(be,{onNavigate:y});case"cover":return e.jsx($e,{onNavigate:y,title:s.title,subtitle:s.subtitle});case"tutorial":return e.jsx(Be,{onNavigate:y});case"ar":return e.jsx(Me,{onNavigate:y});case"final":return e.jsx(qe,{onNavigate:y});case"settings":return e.jsx(De,{onNavigate:y});case"about":return e.jsx(We,{onNavigate:y});case"selfie":return e.jsx(_e,{onNavigate:y});default:return e.jsx(be,{onNavigate:y})}},w=()=>{const k="screen-manager",z=`transition-${i}`,F=`direction-${h}`,A=p?"transitioning":"",j=n?`from-${n}`:"";return`${k} ${z} ${F} ${A} ${j}`.trim()};return e.jsx("div",{className:w(),children:R()})},He=u.createContext(void 0),Ye=({children:t})=>{const[s,r]=u.useState(null),[m,a]=u.useState(!0),[c,p]=u.useState(null),o=async()=>{var h,g;try{a(!0),p(null),console.log("üîÑ Carregando dados do RA...");const n=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),v=`${n&&n!=="/"?n.endsWith("/")?n:n+"/":"/"}assets/data/ra.json`,y=await fetch(v);if(!y.ok)throw new Error(`Erro ao carregar dados: ${y.status}`);const R=await y.json();console.log("‚úÖ Dados do RA carregados:",R),r(R)}catch(n){const f=n instanceof Error?n.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",f),p(f)}finally{a(!1)}},i=()=>{o()};u.useEffect(()=>{o()},[]);const d={raData:s,loading:m,error:c,refreshData:i};return e.jsx(He.Provider,{value:d,children:t})},Ge=()=>{const[t,s]=u.useState(!1),r=()=>{const m=window.innerWidth,a=window.innerHeight,c=m>a,p=navigator.userAgent.toLowerCase(),o=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(p)||"ontouchstart"in window||navigator.maxTouchPoints>0,i=m<=768;o&&c||i&&c?(s(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(s(!1),document.body.style.overflow="",document.body.style.touchAction="")};return u.useEffect(()=>{r();let m,a;const c=()=>{clearTimeout(m),m=setTimeout(()=>{r()},100)},p=()=>{clearTimeout(a),a=setTimeout(()=>{r()},300)},o=()=>{clearTimeout(a),a=setTimeout(()=>{r()},300)},i=g=>{clearTimeout(a),a=setTimeout(()=>{r()},100)};window.addEventListener("resize",c),window.addEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",o);const d=window.matchMedia("(orientation: landscape)");d.addEventListener("change",i);const h=setInterval(()=>{r()},2e3);return()=>{clearTimeout(m),clearTimeout(a),clearInterval(h),window.removeEventListener("resize",c),window.removeEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",o),d.removeEventListener("change",i),document.body.style.overflow="",document.body.style.touchAction=""}},[]),t?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function ve(){const t={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(Ye,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Ge,{}),e.jsx(Ve,{initialScreen:"loading",appConfig:t})]})})}je().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),se.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(ve,{})}))}).catch(t=>{console.error("Erro na inicializa√ß√£o global:",t),se.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(ve,{})}))});
//# sourceMappingURL=index-e50d9c99.js.map
