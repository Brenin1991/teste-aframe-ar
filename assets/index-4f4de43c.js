import{r,a as Be,R as Oe}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&m(x)}).observe(document,{childList:!0,subtree:!0});function o(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(t){if(t.ep)return;t.ep=!0;const d=o(t);fetch(t.href,d)}})();var Ae={exports:{}},de={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=r,_e=Symbol.for("react.element"),Ve=Symbol.for("react.fragment"),qe=Object.prototype.hasOwnProperty,He=We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ye={key:!0,ref:!0,__self:!0,__source:!0};function Ie(u,s,o){var m,t={},d=null,x=null;o!==void 0&&(d=""+o),s.key!==void 0&&(d=""+s.key),s.ref!==void 0&&(x=s.ref);for(m in s)qe.call(s,m)&&!Ye.hasOwnProperty(m)&&(t[m]=s[m]);if(u&&u.defaultProps)for(m in s=u.defaultProps,s)t[m]===void 0&&(t[m]=s[m]);return{$$typeof:_e,type:u,key:d,ref:x,props:t,_owner:He.current}}de.Fragment=Ve;de.jsx=Ie;de.jsxs=Ie;Ae.exports=de;var e=Ae.exports,be={},Fe=Be;be.createRoot=Fe.createRoot,be.hydrateRoot=Fe.hydrateRoot;async function Xe(){try{const u=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});let s=document.getElementById("arjs-video");return s||(s=document.createElement("video"),s.setAttribute("id","arjs-video"),s.setAttribute("playsinline",""),s.setAttribute("autoplay",""),s.muted=!0,s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100vw",s.style.height="100vh",s.style.objectFit="cover",s.style.zIndex="0",s.style.display="none",s.style.visibility="hidden",s.style.opacity="0",document.body.appendChild(s)),s.srcObject=u,await s.play(),u}catch(u){return console.warn("Erro ao inicializar cÃ¢mera (serÃ¡ tentado novamente na tela AR):",u),null}}async function Ge(){if(!window.faceapi)return new Promise((u,s)=>{const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",o.onload=()=>{console.log("face-api.js carregado"),u()},o.onerror=()=>s(new Error("Failed to load face-api.js")),document.head.appendChild(o)})}const Ce=({onNavigate:u,onLoadingComplete:s})=>{const[o,m]=r.useState(0),[t,d]=r.useState("Inicializando...");return r.useEffect(()=>{(async()=>{const i=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.png","/assets/images/mascara.png","/assets/data/ra.json"],l=(()=>{var j,C;const h=((C=(j=import.meta)==null?void 0:j.env)==null?void 0:C.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return h&&h!=="/"?h.endsWith("/")?h:h+"/":"/"})();try{d("Solicitando permissÃ£o da cÃ¢mera..."),await Xe(),d("Carregando face-api.js..."),await Ge(),d("Carregando imagens...");for(let h=0;h<i.length;h++){const S=i[h],j=`${l}${S.startsWith("/")?S.slice(1):S}`;if(S.endsWith(".json"))try{if(!(await fetch(j)).ok)throw new Error(`Failed to load ${S}`)}catch(I){console.warn(`Failed to load ${S}:`,I)}else await new Promise(I=>{const R=new Image;R.onload=()=>I(R),R.onerror=()=>{console.warn(`Failed to load image: ${j}`),I(null)},R.src=j});const C=Math.round((h+1)/i.length*100);m(C)}d("Finalizando..."),await new Promise(h=>setTimeout(h,300)),m(100),d("ConcluÃ­do!"),await new Promise(h=>setTimeout(h,200)),s==null||s(),u("cover","fade")}catch(h){console.error("Erro ao carregar recursos:",h),d("Erro ao carregar. Continuando..."),setTimeout(()=>{u("cover")},1e3)}})()},[u,s]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${o}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[o,"%"]})]}),e.jsx("p",{className:"loading-status",children:t})]})})},Je=({onNavigate:u,backgroundImage:s})=>{const m=(()=>{var S,j;const l=((j=(S=import.meta)==null?void 0:S.env)==null?void 0:j.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),h=l&&l!=="/"?l.endsWith("/")?l:l+"/":"/";return h==="/"?"":h.endsWith("/")?h.slice(0,-1):h})(),t=l=>{if(m==="")return l.startsWith("/")?l:`/${l}`;const h=l.startsWith("/")?l.slice(1):l;return`${m}/${h}`},d=s||t("assets/images/bg-capa.png"),x=t("assets/images/header-capa.png"),i=t("assets/images/bottom-capa.png"),w=t("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${d}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:x,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>u("tutorial"),style:{backgroundImage:`url(${w})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:i,alt:"Bottom",className:"cover-bottom-img"})})]})},Qe=({onNavigate:u})=>{const o=(()=>{var l,h;const i=((h=(l=import.meta)==null?void 0:l.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),w=i&&i!=="/"?i.endsWith("/")?i:i+"/":"/";return w==="/"?"":w.endsWith("/")?w.slice(0,-1):w})(),m=i=>{if(o==="")return i.startsWith("/")?i:`/${i}`;const w=i.startsWith("/")?i.slice(1):i;return`${o}/${w}`},t=m("assets/images/bg-capa.png"),d=m("assets/images/tutorial-panel.png"),x=m("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:d,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>u("ar"),style:{backgroundImage:`url("${x}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Ke=({enabled:u})=>{const s=r.useRef(null),o=r.useRef(null),m=r.useRef(!1),t=r.useRef(null),d=r.useRef({x:0,y:0,z:0}),x=r.useRef({x:0,y:1,z:-1.2}),i=r.useRef(null),w=r.useRef(!1),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return r.useEffect(()=>{function h(){if(!s.current){const a=document.createElement("canvas");a.id="face-tracker-overlay",a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100vw",a.style.height="100vh",a.style.pointerEvents="none",a.style.zIndex="9999",document.body.appendChild(a),s.current=a}if(!t.current){const a=document.createElement("div");a.id="face-tracker-status",a.style.position="fixed",a.style.left="8px",a.style.bottom="8px",a.style.padding="4px 8px",a.style.background="rgba(0,0,0,0.55)",a.style.color="#fff",a.style.font="12px Arial",a.style.borderRadius="6px",a.style.zIndex="10000",a.style.pointerEvents="none",a.textContent="FaceTracker: iniciando",document.body.appendChild(a),t.current=a}}function S(){s.current&&s.current.parentNode&&(s.current.parentNode.removeChild(s.current),s.current=null),t.current&&t.current.parentNode&&(t.current.parentNode.removeChild(t.current),t.current=null)}async function j(){window.faceapi||(t.current&&(t.current.textContent="FaceTracker: carregando lib"),await new Promise((a,g)=>{const y=document.createElement("script");y.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",y.onload=()=>a(),y.onerror=()=>g(new Error("Falha ao carregar face-api.js")),document.head.appendChild(y)}),console.log("face-api.js carregado"))}async function C(){if(m.current)return;t.current&&(t.current.textContent="FaceTracker: carregando modelos");const a=window.faceapi,g="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";l?await Promise.all([a.nets.tinyFaceDetector.loadFromUri(g),a.nets.faceLandmark68Net.loadFromUri(g)]):await Promise.all([a.nets.tinyFaceDetector.loadFromUri(g),a.nets.faceLandmark68Net.loadFromUri(g),a.nets.faceExpressionNet.loadFromUri(g)]),m.current=!0,t.current&&(t.current.textContent="FaceTracker: pronto"),console.log("Modelos de face-api carregados")}function I(){var U,P;if(w.current)return;const a=((P=(U=import.meta)==null?void 0:U.env)==null?void 0:P.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),g=k=>{if(!a||a==="/")return k.startsWith("/")?k:`/${k}`;const A=a.endsWith("/")?a:a+"/";return k.startsWith("/")?A+k.replace(/^\//,""):A+k},z=["assets/images/mascara.png","images/mascara.png","mascara.png"].map(g),p=!a||a==="/"?["/mascara.png","/assets/images/mascara.png","/images/mascara.png"]:[],M=[...z,...p];let X=0;const $=new Image,T=()=>{if(X>=M.length){console.warn("NÃ£o foi possÃ­vel carregar mascara.png de nenhum caminho:",M);return}const k=M[X++]+`?v=${Date.now()}`;$.src=k,console.log("BASE_URL resolvido:",a,"| Tentando mÃ¡scara em:",k)};$.onload=()=>{w.current=!0,i.current=$,console.log("MÃ¡scara carregada em:",$.src)},$.onerror=()=>{T()},i.current=$,T()}function R(a){const g=l?1:Math.max(1,window.devicePixelRatio||1);a.width=Math.floor(window.innerWidth*g),a.height=Math.floor(window.innerHeight*g);const y=a.getContext("2d");y&&y.setTransform(g,0,0,g,0,0)}async function W(){h(),await j(),await C(),I();const a=()=>new Promise((T,U)=>{let P=!1;const k=setTimeout(()=>{P||U(new Error("Timeout aguardando vÃ­deo da cÃ¢mera"))},15e3),A=f=>{if(!f)return!1;const N=!!f.srcObject;return(f.readyState>=2||!f.paused&&f.currentTime>0)&&N?(P=!0,clearTimeout(k),f.removeEventListener("playing",_),c.disconnect(),T(f),!0):!1},_=f=>{const N=f.target;A(N)},c=new MutationObserver(()=>{const f=document.getElementById("arjs-video");A(f)||f&&f.addEventListener("playing",_,{once:!0})});c.observe(document.body,{childList:!0,subtree:!0});const n=document.getElementById("arjs-video");A(n)||n&&n.addEventListener("playing",_,{once:!0})});let g;try{g=await a()}catch(T){t.current&&(t.current.textContent="FaceTracker: sem vÃ­deo"),console.warn("FaceTracker: vÃ­deo nÃ£o disponÃ­vel a tempo",T);return}const y=s.current;if(!g||!y){t.current&&(t.current.textContent="FaceTracker: sem vÃ­deo");return}const z=window.faceapi,p=y.getContext("2d");function M(){y&&R(y)}M(),window.addEventListener("resize",M);const X=async()=>{try{if(!u)return;if(!g.videoWidth){t.current&&(t.current.textContent="FaceTracker: aguardando vÃ­deo"),$();return}if(l&&g.paused){const A=()=>{g.muted=!0,g.play().catch(()=>{}),window.removeEventListener("touchstart",A),window.removeEventListener("click",A)};window.addEventListener("touchstart",A,{passive:!0}),window.addEventListener("click",A)}const T=(getComputedStyle(g).transform||"").includes("matrix(-1")||(g.style.transform||"").includes("scaleX(-1)"),U=new z.TinyFaceDetectorOptions({inputSize:l?160:224,scoreThreshold:l?.35:.5});let P=window.faceapi.detectAllFaces(g,U).withFaceLandmarks();!l&&window.faceapi.nets.faceExpressionNet.isLoaded&&(P=P.withFaceExpressions());const k=await P;if(p){p.clearRect(0,0,y.width,y.height),l||(p.fillStyle="rgba(78,205,196,0.8)",p.beginPath(),p.arc(16,16,6,0,Math.PI*2),p.fill(),p.font="12px Arial",p.fillText(`faces: ${(k==null?void 0:k.length)||0}`,30,20));const A=l?1:Math.max(1,window.devicePixelRatio||1),_=y.width/A,c=y.height/A,n=_/g.videoWidth,f=c/g.videoHeight,N=(b,F=0)=>{const V=b*n;return T?_-(V+F):V},E=b=>b*f,v=(b,F,V,D)=>{if(l)return;const J=N(b),re=E(F);p.fillStyle=D,p.beginPath(),p.arc(J,re,4,0,Math.PI*2),p.fill(),p.fillStyle=D,p.fillText(V,J+6,re-6)};k&&k.length?(t.current&&(t.current.textContent="FaceTracker: detectando"),k.forEach(b=>{var je;const F=b.detection.box,V=F.width*n,D=N(F.x,V),J=E(F.y),re=V,we=F.height*f;if(l||(p.strokeStyle="#4ECDC4",p.lineWidth=3,p.strokeRect(D,J,re,we)),!l&&b.expressions){const Q=b.expressions||{},ie=Object.entries(Q);if(ie.length){const[ue,ce]=ie.reduce((q,H)=>q[1]>H[1]?q:H),ee=`${ue} ${(ce*100).toFixed(0)}%`;p.font="12px Arial";const Y=p.measureText(ee).width+12;p.fillStyle="rgba(0,0,0,0.6)",p.fillRect(D,Math.max(0,J-22),Y,20),p.fillStyle="#FFFFFF",p.fillText(ee,D+6,Math.max(12,J-8))}}const oe=((je=b.landmarks)==null?void 0:je.positions)||[];if(oe.length===68){const Q=oe[30],ie=[36,37,38,39,40,41],ue=[42,43,44,45,46,47],ce=B=>B.reduce((O,ae)=>O+ae,0)/B.length,ee=B=>({x:ce(B.map(O=>oe[O].x)),y:ce(B.map(O=>oe[O].y))}),Y=ee(ie),q=ee(ue);l||(v(Q.x,Q.y,"nose","#00E5A8"),v(Y.x,Y.y,"eye-L","#EF476F"),v(q.x,q.y,"eye-R","#EF476F"));const H={x:(Y.x+q.x)/2,y:(Y.y+q.y)/2},Ee={x:N(H.x),y:E(H.y)},Re=q.x-Y.x,Ne=q.y-Y.y;let te=Math.atan2(Ne,Re)*180/Math.PI;const ke=Math.hypot(Re,Ne)||1;let se=(Q.x-H.x)/ke*60,me=-(Q.y-H.y)/ke*50;T&&(se=-se,te=-te);const ge=(B,O,ae)=>Math.max(O,Math.min(ae,B));se=ge(se,-60,60),me=ge(me,-50,50),te=ge(te,-45,45);const Pe=N(H.x),ze=E(H.y)+we*.1,$e=Pe/_,Ue=ze/c;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:$e,y:Ue,detected:!0}}));const he=.25,K=d.current,G={x:K.x+(me-K.x)*he,y:K.y+(se-K.y)*he,z:K.z+(te-K.z)*he};d.current=G;const pe=document.getElementById("camera"),ne=document.getElementById("head-cube");if(pe&&ne){const B=pe.getObject3D&&pe.getObject3D("camera");if(B&&window.THREE){const O=window.THREE,ae=Ee.x/_*2-1,Me=-(Ee.y/c*2-1),De=1.2,fe=new O.Vector3,Se=new O.Vector3,Te=new O.Vector3(ae,Me,.5);Te.unproject(B),fe.copy(B.position),Se.copy(Te).sub(fe).normalize();const xe=fe.clone().add(Se.multiplyScalar(De)),ve=.35,Z=x.current,le={x:Z.x+(xe.x-Z.x)*ve,y:Z.y+(xe.y-Z.y)*ve,z:Z.z+(xe.z-Z.z)*ve};x.current=le,ne.setAttribute("position",`${le.x.toFixed(3)} ${le.y.toFixed(3)} ${le.z.toFixed(3)}`),ne.setAttribute("rotation",`${G.x.toFixed(2)} ${G.y.toFixed(2)} ${G.z.toFixed(2)}`)}else ne.setAttribute&&ne.setAttribute("rotation",`${G.x.toFixed(2)} ${G.y.toFixed(2)} ${G.z.toFixed(2)}`)}}})):(t.current&&(t.current.textContent="FaceTracker: sem rosto"),window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}})),l||(p.strokeStyle="rgba(255,107,107,0.8)",p.lineWidth=2,p.strokeRect(10,10,100,60)))}}catch(T){console.error("FaceTracker detect error:",T),t.current&&(t.current.textContent="FaceTracker: erro de detecÃ§Ã£o")}$()},$=()=>{l?setTimeout(()=>{o.current=requestAnimationFrame(X)},80):o.current=requestAnimationFrame(X)};return o.current=requestAnimationFrame(X),()=>{window.removeEventListener("resize",M)}}let L;if(u)W().then(a=>{L=a}).catch(a=>{console.error("FaceTracker start error:",a),t.current&&(t.current.textContent="FaceTracker: erro ao iniciar")});else{if(o.current&&(cancelAnimationFrame(o.current),o.current=null),s.current){const a=s.current.getContext("2d");a&&a.clearRect(0,0,s.current.width,s.current.height)}t.current&&(t.current.textContent="FaceTracker: desligado")}return()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null),L&&L(),S()}},[u]),null},Ze=({onNavigate:u})=>{const s=r.useRef(null),o=r.useRef(null),[m,t]=r.useState(0),[d,x]=r.useState(60),[i,w]=r.useState(!1),[l,h]=r.useState(!1),[S,j]=r.useState(0),[C,I]=r.useState(null),[R,W]=r.useState(!0),[L,a]=r.useState(null),g=r.useRef([]),y=r.useRef({x:.5,y:.5}),z=r.useRef(!1),p=r.useRef(null),M=r.useRef(null);r.useEffect(()=>{async function c(){try{let n=document.getElementById("arjs-video");if(n&&n.srcObject){n.classList.add("ar-video-visible"),await new Promise(E=>{const v=()=>{document.getElementById("face-tracker-overlay")||n.readyState>=2?E():setTimeout(v,100)};v()}),W(!1);return}const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});n||(n=document.createElement("video"),n.setAttribute("id","arjs-video"),n.setAttribute("playsinline",""),n.setAttribute("autoplay",""),n.muted=!0,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.objectFit="cover",n.style.zIndex="0",n.classList.add("ar-video-visible"),document.body.appendChild(n)),n.srcObject&&n.srcObject.getTracks().forEach(v=>v.stop()),n.srcObject=f,M.current=f,p.current=n,await(async()=>{try{n.readyState>=2?await n.play():await new Promise((E,v)=>{const b=()=>{n.removeEventListener("loadedmetadata",b),n.removeEventListener("error",F),n.play().then(E).catch(v)},F=()=>{n.removeEventListener("loadedmetadata",b),n.removeEventListener("error",F),v(new Error("Video load error"))};n.addEventListener("loadedmetadata",b,{once:!0}),n.addEventListener("error",F,{once:!0}),n.readyState>=1&&n.play().then(E).catch(v)})}catch(E){if(n.paused===!1)return;console.warn("Erro ao dar play no vÃ­deo:",E)}})(),await new Promise(E=>{const v=()=>{document.getElementById("face-tracker-overlay")||n.readyState>=2?E():setTimeout(v,100)};v()}),W(!1)}catch(n){console.error("Erro ao inicializar cÃ¢mera:",n),W(!1)}}return c(),()=>{}},[]),r.useEffect(()=>{!R&&!i&&L===null&&a(3)},[R,i,L]),r.useEffect(()=>{if(L===null||L<=0){L===0&&setTimeout(()=>{a(null),w(!0)},500);return}const c=setTimeout(()=>{a(L-1)},1e3);return()=>clearTimeout(c)},[L]);const $=(()=>{var f,N;const c=((N=(f=import.meta)==null?void 0:f.env)==null?void 0:N.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=c&&c!=="/"?c.endsWith("/")?c:c+"/":"/";return n==="/"?"":n.endsWith("/")?n.slice(0,-1):n})(),T=c=>{if($==="")return c.startsWith("/")?c:`/${c}`;const n=c.startsWith("/")?c.slice(1):c;return`${$}/${n}`},U={nave:T("assets/images/sprites/nave.png"),estrela:T("assets/images/sprites/estrela.png"),cometa:T("assets/images/sprites/cometa.png"),barraProgresso:T("assets/images/sprites/barra-progresso.png"),contador:T("assets/images/sprites/contador.png"),feedbackAcerto:T("assets/images/sprites/feedback-acerto.png"),feedbackErro:T("assets/images/sprites/feedback-erro.png")},P=r.useRef({});r.useEffect(()=>{(async()=>{const n=Object.entries(U).map(([f,N])=>new Promise(E=>{const v=new Image;v.onload=()=>{P.current[f]=v,E()},v.onerror=()=>{console.warn(`Failed to load image: ${N}`),E()},v.src=N}));await Promise.all(n)})()},[]),r.useEffect(()=>{if(!i||l)return;const c=setInterval(()=>{x(n=>n<=1?(h(!0),0):n-1)},1e3);return()=>clearInterval(c)},[i,l]),r.useEffect(()=>{const c=n=>{const{x:f,y:N,detected:E}=n.detail;z.current=E,E&&(y.current={x:f,y:N})};return window.addEventListener("nave-position",c),()=>{window.removeEventListener("nave-position",c)}},[]);const k=r.useCallback(()=>{const c=Math.random()>.5?"star":"comet",n={id:Math.random().toString(36).substr(2,9),type:c,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};g.current.push(n)},[]);r.useEffect(()=>{if(!i||l)return;const c=setInterval(()=>{k()},1e3);return()=>clearInterval(c)},[i,l,k]);const A=r.useCallback(()=>{const c=y.current,n=.08;g.current=g.current.filter(f=>{const N=f.x-c.x,E=f.y-c.y;return Math.sqrt(N*N+E*E)<n+.03?(f.type==="star"?(t(b=>b+10),j(b=>Math.min(100,b+5)),I("acerto"),setTimeout(()=>I(null),500)):(t(b=>Math.max(0,b-5)),j(b=>Math.max(0,b-5)),I("erro"),setTimeout(()=>I(null),500)),!1):!(f.y>1.1)})},[]);r.useEffect(()=>{if(!i||l)return;const c=s.current;if(!c)return;const n=c.getContext("2d");if(!n)return;const f=()=>{c.width=window.innerWidth,c.height=window.innerHeight};f(),window.addEventListener("resize",f);const N=()=>{n.clearRect(0,0,c.width,c.height),g.current.forEach(v=>{v.y+=v.speed});const E=P.current.nave;if(E){const v=y.current.x*c.width,b=y.current.y*c.height,F=c.width*.25;n.drawImage(E,v-F/2,b-F/2,F,F)}g.current.forEach(v=>{const b=P.current[v.type==="star"?"estrela":"cometa"];if(b){const F=v.x*c.width,V=v.y*c.height,D=c.width*.12;n.drawImage(b,F-D/2,V-D/2,D,D)}}),A(),o.current=requestAnimationFrame(N)};return N(),()=>{window.removeEventListener("resize",f),o.current&&cancelAnimationFrame(o.current)}},[i,l,A]),r.useEffect(()=>{l&&d===0&&setTimeout(()=>{u("final")},2e3)},[l,d,u]);const _=c=>{const n=Math.floor(c/60),f=c%60;return`${n}:${f.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[R&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),L!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:L>0?e.jsx("div",{className:"ar-countdown-number",children:L}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),e.jsx("canvas",{ref:s,className:"ar-game-canvas"}),e.jsx(Ke,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:U.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:_(d)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsx("img",{src:U.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${S}%`}})]}),C&&e.jsx("div",{className:`ar-feedback ar-feedback-${C}`,children:e.jsx("img",{src:C==="acerto"?U.feedbackAcerto:U.feedbackErro,alt:C,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",m]})]})},ye={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},et=({onNavigate:u,onSettingsChange:s})=>{const[o,m]=r.useState(ye),t=(i,w)=>{const l={...o,[i]:w};m(l),s==null||s(l)},d=()=>{u("ar")},x=()=>{m(ye),s==null||s(ye)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:d,children:"â† Voltar"}),e.jsx("h1",{className:"settings-title",children:"ConfiguraÃ§Ãµes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:o.quality,onChange:i=>t("quality",i.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"MÃ©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.enableSound,onChange:i=>t("enableSound",i.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"VibraÃ§Ã£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.enableVibration,onChange:i=>t("enableVibration",i.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibraÃ§Ã£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.autoSave,onChange:i=>t("autoSave",i.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:o.language,onChange:i=>t("language",i.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"PortuguÃªs"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"EspaÃ±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:x,children:"Restaurar PadrÃµes"}),e.jsx("button",{className:"settings-button primary",onClick:d,children:"Salvar"})]})]})},tt=({onNavigate:u,appName:s="Realidade Aumentada",version:o="1.0.0",description:m="Uma aplicaÃ§Ã£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:t="Desenvolvedor AR"})=>{const d=()=>{u("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:d,children:"â† Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:s}),e.jsxs("p",{className:"app-version",children:["VersÃ£o ",o]}),e.jsx("p",{className:"app-description",children:m})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"RenderizaÃ§Ã£o 3D em tempo real"}),e.jsx("li",{children:"AdiÃ§Ã£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"LicenÃ§a"}),e.jsx("p",{children:"MIT License - CÃ³digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:d,children:"Voltar ao InÃ­cio"})})]})},st=({onNavigate:u})=>{const s=()=>{u("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"ðŸŽ‰"}),e.jsx("h1",{className:"final-title",children:"ParabÃ©ns!"}),e.jsx("p",{className:"final-subtitle",children:"VocÃª completou a experiÃªncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que vocÃª tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"âœ“"}),e.jsx("div",{className:"stat-label",children:"ExperiÃªncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:s,children:"Jogar Novamente"})})]})})},Le=r.createContext(void 0),nt=()=>{const u=r.useContext(Le);if(u===void 0)throw new Error("useRA deve ser usado dentro de um RAProvider");return u},at=({children:u})=>{const[s,o]=r.useState(null),[m,t]=r.useState(!0),[d,x]=r.useState(null),i=async()=>{var h,S;try{t(!0),x(null),console.log("ðŸ”„ Carregando dados do RA...");const j=((S=(h=import.meta)==null?void 0:h.env)==null?void 0:S.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),I=`${j&&j!=="/"?j.endsWith("/")?j:j+"/":"/"}assets/data/ra.json`,R=await fetch(I);if(!R.ok)throw new Error(`Erro ao carregar dados: ${R.status}`);const W=await R.json();console.log("âœ… Dados do RA carregados:",W),o(W)}catch(j){const C=j instanceof Error?j.message:"Erro desconhecido";console.error("âŒ Erro ao carregar dados do RA:",C),x(C)}finally{t(!1)}},w=()=>{i()};r.useEffect(()=>{i()},[]);const l={raData:s,loading:m,error:d,refreshData:w};return e.jsx(Le.Provider,{value:l,children:u})},rt=()=>{const{raData:u,loading:s,error:o,refreshData:m}=nt();return s?e.jsx("div",{style:{padding:"10px",background:"rgba(0,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:"ðŸ”„ Carregando dados do RA..."}):o?e.jsxs("div",{style:{padding:"10px",background:"rgba(255,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:["âŒ Erro: ",o,e.jsx("button",{onClick:m,style:{marginLeft:"10px",padding:"2px 8px",background:"white",color:"red",border:"none",borderRadius:"3px",cursor:"pointer"},children:"ðŸ”„ Tentar novamente"})]}):u?e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px",fontFamily:"monospace"},children:[e.jsx("div",{children:"ðŸ“Š Dados do RA:"}),e.jsxs("div",{children:["ðŸ·ï¸ Marca: ",u.metadados.marca]}),e.jsxs("div",{children:["ðŸ”¢ CÃ³digo: ",u.metadados.codigo]}),e.jsx("button",{onClick:m,style:{marginTop:"5px",padding:"2px 8px",background:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"10px"},children:"ï¿½ï¿½ Atualizar"})]}):e.jsx("div",{style:{padding:"10px",background:"rgba(255,165,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:"âš ï¸ Nenhum dado carregado"})};const ot=({initialScreen:u="loading",appConfig:s,defaultTransition:o="zoom-out",defaultDirection:m="right"})=>{const[t,d]=r.useState(u||"loading"),[x,i]=r.useState(!1),[w,l]=r.useState(o),[h,S]=r.useState(m),[j,C]=r.useState(null);r.useEffect(()=>{console.log("ðŸŽ¬ ScreenManager inicializado com tela:",t)},[]),r.useEffect(()=>{if(!x){const a=setTimeout(()=>{t!=="loading"&&C(null)},1e3);return()=>clearTimeout(a)}},[t,x]);const I=(a,g)=>{const y=["loading","cover","tutorial","ar","final","settings","about"],z=y.indexOf(a),p=y.indexOf(g);return p>z?"right":p<z?"left":"right"},R=(a,g,y)=>{const z=g||w,p=y||I(t,a);C(t),l(z),S(p);const M=t==="loading"?800:300;i(!0),setTimeout(()=>{d(a),i(!1)},M)},W=()=>{switch(t){case"loading":return e.jsx(Ce,{onNavigate:R});case"cover":return e.jsx(Je,{onNavigate:R,title:s.title,subtitle:s.subtitle});case"tutorial":return e.jsx(Qe,{onNavigate:R});case"ar":return e.jsx(Ze,{onNavigate:R});case"final":return e.jsx(st,{onNavigate:R});case"settings":return e.jsx(et,{onNavigate:R});case"about":return e.jsx(tt,{onNavigate:R});default:return e.jsx(Ce,{onNavigate:R})}},L=()=>{const a="screen-manager",g=`transition-${w}`,y=`direction-${h}`,z=x?"transitioning":"",p=j?`from-${j}`:"";return`${a} ${g} ${y} ${z} ${p}`.trim()};return e.jsxs("div",{className:L(),children:[t!=="loading"&&e.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3},children:e.jsx(rt,{})}),W()]})},it=()=>{const[u,s]=r.useState(!1),o=()=>{const m=window.innerWidth,t=window.innerHeight,d=m>t,x=navigator.userAgent.toLowerCase(),i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(x)||"ontouchstart"in window||navigator.maxTouchPoints>0,w=m<=768;i&&d||w&&d?(s(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(s(!1),document.body.style.overflow="",document.body.style.touchAction="")};return r.useEffect(()=>{o();let m,t;const d=()=>{clearTimeout(m),m=setTimeout(()=>{o()},100)},x=()=>{clearTimeout(t),t=setTimeout(()=>{o()},300)},i=()=>{clearTimeout(t),t=setTimeout(()=>{o()},300)},w=S=>{clearTimeout(t),t=setTimeout(()=>{o()},100)};window.addEventListener("resize",d),window.addEventListener("orientationchange",x),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",i);const l=window.matchMedia("(orientation: landscape)");l.addEventListener("change",w);const h=setInterval(()=>{o()},2e3);return()=>{clearTimeout(m),clearTimeout(t),clearInterval(h),window.removeEventListener("resize",d),window.removeEventListener("orientationchange",x),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",i),l.removeEventListener("change",w),document.body.style.overflow="",document.body.style.touchAction=""}},[]),u?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"ðŸ“±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experiÃªncia de Realidade Aumentada, mantenha seu dispositivo na orientaÃ§Ã£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function ct(){const u={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(at,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(it,{}),e.jsx(ot,{initialScreen:"loading",appConfig:u})]})})}be.createRoot(document.getElementById("root")).render(e.jsx(Oe.StrictMode,{children:e.jsx(ct,{})}));
//# sourceMappingURL=index-4f4de43c.js.map
