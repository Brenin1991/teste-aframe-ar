import{r as u,a as Ge,R as Ke}from"./vendor-b1791c80.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Ue={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je=u,Ze=Symbol.for("react.element"),et=Symbol.for("react.fragment"),tt=Object.prototype.hasOwnProperty,nt=Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rt={key:!0,ref:!0,__self:!0,__source:!0};function Be(a,t,n){var r,o={},i=null,d=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)tt.call(t,r)&&!rt.hasOwnProperty(r)&&(o[r]=t[r]);if(a&&a.defaultProps)for(r in t=a.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Ze,type:a,key:i,ref:d,props:o,_owner:nt.current}}ge.Fragment=et;ge.jsx=Be;ge.jsxs=Be;Ue.exports=ge;var e=Ue.exports,Ne={},_e=Ge;Ne.createRoot=_e.createRoot,Ne.hydrateRoot=_e.hydrateRoot;const Pe=({onNavigate:a,title:t,subtitle:n,backgroundImage:r})=>e.jsx("div",{className:"cover-screen",style:{backgroundImage:r?`url(${r})`:void 0},children:e.jsxs("div",{className:"cover-content",children:[e.jsxs("div",{className:"cover-header",children:[e.jsx("h1",{className:"cover-title",children:t}),e.jsx("p",{className:"cover-subtitle",children:n})]}),e.jsxs("div",{className:"cover-actions",children:[e.jsx("button",{className:"cover-button primary",onClick:()=>a("tutorial"),children:"Começar Tutorial"}),e.jsx("button",{className:"cover-button secondary",onClick:()=>a("ar"),children:"Pular Tutorial"}),e.jsx("button",{className:"cover-button tertiary",onClick:()=>a("settings"),children:"Configurações"})]}),e.jsxs("div",{className:"cover-footer",children:[e.jsx("p",{className:"cover-version",children:"v1.0.0"}),e.jsx("button",{className:"cover-link",onClick:()=>a("about"),children:"Sobre"})]})]})}),$e=u.createContext(void 0),qe=()=>{const a=u.useContext($e);if(a===void 0)throw new Error("useRA deve ser usado dentro de um RAProvider");return a},ot=({children:a})=>{const[t,n]=u.useState(null),[r,o]=u.useState(!0),[i,d]=u.useState(null),c=async()=>{var x,v;try{o(!0),d(null),console.log("🔄 Carregando dados do RA...");const b=((v=(x=import.meta)==null?void 0:x.env)==null?void 0:v.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),p=`${b&&b!=="/"?b.endsWith("/")?b:b+"/":"/"}assets/data/ra.json`,j=await fetch(p);if(!j.ok)throw new Error(`Erro ao carregar dados: ${j.status}`);const y=await j.json();console.log("✅ Dados do RA carregados:",y),n(y)}catch(b){const R=b instanceof Error?b.message:"Erro desconhecido";console.error("❌ Erro ao carregar dados do RA:",R),d(R)}finally{o(!1)}},h=()=>{c()};u.useEffect(()=>{c()},[]);const l={raData:t,loading:r,error:i,refreshData:h};return e.jsx($e.Provider,{value:l,children:a})},at=({onPlay:a})=>{const t=()=>{a&&a()},n={background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover"};return e.jsx("div",{className:"instructions-container",style:n,children:e.jsx("div",{className:"instructions-modal",children:e.jsxs("div",{className:"instructions-content",children:[e.jsx("h2",{style:{marginBottom:"2rem",color:"white",textAlign:"center"},children:"Como usar a Realidade Aumentada"}),e.jsxs("div",{style:{color:"white",textAlign:"center",marginBottom:"2rem"},children:[e.jsx("p",{style:{marginBottom:"1rem"},children:"1. Permita o acesso à câmera quando solicitado"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"2. Aponte a câmera para uma superfície plana"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"3. Toque na tela para adicionar objetos 3D"}),e.jsx("p",{children:"4. Use gestos para interagir com os objetos"})]}),e.jsx("button",{className:"instructions-play-button",onClick:t,style:{padding:"1rem 2rem",background:"linear-gradient(45deg, #ff6b6b, #ee5a24)",border:"none",borderRadius:"8px",color:"white",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px",display:"block",margin:"0 auto"},children:"Iniciar RA"})]})})})},st=[{id:1,title:"Bem-vindo à RA",description:"Aprenda a usar a Realidade Aumentada de forma simples e intuitiva.",action:"Toque para continuar"},{id:2,title:"Adicionar Objetos",description:"Use o seletor de objetos para adicionar cubos, esferas e cilindros à cena.",action:"Toque para continuar"},{id:3,title:"Mover Objetos",description:"Toque e arraste os objetos para movê-los na cena 3D.",action:"Toque para continuar"},{id:4,title:"Capturar Imagens",description:'Use o botão "Capturar" para salvar screenshots da sua cena.',action:"Começar RA"}],it=({onNavigate:a,steps:t=st,title:n,subtitle:r,backgroundImage:o})=>{const{raData:i,loading:d}=qe(),c=u.useRef(null),[h,l]=u.useState(0);return t[h],u.useEffect(()=>{i!==c.current&&(c.current=i)},[i]),e.jsx("div",{className:"screen",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx(at,{onPlay:()=>a("ar")})})};var H={},P;Object.defineProperty(H,"__esModule",{value:!0});var We=H.Scene=P=H.Entity=H.options=void 0,ct=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},lt=function(){function a(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,n,r){return n&&a(t.prototype,n),r&&a(t,r),t}}(),dt=u,Ie=ut(dt);function ut(a){return a&&a.__esModule?a:{default:a}}function Ve(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:a}function He(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)}var mt=["children","events","primitive"],Me=function(t){return mt.indexOf(t)===-1},Ye={runSetAttributeOnUpdates:!0};H.options=Ye;function ft(a,t,n){if(n==="className")a.setAttribute("class",t.className);else{if(t[n]&&t[n].constructor===Function)return;a.setAttribute(n,t[n])}}function ze(a,t,n){var r;if(!(!n||t===n)){for(r in n)Me(r)&&ft(a,n,r);if(t)for(r in t)Me(r)&&n[r]===void 0&&a.removeAttribute(r)}}var ht=P=H.Entity=function(a){He(t,a);function t(){var n,r,o,i;Ve(this,t);for(var d=arguments.length,c=Array(d),h=0;h<d;h++)c[h]=arguments[h];return i=(r=(o=Ae(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(c))),o),o.initEntity=function(l){var x=o.props,v;if(l){if(o.el=l,x.events)for(v in x.events)Xe(l,v,x.events[v]);ze(l,null,x),x._ref&&x._ref(l)}},r),Ae(o,i)}return lt(t,[{key:"componentDidUpdate",value:function(r,o){var i=this.el,d=this.props;pt(i,r.events,d.events),Ye.runSetAttributeOnUpdates&&ze(i,r,d)}},{key:"componentWillUnmount",value:function(){var r=this.el,o=this.props,i;if(o.events)for(i in o.events)Te(r,i,o.events[i])}},{key:"render",value:function(){var r=this.props,o=this.isScene?"a-scene":r.primitive||"a-entity",i,d={};for(i in r)(["className","id","mixin"].indexOf(i)!==-1||i.indexOf("data-")===0)&&(d[i]=r[i]);return Ie.default.createElement(o,ct({ref:this.initEntity},d),r.children)}}]),t}(Ie.default.Component);We=H.Scene=function(a){He(t,a);function t(n){Ve(this,t);var r=Ae(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.isScene=!0,r}return t}(ht);function pt(a,t,n){var r;if(!(!t||!n||t===n)){for(r in n)t[r]!==n[r]&&(t[r]&&Te(a,r,t[r]),Xe(a,r,n[r]));for(r in t)n[r]||Te(a,r,t[r])}}function Xe(a,t,n){var r;if(n)for(n.constructor===Function&&(n=[n]),r=0;r<n.length;r++)a.addEventListener(t,n[r])}function Te(a,t,n){var r;if(n)for(n.constructor===Function&&(n=[n]),r=0;r<n.length;r++)a.removeEventListener(t,n[r])}const Qe=u.forwardRef(({className:a="",onSceneReady:t,cameraFacing:n="environment"},r)=>{const o=u.useRef(null),[i,d]=u.useState([]),[c,h]=u.useState(!1),l=u.useRef(null),x=u.useRef(null),[v,b]=u.useState(n);u.useEffect(()=>{b(n)},[n]),u.useEffect(()=>{typeof window<"u"&&window.AFRAME&&(h(!0),t&&t(),requestAnimationFrame(()=>{const p=document.querySelector(".a-enter-vr-button");p&&(p.style.display="none",p.style.visibility="hidden",p.style.pointerEvents="none")}))},[t]),u.useEffect(()=>{async function p(){x.current&&(x.current.getTracks().forEach(y=>y.stop()),x.current=null),l.current&&l.current.parentNode&&(l.current.parentNode.removeChild(l.current),l.current=null)}async function j(y){try{const k=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:y}},audio:!1}),s=document.createElement("video");s.setAttribute("id","arjs-video"),s.setAttribute("playsinline",""),s.setAttribute("autoplay",""),s.muted=!0,s.srcObject=k,document.body.appendChild(s),x.current=k,l.current=s,await s.play()}catch(k){console.error("Erro ao inicializar câmera:",k)}}return p().then(()=>j(v)),()=>{p()}},[v]),u.useImperativeHandle(r,()=>({addEntity:p=>{const j=`entity-${Date.now()}`;return d(y=>[...y,{id:j,data:p}]),j},removeEntity:p=>{d(j=>j.filter(y=>y.id!==p))},getScene:()=>typeof window<"u"&&window.AFRAME&&document.querySelector("a-scene")||o.current,captureScreenshot:()=>{if(typeof window<"u"&&window.AFRAME){const p=document.querySelector("a-scene");if(p){const j=p.renderer;if(j&&j.domElement)return j.domElement.toDataURL("image/png")}}return""},setCameraFacing:p=>{b(p)}}),[]);const R={embedded:!0,"vr-mode-ui":"enabled: false","device-orientation-permission-ui":"enabled: true",renderer:"alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;",webxr:"enabled: false",background:"transparent: true"};return e.jsxs("div",{className:`ar-scene-aframe ${a}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:[c&&e.jsxs(We,{...R,children:[e.jsx(P,{primitive:"a-assets",children:e.jsx("img",{id:"skyTexture",src:"/assets/images/SKY.png",crossOrigin:"anonymous"})}),e.jsx(P,{primitive:"a-sky",rotation:"0 -90 0",material:{src:"#skyTexture",opacity:.5,transparent:!0}}),e.jsx(P,{id:"camera",camera:{active:!0},lookControls:{enabled:!0,reverseMouseDrag:!1,touchEnabled:!0,magicWindowTrackingEnabled:!0},wasdControls:{enabled:!0,acceleration:20,fly:!1,controls:"gamepad keyboard"},position:"0 1.6 0"}),e.jsx(P,{light:{type:"ambient",color:"#888"}}),e.jsx(P,{light:{type:"directional",color:"#fff",intensity:.6},position:"1 1 1"}),i.map(p=>e.jsx(P,{...p.data},p.id)),e.jsx(P,{id:"head-cube",geometry:{primitive:"box",width:.3,height:.3,depth:.3},material:{color:"#FF6B6B",opacity:.9,transparent:!0},position:"0 1 -1.2",rotation:"0 0 0"}),!1]}),!c&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Carregando A-Frame..."})]})});Qe.displayName="ARSceneAFrame";const xt=({className:a="",sceneRef:t,onToggleFacing:n,onToggleFaceTracking:r,faceTrackingEnabled:o})=>{const i=()=>{if(t!=null&&t.current){const d=t.current.captureScreenshot();if(d){const c=document.createElement("a");c.href=d,c.download=`ar-screenshot-${Date.now()}.png`,c.click()}}else{const d=document.querySelector("a-scene");if(d){const c=d.renderer;if(c&&c.domElement){const h=c.domElement.toDataURL("image/png"),l=document.createElement("a");l.href=h,l.download=`ar-screenshot-${Date.now()}.png`,l.click()}}}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`ar-controls ${a}`,children:[e.jsx("button",{className:"ar-button",onClick:i,children:"📷 Capturar"}),n&&e.jsx("button",{className:"ar-button",onClick:n,children:"🔄 Trocar câmera"}),r&&e.jsx("button",{className:"ar-button",onClick:r,children:o?"🧠 FaceTracking: ON":"🧠 FaceTracking: OFF"})]})})},gt=({enabled:a})=>{const t=u.useRef(null),n=u.useRef(null),r=u.useRef(!1),o=u.useRef(null),i=u.useRef({x:0,y:0,z:0}),d=u.useRef({x:0,y:1,z:-1.2}),c=u.useRef(null),h=u.useRef(!1),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return u.useEffect(()=>{function x(){if(!t.current){const s=document.createElement("canvas");s.id="face-tracker-overlay",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100vw",s.style.height="100vh",s.style.pointerEvents="none",s.style.zIndex="9999",document.body.appendChild(s),t.current=s}if(!o.current){const s=document.createElement("div");s.id="face-tracker-status",s.style.position="fixed",s.style.left="8px",s.style.bottom="8px",s.style.padding="4px 8px",s.style.background="rgba(0,0,0,0.55)",s.style.color="#fff",s.style.font="12px Arial",s.style.borderRadius="6px",s.style.zIndex="10000",s.style.pointerEvents="none",s.textContent="FaceTracker: iniciando",document.body.appendChild(s),o.current=s}}function v(){t.current&&t.current.parentNode&&(t.current.parentNode.removeChild(t.current),t.current=null),o.current&&o.current.parentNode&&(o.current.parentNode.removeChild(o.current),o.current=null)}async function b(){window.faceapi||(o.current&&(o.current.textContent="FaceTracker: carregando lib"),await new Promise((s,f)=>{const g=document.createElement("script");g.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",g.onload=()=>s(),g.onerror=()=>f(new Error("Falha ao carregar face-api.js")),document.head.appendChild(g)}),console.log("face-api.js carregado"))}async function R(){if(r.current)return;o.current&&(o.current.textContent="FaceTracker: carregando modelos");const s=window.faceapi,f="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";l?await Promise.all([s.nets.tinyFaceDetector.loadFromUri(f),s.nets.faceLandmark68Net.loadFromUri(f)]):await Promise.all([s.nets.tinyFaceDetector.loadFromUri(f),s.nets.faceLandmark68Net.loadFromUri(f),s.nets.faceExpressionNet.loadFromUri(f)]),r.current=!0,o.current&&(o.current.textContent="FaceTracker: pronto"),console.log("Modelos de face-api carregados")}function p(){var X,L;if(h.current)return;const s=((L=(X=import.meta)==null?void 0:X.env)==null?void 0:L.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),f=w=>{if(!s||s==="/")return w.startsWith("/")?w:`/${w}`;const S=s.endsWith("/")?s:s+"/";return w.startsWith("/")?S+w.replace(/^\//,""):S+w},ve=["assets/images/mascara.png","images/mascara.png","mascara.png"].map(f),m=!s||s==="/"?["/mascara.png","/assets/images/mascara.png","/images/mascara.png"]:[],B=[...ve,...m];let Y=0;const F=new Image,T=()=>{if(Y>=B.length){console.warn("Não foi possível carregar mascara.png de nenhum caminho:",B);return}const w=B[Y++]+`?v=${Date.now()}`;F.src=w,console.log("BASE_URL resolvido:",s,"| Tentando máscara em:",w)};F.onload=()=>{h.current=!0,c.current=F,console.log("Máscara carregada em:",F.src)},F.onerror=()=>{T()},c.current=F,T()}function j(s){const f=l?1:Math.max(1,window.devicePixelRatio||1);s.width=Math.floor(window.innerWidth*f),s.height=Math.floor(window.innerHeight*f);const g=s.getContext("2d");g&&g.setTransform(f,0,0,f,0,0)}async function y(){x(),await b(),await R(),p();const s=()=>new Promise((T,X)=>{let L=!1;const w=setTimeout(()=>{L||X(new Error("Timeout aguardando vídeo da câmera"))},15e3),S=E=>{if(!E)return!1;const I=!!E.srcObject;return(E.readyState>=2||!E.paused&&E.currentTime>0)&&I?(L=!0,clearTimeout(w),E.removeEventListener("playing",$),ne.disconnect(),T(E),!0):!1},$=E=>{const I=E.target;S(I)},ne=new MutationObserver(()=>{const E=document.getElementById("arjs-video");S(E)||E&&E.addEventListener("playing",$,{once:!0})});ne.observe(document.body,{childList:!0,subtree:!0});const q=document.getElementById("arjs-video");S(q)||q&&q.addEventListener("playing",$,{once:!0})});let f;try{f=await s()}catch(T){o.current&&(o.current.textContent="FaceTracker: sem vídeo"),console.warn("FaceTracker: vídeo não disponível a tempo",T);return}const g=t.current;if(!f||!g){o.current&&(o.current.textContent="FaceTracker: sem vídeo");return}const ve=window.faceapi,m=g.getContext("2d");function B(){g&&j(g)}B(),window.addEventListener("resize",B);const Y=async()=>{try{if(!a)return;if(!f.videoWidth){o.current&&(o.current.textContent="FaceTracker: aguardando vídeo"),F();return}if(l&&f.paused){const S=()=>{f.muted=!0,f.play().catch(()=>{}),window.removeEventListener("touchstart",S),window.removeEventListener("click",S)};window.addEventListener("touchstart",S,{passive:!0}),window.addEventListener("click",S)}const T=(getComputedStyle(f).transform||"").includes("matrix(-1")||(f.style.transform||"").includes("scaleX(-1)"),X=new ve.TinyFaceDetectorOptions({inputSize:l?160:224,scoreThreshold:l?.35:.5});let L=window.faceapi.detectAllFaces(f,X).withFaceLandmarks();!l&&window.faceapi.nets.faceExpressionNet.isLoaded&&(L=L.withFaceExpressions());const w=await L;if(m){m.clearRect(0,0,g.width,g.height),l||(m.fillStyle="rgba(78,205,196,0.8)",m.beginPath(),m.arc(16,16,6,0,Math.PI*2),m.fill(),m.font="12px Arial",m.fillText(`faces: ${(w==null?void 0:w.length)||0}`,30,20));const S=l?1:Math.max(1,window.devicePixelRatio||1),$=g.width/S,ne=g.height/S,q=$/f.videoWidth,E=ne/f.videoHeight,I=(C,M=0)=>{const W=C*q;return T?$-(W+M):W},ce=C=>C*E,ye=(C,M,W,Q)=>{if(l)return;const G=I(C),le=ce(M);m.fillStyle=Q,m.beginPath(),m.arc(G,le,4,0,Math.PI*2),m.fill(),m.fillStyle=Q,m.fillText(W,G+6,le-6)};w&&w.length?(o.current&&(o.current.textContent="FaceTracker: detectando"),w.forEach(C=>{var Fe;const M=C.detection.box,W=M.width*q,Q=I(M.x,W),G=ce(M.y),le=W,Ce=M.height*E;if(l||(m.strokeStyle="#4ECDC4",m.lineWidth=3,m.strokeRect(Q,G,le,Ce)),!l&&C.expressions){const K=C.expressions||{},ue=Object.entries(K);if(ue.length){const[be,me]=ue.reduce((D,O)=>D[1]>O[1]?D:O),re=`${be} ${(me*100).toFixed(0)}%`;m.font="12px Arial";const z=m.measureText(re).width+12;m.fillStyle="rgba(0,0,0,0.6)",m.fillRect(Q,Math.max(0,G-22),z,20),m.fillStyle="#FFFFFF",m.fillText(re,Q+6,Math.max(12,G-8))}}const de=((Fe=C.landmarks)==null?void 0:Fe.positions)||[];if(de.length===68){const K=de[30],ue=[36,37,38,39,40,41],be=[42,43,44,45,46,47],me=N=>N.reduce((A,_)=>A+_,0)/N.length,re=N=>({x:me(N.map(A=>de[A].x)),y:me(N.map(A=>de[A].y))}),z=re(ue),D=re(be);l||(ye(K.x,K.y,"nose","#00E5A8"),ye(z.x,z.y,"eye-L","#EF476F"),ye(D.x,D.y,"eye-R","#EF476F"));const O={x:(z.x+D.x)/2,y:(z.y+D.y)/2},Le={x:I(O.x),y:ce(O.y)},De=D.x-z.x,Oe=D.y-z.y;let J=Math.atan2(Oe,De)*180/Math.PI;const je=Math.hypot(De,Oe)||1;let Z=(K.x-O.x)/je*60,ee=-(K.y-O.y)/je*50;T&&(Z=-Z,J=-J);const we=(N,A,_)=>Math.max(A,Math.min(_,N));if(Z=we(Z,-60,60),ee=we(ee,-50,50),J=we(J,-45,45),h.current&&c.current){const N=J*Math.PI/180,_=je*q*(l?4.2:8),ke=c.current.naturalHeight>0?c.current.naturalHeight/c.current.naturalWidth:1,fe=_*ke,ae=I(O.x),he=ce(O.y)+Ce*.1,pe=Z/60*.22,se=ee/50*-.18,ie=1-Math.min(Math.abs(ee)/120,.15),U=1+ee/50*.14;m.save(),m.translate(ae,he),m.rotate(N),m.scale(ie,1),m.transform(1,se,pe,U,0,0),m.globalAlpha=.95,m.drawImage(c.current,-_/2,-fe*.55,_,fe),m.restore()}const Ee=.25,te=i.current,V={x:te.x+(ee-te.x)*Ee,y:te.y+(Z-te.y)*Ee,z:te.z+(J-te.z)*Ee};i.current=V;const Re=document.getElementById("camera"),oe=document.getElementById("head-cube");if(Re&&oe){const N=Re.getObject3D&&Re.getObject3D("camera");if(N&&window.THREE){const A=window.THREE,_=Le.x/$*2-1,ke=-(Le.y/ne*2-1),fe=1.2,ae=new A.Vector3,he=new A.Vector3,pe=new A.Vector3(_,ke,.5);pe.unproject(N),ae.copy(N.position),he.copy(pe).sub(ae).normalize();const se=ae.clone().add(he.multiplyScalar(fe)),ie=.35,U=d.current,xe={x:U.x+(se.x-U.x)*ie,y:U.y+(se.y-U.y)*ie,z:U.z+(se.z-U.z)*ie};d.current=xe,oe.setAttribute("position",`${xe.x.toFixed(3)} ${xe.y.toFixed(3)} ${xe.z.toFixed(3)}`),oe.setAttribute("rotation",`${V.x.toFixed(2)} ${V.y.toFixed(2)} ${V.z.toFixed(2)}`)}else oe.setAttribute&&oe.setAttribute("rotation",`${V.x.toFixed(2)} ${V.y.toFixed(2)} ${V.z.toFixed(2)}`)}}})):(o.current&&(o.current.textContent="FaceTracker: sem rosto"),l||(m.strokeStyle="rgba(255,107,107,0.8)",m.lineWidth=2,m.strokeRect(10,10,100,60)))}}catch(T){console.error("FaceTracker detect error:",T),o.current&&(o.current.textContent="FaceTracker: erro de detecção")}F()},F=()=>{l?setTimeout(()=>{n.current=requestAnimationFrame(Y)},80):n.current=requestAnimationFrame(Y)};return n.current=requestAnimationFrame(Y),()=>{window.removeEventListener("resize",B)}}let k;if(a)y().then(s=>{k=s}).catch(s=>{console.error("FaceTracker start error:",s),o.current&&(o.current.textContent="FaceTracker: erro ao iniciar")});else{if(n.current&&(cancelAnimationFrame(n.current),n.current=null),t.current){const s=t.current.getContext("2d");s&&s.clearRect(0,0,t.current.width,t.current.height)}o.current&&(o.current.textContent="FaceTracker: desligado")}return()=>{n.current&&(cancelAnimationFrame(n.current),n.current=null),k&&k(),v()}},[a]),null},vt=({onNavigate:a,showBackButton:t=!0})=>{const n=u.useRef(null),[r,o]=u.useState("environment"),[i,d]=u.useState(!0),c=()=>{a("tutorial")},h=()=>{a("settings")},l=()=>{var b;const v=r==="environment"?"user":"environment";o(v),(b=n.current)==null||b.setCameraFacing(v)},x=()=>{d(v=>!v)};return e.jsxs("div",{className:"ar-screen",children:[t&&e.jsxs("div",{className:"ar-screen-header",children:[e.jsx("button",{className:"ar-back-button",onClick:c,children:"← Voltar"}),e.jsx("button",{className:"ar-settings-button",onClick:h,children:"⚙️"})]}),e.jsxs("div",{className:"ar-screen-content",children:[e.jsx(Qe,{ref:n,className:"aframe-scene",cameraFacing:r}),e.jsx(xt,{sceneRef:n,onToggleFacing:l,onToggleFaceTracking:x,faceTrackingEnabled:i}),e.jsx(gt,{enabled:i})]})]})},Se={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},yt=({onNavigate:a,onSettingsChange:t})=>{const[n,r]=u.useState(Se),o=(c,h)=>{const l={...n,[c]:h};r(l),t==null||t(l)},i=()=>{a("ar")},d=()=>{r(Se),t==null||t(Se)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:i,children:"← Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configurações"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:n.quality,onChange:c=>o("quality",c.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"Média"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.enableSound,onChange:c=>o("enableSound",c.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibração"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.enableVibration,onChange:c=>o("enableVibration",c.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibração"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:n.autoSave,onChange:c=>o("autoSave",c.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:n.language,onChange:c=>o("language",c.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Português"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Español"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:d,children:"Restaurar Padrões"}),e.jsx("button",{className:"settings-button primary",onClick:i,children:"Salvar"})]})]})},bt=({onNavigate:a,appName:t="Realidade Aumentada",version:n="1.0.0",description:r="Uma aplicação inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:o="Desenvolvedor AR"})=>{const i=()=>{a("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:i,children:"← Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:t}),e.jsxs("p",{className:"app-version",children:["Versão ",n]}),e.jsx("p",{className:"app-description",children:r})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:o})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderização 3D em tempo real"}),e.jsx("li",{children:"Adição de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licença"}),e.jsx("p",{children:"MIT License - Código aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:i,children:"Voltar ao Início"})})]})},jt=()=>{const{raData:a,loading:t,error:n,refreshData:r}=qe();return t?e.jsx("div",{style:{padding:"10px",background:"rgba(0,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:"🔄 Carregando dados do RA..."}):n?e.jsxs("div",{style:{padding:"10px",background:"rgba(255,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:["❌ Erro: ",n,e.jsx("button",{onClick:r,style:{marginLeft:"10px",padding:"2px 8px",background:"white",color:"red",border:"none",borderRadius:"3px",cursor:"pointer"},children:"🔄 Tentar novamente"})]}):a?e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px",fontFamily:"monospace"},children:[e.jsx("div",{children:"📊 Dados do RA:"}),e.jsxs("div",{children:["🏷️ Marca: ",a.metadados.marca]}),e.jsxs("div",{children:["🔢 Código: ",a.metadados.codigo]}),e.jsx("button",{onClick:r,style:{marginTop:"5px",padding:"2px 8px",background:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"10px"},children:"�� Atualizar"})]}):e.jsx("div",{style:{padding:"10px",background:"rgba(255,165,0,0.8)",color:"white",borderRadius:"5px",fontSize:"12px"},children:"⚠️ Nenhum dado carregado"})},wt=({initialScreen:a,appConfig:t,defaultTransition:n="zoom-out",defaultDirection:r="right"})=>{const[o,i]=u.useState(a),[d,c]=u.useState(!1),[h,l]=u.useState(n),[x,v]=u.useState(r),b=(y,k)=>{const s=["cover","tutorial","ar","settings","about"],f=s.indexOf(y),g=s.indexOf(k);return g>f?"right":g<f?"left":"right"},R=(y,k,s)=>{const f=k||h,g=s||b(o,y);l(f),v(g),c(!0),setTimeout(()=>{i(y),c(!1)},300)},p=()=>{switch(o){case"cover":return e.jsx(Pe,{onNavigate:R});case"tutorial":return e.jsx(it,{onNavigate:R});case"ar":return e.jsx(vt,{onNavigate:R});case"settings":return e.jsx(yt,{onNavigate:R});case"about":return e.jsx(bt,{onNavigate:R});default:return e.jsx(Pe,{onNavigate:R})}},j=()=>{const y="screen-manager",k=`transition-${h}`,s=`direction-${x}`;return`${y} ${k} ${s} ${d?"transitioning":""}`.trim()};return e.jsxs("div",{className:j(),children:[e.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3},children:e.jsx(jt,{})}),p()]})},Et=()=>{const[a,t]=u.useState(!1),n=()=>{const r=window.innerWidth,o=window.innerHeight,i=r>o,d=navigator.userAgent.toLowerCase(),c=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(d)||"ontouchstart"in window||navigator.maxTouchPoints>0,h=r<=768;c&&i||h&&i?(t(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(t(!1),document.body.style.overflow="",document.body.style.touchAction="")};return u.useEffect(()=>{n();let r,o;const i=()=>{clearTimeout(r),r=setTimeout(()=>{n()},100)},d=()=>{clearTimeout(o),o=setTimeout(()=>{n()},300)},c=()=>{clearTimeout(o),o=setTimeout(()=>{n()},300)},h=v=>{clearTimeout(o),o=setTimeout(()=>{n()},100)};window.addEventListener("resize",i),window.addEventListener("orientationchange",d),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",c);const l=window.matchMedia("(orientation: landscape)");l.addEventListener("change",h);const x=setInterval(()=>{n()},2e3);return()=>{clearTimeout(r),clearTimeout(o),clearInterval(x),window.removeEventListener("resize",i),window.removeEventListener("orientationchange",d),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",c),l.removeEventListener("change",h),document.body.style.overflow="",document.body.style.touchAction=""}},[]),a?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"📱"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experiência de Realidade Aumentada, mantenha seu dispositivo na orientação retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function Rt(){const a={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(ot,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Et,{}),e.jsx(wt,{initialScreen:"cover",appConfig:a})]})})}Ne.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(Rt,{})}));
//# sourceMappingURL=index-be50d5fe.js.map
