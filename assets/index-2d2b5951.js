import{r as d,a as Ne,R as pe}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function o(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function m(n){if(n.ep)return;n.ep=!0;const u=o(n);fetch(n.href,u)}})();var ye={exports:{}},ne={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ke=d,Ae=Symbol.for("react.element"),Ie=Symbol.for("react.fragment"),Ce=Object.prototype.hasOwnProperty,Fe=ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Le={key:!0,ref:!0,__self:!0,__source:!0};function xe(t,s,o){var m,n={},u=null,p=null;o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),s.ref!==void 0&&(p=s.ref);for(m in s)Ce.call(s,m)&&!Le.hasOwnProperty(m)&&(n[m]=s[m]);if(t&&t.defaultProps)for(m in s=t.defaultProps,s)n[m]===void 0&&(n[m]=s[m]);return{$$typeof:Ae,type:t,key:u,ref:p,props:n,_owner:Fe.current}}ne.Fragment=Ie;ne.jsx=xe;ne.jsxs=xe;ye.exports=ne;var e=ye.exports,se={},fe=Ne;se.createRoot=fe.createRoot,se.hydrateRoot=fe.hydrateRoot;let X=null,de=null,te=null;async function je(){return te||(te=(async()=>{try{console.log("Iniciando inicializa√ß√£o global..."),console.log("Aguardando A-Frame..."),await Te(),console.log("A-Frame pronto"),console.log("Inicializando c√¢mera..."),await ze(),console.log("C√¢mera inicializada"),console.log("Carregando face-api.js..."),await Pe(),console.log("face-api.js carregado"),console.log("Inicializando A-Frame Scene..."),await Ue(),console.log("A-Frame Scene inicializado"),console.log("Inicializa√ß√£o global conclu√≠da"),we()}catch(t){throw console.error("Erro na inicializa√ß√£o global:",t),t}})(),te)}function we(){const t=new MutationObserver(()=>{const s=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');s&&(console.log("Modal detectado, garantindo que seja clic√°vel..."),s.style.pointerEvents="auto",s.style.zIndex="2147483647",s.style.position="fixed",s.style.display="block",s.style.visibility="visible",s.style.opacity="1",s.querySelectorAll("*").forEach(n=>{n.style.pointerEvents="auto"}),s.querySelectorAll("button").forEach(n=>{n.style.pointerEvents="auto",n.style.cursor="pointer",n.style.zIndex="2147483647",n.style.position="relative"}))});t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(t.disconnect(),we())},1e3)}function Te(){return new Promise(t=>{if(typeof window<"u"&&window.AFRAME){t();return}const s=()=>{typeof window<"u"&&window.AFRAME?t():setTimeout(s,100)};s()})}async function ze(){try{const t=document.getElementById("arjs-video");if(t&&t.srcObject)return X=t,de=t.srcObject,de;const s=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});if(t)X=t;else{const o=document.createElement("video");o.id="arjs-video",o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.muted=!0,o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.objectFit="cover",o.style.zIndex="0",o.style.display="none",o.style.visibility="hidden",o.style.opacity="0",document.body.appendChild(o),X=o}return X.srcObject=s,de=s,await X.play(),s}catch(t){return console.warn("Erro ao inicializar c√¢mera global:",t),null}}async function Pe(){if(!window.faceapi)return new Promise((t,s)=>{const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",o.onload=()=>{console.log("face-api.js carregado"),t()},o.onerror=()=>s(new Error("Failed to load face-api.js")),document.head.appendChild(o)})}async function Ue(){var h,g;if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const t=document.createElement("a-scene");t.id="ar-scene-main",t.setAttribute("embedded","true"),t.setAttribute("vr-mode-ui","enabled: false"),t.setAttribute("device-orientation-permission-ui","enabled: true"),t.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),t.setAttribute("webxr","enabled: false"),t.setAttribute("background","transparent: true"),t.setAttribute("stats","false");const s=document.createElement("a-assets"),o=document.createElement("img");o.id="skyTexture";const m=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=a=>{if(!m||m==="/")return a.startsWith("/")?a:`/${a}`;const f=m.endsWith("/")?m:m+"/";return a.startsWith("/")?f+a.slice(1):f+a};o.src=n("assets/images/SKY.jpg"),o.setAttribute("crossorigin","anonymous"),s.appendChild(o),t.appendChild(s);const u=document.createElement("a-sky");u.setAttribute("rotation","0 -90 0"),u.setAttribute("material","src: #skyTexture; opacity: 0.5; transparent: true"),t.appendChild(u);const p=document.createElement("a-entity");p.id="camera",p.setAttribute("camera","active: true"),p.setAttribute("look-controls","enabled: true; reverseMouseDrag: false; touchEnabled: true; magicWindowTrackingEnabled: true; pointerLockEnabled: false; touchSensitivity: 1; mouseSensitivity: 1"),p.setAttribute("wasd-controls","enabled: false"),p.setAttribute("position","0 1.6 0"),t.appendChild(p);const r=document.createElement("a-entity");r.setAttribute("light","type: ambient; color: #888"),t.appendChild(r);const i=document.createElement("a-entity");i.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),i.setAttribute("position","1 1 1"),t.appendChild(i);const l=document.createElement("a-entity");l.id="head-cube",l.setAttribute("geometry","primitive: box; width: 0.3; height: 0.3; depth: 0.3"),l.setAttribute("material","color: #FF6B6B; opacity: 0.9; transparent: true"),l.setAttribute("position","0 1 -1.2"),l.setAttribute("rotation","0 0 0"),t.appendChild(l),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="10000",t.style.background="transparent",document.body.appendChild(t),await new Promise(a=>{const f=()=>{const v=document.querySelector("a-scene");v&&v.hasLoaded?a():setTimeout(f,100)};f()}),console.log("A-Frame Scene criado e inicializado")}const be=({onNavigate:t,onLoadingComplete:s})=>{const[o,m]=d.useState(0),[n,u]=d.useState("Inicializando...");return d.useEffect(()=>((async()=>{const r=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json"],l=(()=>{var a,f;const h=((f=(a=import.meta)==null?void 0:a.env)==null?void 0:f.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return h&&h!=="/"?h.endsWith("/")?h:h+"/":"/"})();try{u("Aguardando inicializa√ß√£o..."),await je(),u("Carregando imagens...");for(let h=0;h<r.length;h++){const g=r[h],a=`${l}${g.startsWith("/")?g.slice(1):g}`;if(g.endsWith(".json"))try{if(!(await fetch(a)).ok)throw new Error(`Failed to load ${g}`)}catch(v){console.warn(`Failed to load ${g}:`,v)}else await new Promise(v=>{const y=new Image;y.onload=()=>v(y),y.onerror=()=>{console.warn(`Failed to load image: ${a}`),v(null)},y.src=a});const f=Math.round((h+1)/r.length*100);m(f)}u("Finalizando..."),await new Promise(h=>setTimeout(h,300)),m(100),u("Conclu√≠do!"),await new Promise(h=>setTimeout(h,200)),s==null||s(),t("cover","fade")}catch(h){console.error("Erro ao carregar recursos:",h),u("Erro ao carregar. Continuando..."),setTimeout(()=>{t("cover")},1e3)}})(),()=>{}),[t,s]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${o}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[o,"%"]})]}),e.jsx("p",{className:"loading-status",children:n})]})})},$e=({onNavigate:t,backgroundImage:s})=>{const m=(()=>{var g,a;const l=((a=(g=import.meta)==null?void 0:g.env)==null?void 0:a.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),h=l&&l!=="/"?l.endsWith("/")?l:l+"/":"/";return h==="/"?"":h.endsWith("/")?h.slice(0,-1):h})(),n=l=>{if(m==="")return l.startsWith("/")?l:`/${l}`;const h=l.startsWith("/")?l.slice(1):l;return`${m}/${h}`},u=s||n("assets/images/bg-capa.png"),p=n("assets/images/header-capa.png"),r=n("assets/images/bottom-capa.png"),i=n("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${u}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:p,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>t("tutorial"),style:{backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:r,alt:"Bottom",className:"cover-bottom-img"})})]})},Be=({onNavigate:t})=>{const o=(()=>{var l,h;const r=((h=(l=import.meta)==null?void 0:l.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=r&&r!=="/"?r.endsWith("/")?r:r+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),m=r=>{if(o==="")return r.startsWith("/")?r:`/${r}`;const i=r.startsWith("/")?r.slice(1):r;return`${o}/${i}`},n=m("assets/images/bg-capa.png"),u=m("assets/images/tutorial-panel.png"),p=m("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${n}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:u,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>t("ar"),style:{backgroundImage:`url("${p}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Oe=({enabled:t})=>{const s=d.useRef(null),o=d.useRef(!1),m=d.useRef({x:0,y:0,z:0}),n=d.useRef({x:0,y:1,z:-1.2}),u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return d.useEffect(()=>{async function p(){if(o.current)return;const i=window.faceapi,l="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";u?await Promise.all([i.nets.tinyFaceDetector.loadFromUri(l),i.nets.faceLandmark68Net.loadFromUri(l)]):await Promise.all([i.nets.tinyFaceDetector.loadFromUri(l),i.nets.faceLandmark68Net.loadFromUri(l),i.nets.faceExpressionNet.loadFromUri(l)]),o.current=!0,console.log("Modelos de face-api carregados")}async function r(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(f=>setTimeout(f,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await p();const i=document.getElementById("arjs-video");if(!i||!i.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(i.readyState<2&&await new Promise(f=>{const v=()=>{i.removeEventListener("loadedmetadata",v),i.removeEventListener("playing",v),f()};i.addEventListener("loadedmetadata",v,{once:!0}),i.addEventListener("playing",v,{once:!0}),i.readyState>=2&&f()}),!i)return;const l=window.faceapi,h=()=>({width:window.innerWidth,height:window.innerHeight}),g=async()=>{try{if(!t)return;if(!i.videoWidth){a();return}if(u&&i.paused){const j=()=>{i.muted=!0,i.play().catch(()=>{}),window.removeEventListener("touchstart",j),window.removeEventListener("click",j)};window.addEventListener("touchstart",j,{passive:!0}),window.addEventListener("click",j)}const f=(getComputedStyle(i).transform||"").includes("matrix(-1")||(i.style.transform||"").includes("scaleX(-1)"),v=new l.TinyFaceDetectorOptions({inputSize:u?160:224,scoreThreshold:u?.35:.5});let y=window.faceapi.detectAllFaces(i,v).withFaceLandmarks();!u&&window.faceapi.nets.faceExpressionNet.isLoaded&&(y=y.withFaceExpressions());const R=await y,w=h(),k=w.width/i.videoWidth,T=w.height/i.videoHeight,F=(j,z=0)=>{const P=j*k;return f?w.width-(P+z):P},A=j=>j*T;R&&R.length?R.forEach(j=>{var J;const z=j.detection.box,P=((J=j.landmarks)==null?void 0:J.positions)||[];if(P.length===68){const K=P[30],ae=[36,37,38,39,40,41],me=[42,43,44,45,46,47],V=U=>U.reduce(($,G)=>$+G,0)/U.length,I=U=>({x:V(U.map($=>P[$].x)),y:V(U.map($=>P[$].y))}),C=I(ae),O=I(me),B={x:(C.x+O.x)/2,y:(C.y+O.y)/2},H={x:F(B.x),y:A(B.y)},Q=O.x-C.x,Z=O.y-C.y;let c=Math.atan2(Z,Q)*180/Math.PI;const b=Math.hypot(Q,Z)||1;let x=(K.x-B.x)/b*60,E=-(K.y-B.y)/b*50;f&&(x=-x,c=-c);const S=(U,$,G)=>Math.max($,Math.min(G,U));x=S(x,-60,60),E=S(E,-50,50),c=S(c,-45,45);const N=F(B.x),L=A(B.y)+z.height*T*.1,M=N/w.width,re=L/w.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:M,y:re,detected:!0}}));const D=.25,q=m.current,W={x:q.x+(E-q.x)*D,y:q.y+(x-q.y)*D,z:q.z+(c-q.z)*D};m.current=W;const oe=document.getElementById("camera"),Y=document.getElementById("head-cube");if(oe&&Y){const U=oe.getObject3D&&oe.getObject3D("camera");if(U&&window.THREE){const $=window.THREE,G=H.x/w.width*2-1,Re=-(H.y/w.height*2-1),Se=1.2,ie=new $.Vector3,ge=new $.Vector3,he=new $.Vector3(G,Re,.5);he.unproject(U),ie.copy(U.position),ge.copy(he).sub(ie).normalize();const ce=ie.clone().add(ge.multiplyScalar(Se)),le=.35,_=n.current,ee={x:_.x+(ce.x-_.x)*le,y:_.y+(ce.y-_.y)*le,z:_.z+(ce.z-_.z)*le};n.current=ee,Y.setAttribute("position",`${ee.x.toFixed(3)} ${ee.y.toFixed(3)} ${ee.z.toFixed(3)}`),Y.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}else Y.setAttribute&&Y.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(f){console.error("FaceTracker detect error:",f)}a()},a=()=>{u?setTimeout(()=>{s.current=requestAnimationFrame(g)},80):s.current=requestAnimationFrame(g)};s.current=requestAnimationFrame(g)}return t?r().catch(i=>{console.error("FaceTracker start error:",i)}):s.current&&(cancelAnimationFrame(s.current),s.current=null),()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null)}},[t]),null},Ee=d.forwardRef(({className:t="",onSceneReady:s,cameraFacing:o="environment"},m)=>{const n=d.useRef(null),[u,p]=d.useState(!1);return d.useEffect(()=>{const r=()=>{const i=document.querySelector("a-scene#ar-scene-main");i?(n.current=i,p(!0),s&&s(),requestAnimationFrame(()=>{const l=document.querySelector(".a-enter-vr-button");l&&(l.style.display="none",l.style.visibility="hidden")})):setTimeout(r,100)};r()},[s]),d.useImperativeHandle(m,()=>({addEntity:r=>{const i=n.current||document.querySelector("a-scene#ar-scene-main");if(i){const l=document.createElement("a-entity");return Object.keys(r).forEach(h=>{l.setAttribute(h,typeof r[h]=="object"?Object.entries(r[h]).map(([g,a])=>`${g}: ${a}`).join("; "):r[h])}),l.id=`entity-${Date.now()}`,i.appendChild(l),l.id}return""},removeEntity:r=>{const i=document.getElementById(r);i&&i.remove()},getScene:()=>n.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const r=n.current||document.querySelector("a-scene#ar-scene-main");if(r){const i=r.renderer;if(i&&i.domElement)return i.domElement.toDataURL("image/png")}return""},setCameraFacing:r=>{console.log("Camera facing changed to:",r)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${t}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:u&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});Ee.displayName="ARSceneAFrame";const Me=({onNavigate:t})=>{const s=d.useRef(null),o=d.useRef(null),[m,n]=d.useState(0),[u,p]=d.useState(60),[r,i]=d.useState(!1),[l,h]=d.useState(!1),[g,a]=d.useState(0),[f,v]=d.useState(null),[y,R]=d.useState(!0),[w,k]=d.useState(null),[T,F]=d.useState(!1),[A,j]=d.useState(null),z=d.useRef([]),P=d.useRef({x:.5,y:.5}),J=d.useRef(!1),K=d.useRef(null),ae=d.useRef(null);d.useEffect(()=>{async function c(){try{const b=document.getElementById("arjs-video");if(!b||!b.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(S=>setTimeout(S,1e3));const E=document.getElementById("arjs-video");if(!E||!E.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),R(!1);return}}const x=b||document.getElementById("arjs-video");x&&x.srcObject?(x.classList.add("ar-video-visible"),K.current=x,ae.current=x.srcObject,R(!1)):(console.error("V√≠deo n√£o tem stream"),R(!1))}catch(b){console.error("Erro ao configurar c√¢mera:",b),R(!1)}}return c(),()=>{}},[]),d.useEffect(()=>{!y&&!r&&w===null&&k(3)},[y,r,w]),d.useEffect(()=>{if(w===null||w<=0){w===0&&setTimeout(()=>{k(null),i(!0)},500);return}const c=setTimeout(()=>{k(w-1)},1e3);return()=>clearTimeout(c)},[w]);const V=(()=>{var x,E;const c=((E=(x=import.meta)==null?void 0:x.env)==null?void 0:E.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),b=c&&c!=="/"?c.endsWith("/")?c:c+"/":"/";return b==="/"?"":b.endsWith("/")?b.slice(0,-1):b})(),I=c=>{if(V==="")return c.startsWith("/")?c:`/${c}`;const b=c.startsWith("/")?c.slice(1):c;return`${V}/${b}`},C={nave:I("assets/images/sprites/nave.png"),estrela:I("assets/images/sprites/estrela.png"),cometa:I("assets/images/sprites/cometa.png"),barraProgresso:I("assets/images/sprites/barra-progresso.png"),contador:I("assets/images/sprites/contador.png"),feedbackAcerto:I("assets/images/sprites/feedback-acerto.png"),feedbackErro:I("assets/images/sprites/feedback-erro.png"),modalAcerto:I("assets/images/modal-acerto.png"),modalErro:I("assets/images/modal-erro.png"),btnRegistrar:I("assets/images/btn-registrar.png"),btnInicio:I("assets/images/btn-inicio.png"),btnVoltar:I("assets/images/btn-voltar.png")},O=d.useRef({});d.useEffect(()=>{(async()=>{const b=Object.entries(C).map(([x,E])=>new Promise(S=>{const N=new Image;N.onload=()=>{O.current[x]=N,S()},N.onerror=()=>{console.warn(`Failed to load image: ${E}`),S()},N.src=E}));await Promise.all(b)})()},[]),d.useEffect(()=>{if(!r||l)return;const c=setInterval(()=>{p(b=>b<=1?(h(!0),0):b-1)},1e3);return()=>clearInterval(c)},[r,l]),d.useEffect(()=>{const c=b=>{const{x,y:E,detected:S}=b.detail;J.current=S,S&&(P.current={x,y:E})};return window.addEventListener("nave-position",c),()=>{window.removeEventListener("nave-position",c)}},[]);const B=d.useCallback(()=>{const c=Math.random()>.5?"star":"comet",b={id:Math.random().toString(36).substr(2,9),type:c,x:Math.random()*.8+.1,y:-.1,speed:.0035+Math.random()*.003};z.current.push(b)},[]);d.useEffect(()=>{if(!r||l)return;const c=setInterval(()=>{B()},1e3);return()=>clearInterval(c)},[r,l,B]);const H=d.useCallback(()=>{const c=P.current,b=.08;z.current=z.current.filter(x=>{const E=x.x-c.x,S=x.y-c.y;return Math.sqrt(E*E+S*S)<b+.03?(x.type==="star"?(n(L=>L+10),a(L=>Math.min(100,L+5)),v("acerto"),setTimeout(()=>v(null),500)):(n(L=>Math.max(0,L-5)),a(L=>Math.max(0,L-5)),v("erro"),setTimeout(()=>v(null),500)),!1):!(x.y>1.1)})},[]);d.useEffect(()=>{if(!r||l)return;let c=s.current;c||(c=document.createElement("canvas"),c.id="ar-game-canvas",c.className="ar-game-canvas",c.style.position="fixed",c.style.top="0",c.style.left="0",c.style.width="100vw",c.style.height="100vh",c.style.zIndex="9999",document.body.appendChild(c),s.current=c);const b=c.getContext("2d");if(!b){console.error("N√£o foi poss√≠vel criar contexto 2D");return}const x=()=>{c.width=window.innerWidth,c.height=window.innerHeight};x(),window.addEventListener("resize",x);const E=()=>{if(!b)return;b.clearRect(0,0,c.width,c.height),z.current.forEach(N=>{N.y+=N.speed});const S=O.current.nave;if(S){const N=P.current.x*c.width,L=P.current.y*c.height,M=c.width*.25;b.drawImage(S,N-M/2,L-M/2,M,M)}z.current.forEach(N=>{const L=O.current[N.type==="star"?"estrela":"cometa"];if(L){const M=N.x*c.width,re=N.y*c.height,D=c.width*.12;b.drawImage(L,M-D/2,re-D/2,D,D)}}),H(),o.current=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",x),o.current&&cancelAnimationFrame(o.current)}},[r,l,H]),d.useEffect(()=>{if(l&&u===0&&!T){const c=g>=50;j(c?"acerto":"erro"),setTimeout(()=>{F(!0)},1e3)}},[l,u,g,T]);const Q=()=>{F(!1),j(null),n(0),p(60),a(0),v(null),h(!1),i(!1),z.current=[],k(3)},Z=c=>{const b=Math.floor(c/60),x=c%60;return`${b}:${x.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"ar-game-screen",children:[y&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),w!==null&&e.jsx("div",{className:"ar-countdown-overlay",children:e.jsx("div",{className:"ar-countdown-content",children:w>0?e.jsx("div",{className:"ar-countdown-number",children:w}):e.jsx("div",{className:"ar-countdown-go",children:"Vai!"})})}),e.jsx(Ee,{cameraFacing:"user"}),e.jsx(Oe,{enabled:!0}),e.jsxs("div",{className:"ar-timer-container",children:[e.jsx("img",{src:C.contador,alt:"Timer",className:"ar-timer-bg"}),e.jsx("div",{className:"ar-timer-text",children:Z(u)})]}),e.jsxs("div",{className:"ar-progress-container",children:[e.jsx("img",{src:C.barraProgresso,alt:"Progress Bar",className:"ar-progress-bg"}),e.jsx("div",{className:"ar-progress-fill",style:{width:`${g}%`}})]}),f&&e.jsx("div",{className:`ar-feedback ar-feedback-${f}`,children:e.jsx("img",{src:f==="acerto"?C.feedbackAcerto:C.feedbackErro,alt:f,className:"ar-feedback-image"})}),e.jsxs("div",{className:"ar-score",children:["Pontos: ",m]}),T&&A&&e.jsx("div",{className:"ar-result-modal-overlay",children:e.jsxs("div",{className:"ar-result-modal-content",children:[e.jsx("img",{src:A==="acerto"?C.modalAcerto:C.modalErro,alt:A==="acerto"?"Acerto":"Erro",className:"ar-result-modal-image"}),A==="acerto"&&e.jsxs("div",{className:"ar-result-modal-buttons",children:[e.jsx("button",{className:"ar-result-button ar-result-button-registrar",onClick:()=>{F(!1),t("selfie")},style:{backgroundImage:`url(${C.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"ar-result-button ar-result-button-inicio",onClick:()=>{F(!1),t("cover")},style:{backgroundImage:`url(${C.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),A==="erro"&&e.jsx("div",{className:"ar-result-modal-buttons",children:e.jsx("button",{className:"ar-result-button ar-result-button-voltar",onClick:()=>{Q()},style:{backgroundImage:`url(${C.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})})]})},ue={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},De=({onNavigate:t,onSettingsChange:s})=>{const[o,m]=d.useState(ue),n=(r,i)=>{const l={...o,[r]:i};m(l),s==null||s(l)},u=()=>{t("ar")},p=()=>{m(ue),s==null||s(ue)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:u,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:o.quality,onChange:r=>n("quality",r.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.enableSound,onChange:r=>n("enableSound",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.enableVibration,onChange:r=>n("enableVibration",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:o.autoSave,onChange:r=>n("autoSave",r.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:o.language,onChange:r=>n("language",r.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:p,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:u,children:"Salvar"})]})]})},We=({onNavigate:t,appName:s="Realidade Aumentada",version:o="1.0.0",description:m="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:n="Desenvolvedor AR"})=>{const u=()=>{t("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:u,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:s}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",o]}),e.jsx("p",{className:"app-description",children:m})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:n})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:u,children:"Voltar ao In√≠cio"})})]})},qe=({onNavigate:t})=>{const s=()=>{t("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:s,children:"Jogar Novamente"})})]})})},_e=()=>{const t=d.useRef(null),s=d.useRef(null),[o,m]=d.useState(!1),u=(()=>{var f,v;const g=((v=(f=import.meta)==null?void 0:f.env)==null?void 0:v.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),a=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return a==="/"?"":a.endsWith("/")?a.slice(0,-1):a})(),p=g=>{if(u==="")return g.startsWith("/")?g:`/${g}`;const a=g.startsWith("/")?g.slice(1):g;return`${u}/${a}`},r=p("assets/images/selfie-top.png"),i=p("assets/images/selfie-bottom.png"),l=p("assets/images/camera-icon.png");d.useEffect(()=>{async function g(){try{let a=document.getElementById("selfie-video");if(a&&a.srcObject){a.classList.add("selfie-video-visible"),t.current=a;return}const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});a||(a=document.createElement("video"),a.setAttribute("id","selfie-video"),a.setAttribute("playsinline",""),a.setAttribute("autoplay",""),a.muted=!0,a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100vw",a.style.height="100vh",a.style.objectFit="cover",a.style.zIndex="0",a.classList.add("selfie-video-visible"),document.body.appendChild(a)),a.srcObject=f,s.current=f,t.current=a,await a.play()}catch(a){console.error("Erro ao inicializar c√¢mera:",a)}}return g(),()=>{}},[]);const h=()=>{if(!t.current||o)return;m(!0);const g=t.current,a=document.createElement("canvas");a.width=g.videoWidth||g.clientWidth,a.height=g.videoHeight||g.clientHeight;const f=a.getContext("2d");f?(f.drawImage(g,0,0,a.width,a.height),a.toBlob(v=>{if(v){const y=URL.createObjectURL(v),R=document.createElement("a");R.href=y,R.download=`selfie-${Date.now()}.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(y)}m(!1)},"image/png")):m(!1)};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:r,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:i,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:h,disabled:o,style:{backgroundImage:`url(${l})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Ve=({initialScreen:t="loading",appConfig:s,defaultTransition:o="zoom-out",defaultDirection:m="right"})=>{const[n,u]=d.useState(t||"loading"),[p,r]=d.useState(!1),[i,l]=d.useState(o),[h,g]=d.useState(m),[a,f]=d.useState(null);d.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",n)},[]),d.useEffect(()=>{if(!p){const k=setTimeout(()=>{n!=="loading"&&f(null)},1e3);return()=>clearTimeout(k)}},[n,p]);const v=(k,T)=>{const F=["loading","cover","tutorial","ar","final","settings","about","selfie"],A=F.indexOf(k),j=F.indexOf(T);return j>A?"right":j<A?"left":"right"},y=(k,T,F)=>{const A=T||i,j=F||v(n,k);f(n),l(A),g(j);const z=n==="loading"?800:300;r(!0),setTimeout(()=>{u(k),r(!1)},z)},R=()=>{switch(n){case"loading":return e.jsx(be,{onNavigate:y});case"cover":return e.jsx($e,{onNavigate:y,title:s.title,subtitle:s.subtitle});case"tutorial":return e.jsx(Be,{onNavigate:y});case"ar":return e.jsx(Me,{onNavigate:y});case"final":return e.jsx(qe,{onNavigate:y});case"settings":return e.jsx(De,{onNavigate:y});case"about":return e.jsx(We,{onNavigate:y});case"selfie":return e.jsx(_e,{onNavigate:y});default:return e.jsx(be,{onNavigate:y})}},w=()=>{const k="screen-manager",T=`transition-${i}`,F=`direction-${h}`,A=p?"transitioning":"",j=a?`from-${a}`:"";return`${k} ${T} ${F} ${A} ${j}`.trim()};return e.jsx("div",{className:w(),children:R()})},He=d.createContext(void 0),Ye=({children:t})=>{const[s,o]=d.useState(null),[m,n]=d.useState(!0),[u,p]=d.useState(null),r=async()=>{var h,g;try{n(!0),p(null),console.log("üîÑ Carregando dados do RA...");const a=((g=(h=import.meta)==null?void 0:h.env)==null?void 0:g.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),v=`${a&&a!=="/"?a.endsWith("/")?a:a+"/":"/"}assets/data/ra.json`,y=await fetch(v);if(!y.ok)throw new Error(`Erro ao carregar dados: ${y.status}`);const R=await y.json();console.log("‚úÖ Dados do RA carregados:",R),o(R)}catch(a){const f=a instanceof Error?a.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",f),p(f)}finally{n(!1)}},i=()=>{r()};d.useEffect(()=>{r()},[]);const l={raData:s,loading:m,error:u,refreshData:i};return e.jsx(He.Provider,{value:l,children:t})},Ge=()=>{const[t,s]=d.useState(!1),o=()=>{const m=window.innerWidth,n=window.innerHeight,u=m>n,p=navigator.userAgent.toLowerCase(),r=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(p)||"ontouchstart"in window||navigator.maxTouchPoints>0,i=m<=768;r&&u||i&&u?(s(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(s(!1),document.body.style.overflow="",document.body.style.touchAction="")};return d.useEffect(()=>{o();let m,n;const u=()=>{clearTimeout(m),m=setTimeout(()=>{o()},100)},p=()=>{clearTimeout(n),n=setTimeout(()=>{o()},300)},r=()=>{clearTimeout(n),n=setTimeout(()=>{o()},300)},i=g=>{clearTimeout(n),n=setTimeout(()=>{o()},100)};window.addEventListener("resize",u),window.addEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",r);const l=window.matchMedia("(orientation: landscape)");l.addEventListener("change",i);const h=setInterval(()=>{o()},2e3);return()=>{clearTimeout(m),clearTimeout(n),clearInterval(h),window.removeEventListener("resize",u),window.removeEventListener("orientationchange",p),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",r),l.removeEventListener("change",i),document.body.style.overflow="",document.body.style.touchAction=""}},[]),t?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function ve(){const t={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(Ye,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Ge,{}),e.jsx(Ve,{initialScreen:"loading",appConfig:t})]})})}je().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),se.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(ve,{})}))}).catch(t=>{console.error("Erro na inicializa√ß√£o global:",t),se.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(ve,{})}))});
//# sourceMappingURL=index-2d2b5951.js.map
