{"version":3,"file":"index-d4498e9e.js","sources":["../../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../../node_modules/react/jsx-runtime.js","../../../../node_modules/react-dom/client.js","../../src/components/screens/LoadingScreen.tsx","../../src/components/screens/CoverScreen.tsx","../../src/components/screens/TutorialScreen.tsx","../../src/components/FaceTracker.tsx","../../../../node_modules/aframe-react/dist/index.js","../../src/components/ARSceneAFrame.tsx","../../src/components/screens/ARScreen.tsx","../../src/components/screens/SettingsScreen.tsx","../../src/components/screens/AboutScreen.tsx","../../src/components/screens/FinalScreen.tsx","../../src/components/screens/SelfieScreen.tsx","../../src/components/ScreenManager.tsx","../../src/contexts/RAContext.tsx","../../src/components/LandscapeBlocker.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React, { useEffect, useState } from 'react'\nimport type { ScreenType, TransitionType, TransitionDirection } from '../../types/screens'\n\n// Função para inicializar câmera e pedir permissões cedo\nasync function initializeCamera(): Promise<MediaStream | null> {\n    try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n            video: {\n                width: { ideal: 1280 },\n                height: { ideal: 720 },\n                facingMode: { ideal: 'user' }\n            },\n            audio: false\n        })\n\n        // Criar vídeo mas não mostrar ainda\n        let video = document.getElementById('arjs-video') as HTMLVideoElement\n        if (!video) {\n            video = document.createElement('video')\n            video.setAttribute('id', 'arjs-video')\n            video.setAttribute('playsinline', '')\n            video.setAttribute('autoplay', '')\n            video.muted = true\n            video.style.position = 'fixed'\n            video.style.top = '0'\n            video.style.left = '0'\n            video.style.width = '100vw'\n            video.style.height = '100vh'\n            video.style.objectFit = 'cover'\n            video.style.zIndex = '0'\n            video.style.display = 'none' // Esconder por enquanto\n            video.style.visibility = 'hidden'\n            video.style.opacity = '0'\n            document.body.appendChild(video)\n        }\n\n        video.srcObject = stream\n        await video.play()\n\n        return stream\n    } catch (err) {\n        console.warn('Erro ao inicializar câmera (será tentado novamente na tela AR):', err)\n        return null\n    }\n}\n\n// Função para carregar face-api.js\nasync function loadFaceApi(): Promise<void> {\n    if ((window as any).faceapi) {\n        return // Já carregado\n    }\n\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script')\n        script.src = 'https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js'\n        script.onload = () => {\n            console.log('face-api.js carregado')\n            resolve()\n        }\n        script.onerror = () => reject(new Error('Failed to load face-api.js'))\n        document.head.appendChild(script)\n    })\n}\n\n// Função para inicializar A-Frame (já está carregado no HTML, apenas verificar)\nasync function initializeAFrame(): Promise<void> {\n    // A-Frame já está carregado no index.html\n    // Aguardar estar pronto e criar uma cena temporária para ativar o modal de permissão\n    return new Promise((resolve) => {\n        const checkAFrame = () => {\n            if (typeof window !== 'undefined' && (window as any).AFRAME) {\n                console.log('A-Frame carregado')\n\n                // Criar uma cena temporária para ativar o modal de permissão de orientação\n                const tempScene = document.createElement('a-scene')\n                tempScene.setAttribute('device-orientation-permission-ui', 'enabled: true')\n                tempScene.setAttribute('vr-mode-ui', 'enabled: false')\n                tempScene.style.position = 'fixed'\n                tempScene.style.top = '-9999px'\n                tempScene.style.left = '-9999px'\n                tempScene.style.width = '1px'\n                tempScene.style.height = '1px'\n                tempScene.style.zIndex = '-1'\n                document.body.appendChild(tempScene)\n\n                // Aguardar a cena estar pronta\n                tempScene.addEventListener('loaded', () => {\n                    console.log('A-Frame scene carregada, modal de permissão ativado')\n                    resolve()\n                })\n\n                return\n            }\n            setTimeout(checkAFrame, 100)\n        }\n\n        if (typeof window !== 'undefined' && (window as any).AFRAME) {\n            checkAFrame()\n        } else {\n            checkAFrame()\n        }\n    })\n}\n\ninterface LoadingScreenProps {\n    onNavigate: (screen: ScreenType, transition?: TransitionType, direction?: TransitionDirection) => void\n    onLoadingComplete?: () => void\n}\n\nexport const LoadingScreen: React.FC<LoadingScreenProps> = ({\n    onNavigate,\n    onLoadingComplete\n}) => {\n    const [progress, setProgress] = useState(0)\n    const [status, setStatus] = useState('Inicializando...')\n\n    useEffect(() => {\n        const loadResources = async () => {\n            const resources = [\n                // Imagens da tela cover\n                '/assets/images/bg-capa.png',\n                '/assets/images/header-capa.png',\n                '/assets/images/bottom-capa.png',\n                '/assets/images/btn-jogar.png',\n                // Imagens da tela tutorial\n                '/assets/images/tutorial-panel.png',\n                '/assets/images/btn-comecar.png',\n                // Imagens do jogo AR\n                '/assets/images/sprites/nave.png',\n                '/assets/images/sprites/estrela.png',\n                '/assets/images/sprites/cometa.png',\n                '/assets/images/sprites/barra-progresso.png',\n                '/assets/images/sprites/contador.png',\n                '/assets/images/sprites/feedback-acerto.png',\n                '/assets/images/sprites/feedback-erro.png',\n                // Imagens do modal de resultado\n                '/assets/images/modal-acerto.png',\n                '/assets/images/modal-erro.png',\n                '/assets/images/btn-registrar.png',\n                '/assets/images/btn-inicio.png',\n                '/assets/images/btn-voltar.png',\n                '/assets/images/Titulo.png',\n                '/assets/images/btJogar.png',\n                '/assets/images/btCreditos.png',\n                // Outras imagens importantes\n                '/assets/images/SKY.jpg',\n                '/assets/images/mascara.png',\n                // Dados\n                '/assets/data/ra.json'\n            ]\n\n            const getBaseUrl = () => {\n                const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n                const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\n                return b\n            }\n\n            const baseUrl = getBaseUrl()\n\n            try {\n                // Inicializar A-Frame PRIMEIRO - antes de tudo\n                // Isso vai ativar o modal de permissão de orientação automaticamente\n                setStatus('Inicializando A-Frame...')\n                await initializeAFrame()\n\n                // Aguardar um pouco para garantir que o A-Frame está totalmente pronto\n                await new Promise(resolve => setTimeout(resolve, 500))\n\n                // Pedir permissão da câmera\n                setStatus('Solicitando permissão da câmera...')\n                await initializeCamera()\n\n                // Carregar face-api.js\n                setStatus('Carregando face-api.js...')\n                await loadFaceApi()\n\n                // Carregar imagens\n                setStatus('Carregando imagens...')\n                for (let i = 0; i < resources.length; i++) {\n                    const resource = resources[i]\n                    const fullUrl = `${baseUrl}${resource.startsWith('/') ? resource.slice(1) : resource}`\n\n                    if (resource.endsWith('.json')) {\n                        // Carregar JSON\n                        try {\n                            const response = await fetch(fullUrl)\n                            if (!response.ok) throw new Error(`Failed to load ${resource}`)\n                        } catch (error) {\n                            console.warn(`Failed to load ${resource}:`, error)\n                        }\n                    } else {\n                        // Carregar imagem\n                        await new Promise((resolve) => {\n                            const img = new Image()\n                            img.onload = () => resolve(img)\n                            img.onerror = () => {\n                                console.warn(`Failed to load image: ${fullUrl}`)\n                                resolve(null) // Continuar mesmo se falhar\n                            }\n                            img.src = fullUrl\n                        })\n                    }\n\n                    const newProgress = Math.round(((i + 1) / resources.length) * 100)\n                    setProgress(newProgress)\n                }\n\n                setStatus('Finalizando...')\n\n                // Pequeno delay para animação suave\n                await new Promise(resolve => setTimeout(resolve, 300))\n\n                setProgress(100)\n                setStatus('Concluído!')\n\n                // Aguardar um pouco antes de navegar\n                await new Promise(resolve => setTimeout(resolve, 200))\n\n                onLoadingComplete?.()\n                // Usar transição fade para saída suave\n                onNavigate('cover', 'fade')\n            } catch (error) {\n                console.error('Erro ao carregar recursos:', error)\n                setStatus('Erro ao carregar. Continuando...')\n                // Mesmo com erro, continuar para a tela cover\n                setTimeout(() => {\n                    onNavigate('cover')\n                }, 1000)\n            }\n        }\n\n        loadResources()\n\n        // Cleanup ao desmontar\n        return () => {\n            // cleanupOrientation será chamado automaticamente quando necessário\n        }\n    }, [onNavigate, onLoadingComplete])\n\n    return (\n        <div className=\"loading-screen\">\n            <div className=\"loading-content\">\n                <div className=\"loading-logo\">\n                    <div className=\"loading-spinner\"></div>\n                </div>\n\n                <h2 className=\"loading-title\">Carregando</h2>\n\n                <div className=\"loading-progress-container\">\n                    <div className=\"loading-progress-bar\">\n                        <div\n                            className=\"loading-progress-fill\"\n                            style={{ width: `${progress}%` }}\n                        ></div>\n                    </div>\n                    <p className=\"loading-percentage\">{progress}%</p>\n                </div>\n\n                <p className=\"loading-status\">{status}</p>\n            </div>\n        </div>\n    )\n}\n\n","import React from 'react'\nimport type { ScreenType } from '../../types/screens'\n\ninterface CoverScreenProps {\n  onNavigate: (screen: ScreenType) => void\n  title?: string\n  subtitle?: string\n  backgroundImage?: string\n}\n\nexport const CoverScreen: React.FC<CoverScreenProps> = ({\n  onNavigate,\n  backgroundImage\n}) => {\n  // Get base URL from vite config or use current location\n  const getBaseUrl = () => {\n    const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n    const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\n    return b === '/' ? '' : b.endsWith('/') ? b.slice(0, -1) : b\n  }\n\n  const baseUrl = getBaseUrl()\n  // Garantir que o caminho comece com / se baseUrl estiver vazio\n  const normalizePath = (path: string) => {\n    if (baseUrl === '') {\n      return path.startsWith('/') ? path : `/${path}`\n    }\n    const cleanPath = path.startsWith('/') ? path.slice(1) : path\n    return `${baseUrl}/${cleanPath}`\n  }\n\n  const bgImage = backgroundImage || normalizePath('assets/images/bg-capa.png')\n  const headerImage = normalizePath('assets/images/header-capa.png')\n  const bottomImage = normalizePath('assets/images/bottom-capa.png')\n  const btnJogarImage = normalizePath('assets/images/btn-jogar.png')\n\n  return (\n    <div\n      className=\"cover-screen\"\n      style={{\n        backgroundImage: `url(\"${bgImage}\")`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat'\n      }}\n    >\n      {/* Header Image */}\n      <div className=\"cover-header-image\">\n        <img\n          src={headerImage}\n          alt=\"Header\"\n          className=\"cover-header-img\"\n        />\n      </div>\n\n      {/* Button - Começar Tutorial */}\n      <div className=\"cover-content\">\n        <button\n          className=\"cover-button-jogar\"\n          onClick={() => onNavigate('tutorial')}\n          style={{\n            backgroundImage: `url(${btnJogarImage})`,\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center'\n          }}\n        />\n      </div>\n\n      {/* Bottom Image */}\n      <div className=\"cover-bottom-image\">\n        <img\n          src={bottomImage}\n          alt=\"Bottom\"\n          className=\"cover-bottom-img\"\n        />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport type { ScreenType } from '../../types/screens'\n\ninterface TutorialScreenProps {\n  onNavigate: (screen: ScreenType) => void\n}\n\nexport const TutorialScreen: React.FC<TutorialScreenProps> = ({\n  onNavigate\n}) => {\n  // Get base URL from vite config or use current location\n  const getBaseUrl = () => {\n    const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n    const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\n    return b === '/' ? '' : b.endsWith('/') ? b.slice(0, -1) : b\n  }\n\n  const baseUrl = getBaseUrl()\n  // Garantir que o caminho comece com / se baseUrl estiver vazio\n  const normalizePath = (path: string) => {\n    if (baseUrl === '') {\n      return path.startsWith('/') ? path : `/${path}`\n    }\n    const cleanPath = path.startsWith('/') ? path.slice(1) : path\n    return `${baseUrl}/${cleanPath}`\n  }\n\n  const bgImage = normalizePath('assets/images/bg-capa.png')\n  const tutorialPanelImage = normalizePath('assets/images/tutorial-panel.png')\n  const btnComecarImage = normalizePath('assets/images/btn-comecar.png')\n\n  return (\n    <div\n      className=\"tutorial-screen\"\n      style={{\n        backgroundImage: `url(\"${bgImage}\")`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat'\n      }}\n    >\n      {/* Imagem central do tutorial */}\n      <div className=\"tutorial-panel-container\">\n        <img\n          src={tutorialPanelImage}\n          alt=\"Tutorial Panel\"\n          className=\"tutorial-panel-image\"\n        />\n      </div>\n\n      {/* Botão Começar RA */}\n      <div className=\"tutorial-button-container\">\n        <button\n          className=\"tutorial-button-comecar\"\n          onClick={() => onNavigate('ar')}\n          style={{\n            backgroundImage: `url(\"${btnComecarImage}\")`,\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center'\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useRef } from 'react'\n\ninterface FaceTrackerProps {\n  enabled: boolean\n}\n\ndeclare global {\n  interface Window { faceapi?: any }\n}\n\nexport const FaceTracker: React.FC<FaceTrackerProps> = ({ enabled }) => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null)\n  const rafRef = useRef<number | null>(null)\n  const modelsLoadedRef = useRef<boolean>(false)\n  // const statusRef = useRef<HTMLDivElement | null>(null) // Removido - não mostrar mais status\n  const prevRotRef = useRef<{ x: number; y: number; z: number }>({ x: 0, y: 0, z: 0 })\n  const prevPosRef = useRef<{ x: number; y: number; z: number }>({ x: 0, y: 1, z: -1.2 })\n  const maskImgRef = useRef<HTMLImageElement | null>(null)\n  const maskLoadedRef = useRef<boolean>(false)\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n\n  useEffect(() => {\n    function ensureCanvas() {\n      if (!canvasRef.current) {\n        const c = document.createElement('canvas')\n        c.id = 'face-tracker-overlay'\n        c.style.position = 'fixed'\n        c.style.top = '0'\n        c.style.left = '0'\n        c.style.width = '100vw'\n        c.style.height = '100vh'\n        c.style.pointerEvents = 'none'\n        c.style.zIndex = '9999'\n        document.body.appendChild(c)\n        canvasRef.current = c\n      }\n      // Status removido - não mostrar mais\n      // if (!statusRef.current) {\n      //   ... código removido ...\n      // }\n    }\n\n    function removeCanvas() {\n      if (canvasRef.current && canvasRef.current.parentNode) {\n        canvasRef.current.parentNode.removeChild(canvasRef.current)\n        canvasRef.current = null\n      }\n      // Status removido - não precisa mais limpar\n    }\n\n    async function loadFaceApi() {\n      if (window.faceapi) return\n      // Status removido\n      await new Promise<void>((resolve, reject) => {\n        const script = document.createElement('script')\n        script.src = 'https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js'\n        script.onload = () => resolve()\n        script.onerror = () => reject(new Error('Falha ao carregar face-api.js'))\n        document.head.appendChild(script)\n      })\n      console.log('face-api.js carregado')\n    }\n\n    async function loadModels() {\n      if (modelsLoadedRef.current) return\n      // Status removido\n      const faceapi = window.faceapi\n      const MODEL_URL = 'https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights'\n      if (isMobile) {\n        await Promise.all([\n          faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\n          faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL)\n        ])\n      } else {\n        await Promise.all([\n          faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\n          faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\n          faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL)\n        ])\n      }\n      modelsLoadedRef.current = true\n      // Status removido\n      console.log('Modelos de face-api carregados')\n    }\n\n    function loadMask() {\n      if (maskLoadedRef.current) return\n      const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n      const normalize = (p: string) => {\n        if (!base || base === '/') return p.startsWith('/') ? p : `/${p}`\n        const b = base.endsWith('/') ? base : base + '/'\n        return p.startsWith('/') ? b + p.replace(/^\\//, '') : b + p\n      }\n      const candidatesRaw = [\n        'assets/images/mascara.png',   // preferred path\n        'images/mascara.png',          // relative images\n        'mascara.png'                  // root of public\n      ]\n      const candidatesBase = candidatesRaw.map(normalize)\n      const candidatesFallback = (!base || base === '/') ? ['/mascara.png', '/assets/images/mascara.png', '/images/mascara.png'] : []\n      const candidates = [...candidatesBase, ...candidatesFallback]\n      let index = 0\n\n      const img = new Image()\n      const tryNext = () => {\n        if (index >= candidates.length) {\n          console.warn('Não foi possível carregar mascara.png de nenhum caminho:', candidates)\n          return\n        }\n        const url = candidates[index++] + `?v=${Date.now()}`\n        img.src = url\n        console.log('BASE_URL resolvido:', base, '| Tentando máscara em:', url)\n      }\n\n      img.onload = () => {\n        maskLoadedRef.current = true\n        maskImgRef.current = img\n        console.log('Máscara carregada em:', img.src)\n      }\n      img.onerror = () => {\n        tryNext()\n      }\n\n      maskImgRef.current = img\n      tryNext()\n    }\n\n    function setCanvasSize(canvas: HTMLCanvasElement) {\n      const dpr = isMobile ? 1 : Math.max(1, window.devicePixelRatio || 1)\n      canvas.width = Math.floor(window.innerWidth * dpr)\n      canvas.height = Math.floor(window.innerHeight * dpr)\n      const ctx = canvas.getContext('2d')\n      if (ctx) ctx.setTransform(dpr, 0, 0, dpr, 0, 0)\n    }\n\n    async function start() {\n      ensureCanvas()\n      await loadFaceApi()\n      await loadModels()\n      loadMask()\n\n      // Esperar o vídeo da câmera existir e estar pronto\n      const waitForVideo = (): Promise<HTMLVideoElement> => {\n        return new Promise((resolve, reject) => {\n          let resolved = false\n          const timeout = setTimeout(() => {\n            if (!resolved) {\n              reject(new Error('Timeout aguardando vídeo da câmera'))\n            }\n          }, 15000)\n\n          const tryResolve = (v: HTMLVideoElement | null) => {\n            if (!v) return false\n            const hasStream = !!(v as any).srcObject\n            if ((v.readyState >= 2 || (!v.paused && v.currentTime > 0)) && hasStream) {\n              resolved = true\n              clearTimeout(timeout)\n              v.removeEventListener('playing', onPlaying)\n              observer.disconnect()\n              resolve(v)\n              return true\n            }\n            return false\n          }\n\n          const onPlaying = (e: Event) => {\n            const v = e.target as HTMLVideoElement\n            tryResolve(v)\n          }\n\n          const observer = new MutationObserver(() => {\n            const v = document.getElementById('arjs-video') as HTMLVideoElement | null\n            if (tryResolve(v)) return\n            if (v) {\n              v.addEventListener('playing', onPlaying, { once: true })\n            }\n          })\n\n          observer.observe(document.body, { childList: true, subtree: true })\n\n          // Checar imediatamente\n          const v0 = document.getElementById('arjs-video') as HTMLVideoElement | null\n          if (tryResolve(v0)) return\n          if (v0) v0.addEventListener('playing', onPlaying, { once: true })\n        })\n      }\n\n      let video: HTMLVideoElement\n      try {\n        video = await waitForVideo()\n      } catch (e) {\n        // Status removido\n        console.warn('FaceTracker: vídeo não disponível a tempo', e)\n        return\n      }\n\n      const canvas = canvasRef.current\n      if (!video || !canvas) {\n        // Status removido\n        return\n      }\n\n      const faceapi = window.faceapi\n      const ctx = canvas.getContext('2d')\n\n      function resizeCanvas() {\n        if (canvas) {\n          setCanvasSize(canvas)\n        }\n      }\n      resizeCanvas()\n      window.addEventListener('resize', resizeCanvas)\n\n      const detect = async () => {\n        try {\n          if (!enabled) return\n          if (!video.videoWidth) {\n            // Status removido\n            scheduleNext()\n            return\n          }\n\n          // iOS/Android: tentar retomar play (gesture unlock simplificado)\n          if (isMobile && video.paused) {\n            const unlock = () => {\n              video.muted = true\n              video.play().catch(() => { })\n              window.removeEventListener('touchstart', unlock)\n              window.removeEventListener('click', unlock)\n            }\n            window.addEventListener('touchstart', unlock, { passive: true })\n            window.addEventListener('click', unlock)\n          }\n\n          const isMirrored = (getComputedStyle(video).transform || '').includes('matrix(-1') || (video.style.transform || '').includes('scaleX(-1)')\n\n          const options = new faceapi.TinyFaceDetectorOptions({ inputSize: isMobile ? 160 : 224, scoreThreshold: isMobile ? 0.35 : 0.5 })\n          let pipeline: any = window.faceapi\n            .detectAllFaces(video, options)\n            .withFaceLandmarks()\n          if (!isMobile && window.faceapi.nets.faceExpressionNet.isLoaded) {\n            pipeline = pipeline.withFaceExpressions()\n          }\n          const detections = await pipeline\n\n          if (ctx) {\n            ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n            // Debug minimal (evitar custo no mobile)\n            if (!isMobile) {\n              ctx.fillStyle = 'rgba(78,205,196,0.8)'\n              ctx.beginPath()\n              ctx.arc(16, 16, 6, 0, Math.PI * 2)\n              ctx.fill()\n              ctx.font = '12px Arial'\n              ctx.fillText(`faces: ${detections?.length || 0}`, 30, 20)\n            }\n\n            const dpr = isMobile ? 1 : Math.max(1, window.devicePixelRatio || 1)\n            const canvasCssWidth = canvas.width / dpr\n            const canvasCssHeight = canvas.height / dpr\n            const scaleX = canvasCssWidth / video.videoWidth\n            const scaleY = canvasCssHeight / video.videoHeight\n\n            const mapX = (x: number, w = 0) => {\n              const raw = x * scaleX\n              return isMirrored ? (canvasCssWidth - (raw + w)) : raw\n            }\n            const mapY = (y: number) => y * scaleY\n\n            const drawPoint = (x: number, y: number, label: string, color: string) => {\n              if (isMobile) return // pular debug no mobile\n              const px = mapX(x)\n              const py = mapY(y)\n              ctx.fillStyle = color\n              ctx.beginPath()\n              ctx.arc(px, py, 4, 0, Math.PI * 2)\n              ctx.fill()\n              ctx.fillStyle = color\n              ctx.fillText(label, px + 6, py - 6)\n            }\n\n            if (detections && detections.length) {\n              // Status removido\n              detections.forEach((det: any) => {\n                const box = det.detection.box\n                const rawW = box.width * scaleX\n                const x = mapX(box.x, rawW)\n                const y = mapY(box.y)\n                const w = rawW\n                const h = box.height * scaleY\n\n                if (!isMobile) {\n                  ctx.strokeStyle = '#4ECDC4'\n                  ctx.lineWidth = 3\n                  ctx.strokeRect(x, y, w, h)\n                }\n\n                if (!isMobile && det.expressions) {\n                  const expr = det.expressions || {}\n                  const entries = Object.entries(expr) as Array<[string, number]>\n                  if (entries.length) {\n                    const [topLabel, topScore] = entries.reduce((a, b) => (a[1] > b[1] ? a : b))\n                    const label = `${topLabel} ${(topScore * 100).toFixed(0)}%`\n                    ctx.font = '12px Arial'\n                    const textW = ctx.measureText(label).width + 12\n                    ctx.fillStyle = 'rgba(0,0,0,0.6)'\n                    ctx.fillRect(x, Math.max(0, y - 22), textW, 20)\n                    ctx.fillStyle = '#FFFFFF'\n                    ctx.fillText(label, x + 6, Math.max(12, y - 8))\n                  }\n                }\n\n                const pts: Array<{ x: number; y: number }> = det.landmarks?.positions || []\n                if (pts.length === 68) {\n                  const noseTip = pts[30]\n                  const leftEyeIdx = [36, 37, 38, 39, 40, 41]\n                  const rightEyeIdx = [42, 43, 44, 45, 46, 47]\n                  const avg = (arr: number[]) => arr.reduce((a, b) => a + b, 0) / arr.length\n                  const eyeCenter = (ids: number[]) => ({ x: avg(ids.map(i => pts[i].x)), y: avg(ids.map(i => pts[i].y)) })\n                  const leftEye = eyeCenter(leftEyeIdx)\n                  const rightEye = eyeCenter(rightEyeIdx)\n\n                  if (!isMobile) {\n                    drawPoint(noseTip.x, noseTip.y, 'nose', '#00E5A8')\n                    drawPoint(leftEye.x, leftEye.y, 'eye-L', '#EF476F')\n                    drawPoint(rightEye.x, rightEye.y, 'eye-R', '#EF476F')\n                  }\n\n                  const midEyes = { x: (leftEye.x + rightEye.x) / 2, y: (leftEye.y + rightEye.y) / 2 }\n                  const midEyesPx = { x: mapX(midEyes.x), y: mapY(midEyes.y) }\n\n                  const dxEyes = rightEye.x - leftEye.x\n                  const dyEyes = rightEye.y - leftEye.y\n                  let rollDeg = (Math.atan2(dyEyes, dxEyes) * 180) / Math.PI\n                  const eyeDist = Math.hypot(dxEyes, dyEyes) || 1\n                  let yawDeg = ((noseTip.x - midEyes.x) / eyeDist) * 60\n                  let pitchDeg = (-(noseTip.y - midEyes.y) / eyeDist) * 50\n                  if (isMirrored) {\n                    yawDeg = -yawDeg\n                    rollDeg = -rollDeg\n                  }\n                  const clamp = (v: number, a: number, b: number) => Math.max(a, Math.min(b, v))\n                  yawDeg = clamp(yawDeg, -60, 60)\n                  pitchDeg = clamp(pitchDeg, -50, 50)\n                  rollDeg = clamp(rollDeg, -45, 45)\n\n                  // Emitir posição do nariz (onde está a máscara) para o jogo AR\n                  const centerX = mapX(midEyes.x)\n                  const centerY = mapY(midEyes.y) + h * 0.10\n\n                  const normalizedX = centerX / canvasCssWidth\n                  const normalizedY = centerY / canvasCssHeight\n                  window.dispatchEvent(new CustomEvent('nave-position', {\n                    detail: { x: normalizedX, y: normalizedY, detected: true }\n                  }))\n\n                  // Máscara desabilitada - não desenhar\n                  // if (maskLoadedRef.current && maskImgRef.current) {\n                  //   ... código da máscara removido ...\n                  // }\n\n                  const alphaR = 0.25\n                  const prevR = prevRotRef.current\n                  const smoothedR = {\n                    x: prevR.x + (pitchDeg - prevR.x) * alphaR,\n                    y: prevR.y + (yawDeg - prevR.y) * alphaR,\n                    z: prevR.z + (rollDeg - prevR.z) * alphaR\n                  }\n                  prevRotRef.current = smoothedR\n\n                  const cameraEl = document.getElementById('camera') as any\n                  const headEl = document.getElementById('head-cube') as any\n                  if (cameraEl && headEl) {\n                    const threeCam = cameraEl.getObject3D && cameraEl.getObject3D('camera')\n                    if (threeCam && (window as any).THREE) {\n                      const THREE = (window as any).THREE\n                      const nx = (midEyesPx.x / canvasCssWidth) * 2 - 1\n                      const ny = -((midEyesPx.y / canvasCssHeight) * 2 - 1)\n                      const depth = 1.2\n\n                      const origin = new THREE.Vector3()\n                      const dir = new THREE.Vector3()\n\n                      const ndc = new THREE.Vector3(nx, ny, 0.5)\n                      ndc.unproject(threeCam)\n                      origin.copy(threeCam.position)\n                      dir.copy(ndc).sub(origin).normalize()\n\n                      const targetPos = origin.clone().add(dir.multiplyScalar(depth))\n\n                      const alphaP = 0.35\n                      const prevP = prevPosRef.current\n                      const smoothedP = {\n                        x: prevP.x + (targetPos.x - prevP.x) * alphaP,\n                        y: prevP.y + (targetPos.y - prevP.y) * alphaP,\n                        z: prevP.z + (targetPos.z - prevP.z) * alphaP\n                      }\n                      prevPosRef.current = smoothedP\n\n                      headEl.setAttribute('position', `${smoothedP.x.toFixed(3)} ${smoothedP.y.toFixed(3)} ${smoothedP.z.toFixed(3)}`)\n                      headEl.setAttribute('rotation', `${smoothedR.x.toFixed(2)} ${smoothedR.y.toFixed(2)} ${smoothedR.z.toFixed(2)}`)\n                    } else if (headEl.setAttribute) {\n                      headEl.setAttribute('rotation', `${smoothedR.x.toFixed(2)} ${smoothedR.y.toFixed(2)} ${smoothedR.z.toFixed(2)}`)\n                    }\n                  }\n                }\n              })\n            } else {\n              // Status removido\n              // Emitir que não há face detectada\n              window.dispatchEvent(new CustomEvent('nave-position', {\n                detail: { x: 0.5, y: 0.5, detected: false }\n              }))\n              if (!isMobile) {\n                ctx.strokeStyle = 'rgba(255,107,107,0.8)'\n                ctx.lineWidth = 2\n                ctx.strokeRect(10, 10, 100, 60)\n              }\n            }\n          }\n        } catch (e) {\n          console.error('FaceTracker detect error:', e)\n          // Status removido\n        }\n        scheduleNext()\n      }\n\n      const scheduleNext = () => {\n        if (isMobile) {\n          // Throttle ~12fps para reduzir CPU/bateria\n          setTimeout(() => { rafRef.current = requestAnimationFrame(detect) }, 80)\n        } else {\n          rafRef.current = requestAnimationFrame(detect)\n        }\n      }\n\n      rafRef.current = requestAnimationFrame(detect)\n\n      return () => {\n        window.removeEventListener('resize', resizeCanvas)\n      }\n    }\n\n    let cleanupResize: (() => void) | undefined\n\n    if (enabled) {\n      start().then((c) => {\n        cleanupResize = c as any\n      }).catch(err => {\n        console.error('FaceTracker start error:', err)\n        // Status removido\n      })\n    } else {\n      if (rafRef.current) {\n        cancelAnimationFrame(rafRef.current)\n        rafRef.current = null\n      }\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext('2d')\n        if (ctx) ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height)\n      }\n      // Status removido\n    }\n\n    return () => {\n      if (rafRef.current) {\n        cancelAnimationFrame(rafRef.current)\n        rafRef.current = null\n      }\n      if (cleanupResize) cleanupResize()\n      removeCanvas()\n    }\n  }, [enabled])\n\n  return null\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scene = exports.Entity = exports.options = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar nonEntityPropNames = ['children', 'events', 'primitive'];\nvar filterNonEntityPropNames = function filterNonEntityPropNames(propName) {\n  return nonEntityPropNames.indexOf(propName) === -1;\n};\n\nvar options = {\n  // React needs this because React serializes.\n  // Preact does not because Preact runs `.setAttribute` on its own.\n  runSetAttributeOnUpdates: true\n};\nexports.options = options;\n\n/**\n * Call `.setAttribute()` on the `ref`, passing prop data directly to A-Frame.\n */\n\nfunction doSetAttribute(el, props, propName) {\n  if (propName === 'className') {\n    el.setAttribute('class', props.className);\n  } else if (props[propName] && props[propName].constructor === Function) {\n    return;\n  } else {\n    el.setAttribute(propName, props[propName]);\n  }\n}\n\n/**\n * Handle diffing of previous and current attributes.\n *\n * @param {Element} el\n * @param {Object|null} prevProps - Previous props map.\n * @param {Object} props - Current props map.\n */\nfunction updateAttributes(el, prevProps, props) {\n  var propName;\n\n  if (!props || prevProps === props) {\n    return;\n  }\n\n  // Set attributes.\n  for (propName in props) {\n    if (!filterNonEntityPropNames(propName)) {\n      continue;\n    }\n    doSetAttribute(el, props, propName);\n  }\n\n  // See if attributes were removed.\n  if (prevProps) {\n    for (propName in prevProps) {\n      if (!filterNonEntityPropNames(propName)) {\n        continue;\n      }\n      if (props[propName] === undefined) {\n        el.removeAttribute(propName);\n      }\n    }\n  }\n}\n\n/**\n * Render <a-entity>.\n * Tell React to use A-Frame's .setAttribute() on the DOM element for all prop initializations\n * and updates.\n */\n\nvar Entity = exports.Entity = function (_React$Component) {\n  _inherits(Entity, _React$Component);\n\n  function Entity() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Entity);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Entity.__proto__ || Object.getPrototypeOf(Entity)).call.apply(_ref, [this].concat(args))), _this), _this.initEntity = function (el) {\n      var props = _this.props;\n      var eventName;\n\n      if (!el) {\n        return;\n      }\n\n      // Store.\n      _this.el = el;\n\n      // Attach events.\n      if (props.events) {\n        for (eventName in props.events) {\n          addEventListeners(el, eventName, props.events[eventName]);\n        }\n      }\n\n      // Update entity.\n      updateAttributes(el, null, props);\n\n      // Allow ref.\n      if (props._ref) {\n        props._ref(el);\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * In response to initial `ref` callback.\n   */\n\n\n  _createClass(Entity, [{\n    key: 'componentDidUpdate',\n\n\n    /**\n     * Handle updates after the initial render.\n     */\n    value: function componentDidUpdate(prevProps, prevState) {\n      var el = this.el;\n      var props = this.props;\n\n      // Update events.\n      updateEventListeners(el, prevProps.events, props.events);\n\n      // Update entity.\n      if (options.runSetAttributeOnUpdates) {\n        updateAttributes(el, prevProps, props);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var el = this.el;\n      var props = this.props;\n      var eventName;\n\n      if (props.events) {\n        // Remove events.\n        for (eventName in props.events) {\n          removeEventListeners(el, eventName, props.events[eventName]);\n        }\n      }\n    }\n\n    /**\n     * Render A-Frame DOM with ref: https://facebook.github.io/react/docs/refs-and-the-dom.html\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var props = this.props;\n      var elementName = this.isScene ? 'a-scene' : props.primitive || 'a-entity';\n      var propName;\n\n      // Let through props that are OK to render initially.\n      var reactProps = {};\n      for (propName in props) {\n        if (['className', 'id', 'mixin'].indexOf(propName) !== -1 || propName.indexOf('data-') === 0) {\n          reactProps[propName] = props[propName];\n        }\n      }\n\n      return _react2.default.createElement(elementName, _extends({ ref: this.initEntity }, reactProps), props.children);\n    }\n  }]);\n\n  return Entity;\n}(_react2.default.Component);\n\n/**\n * Render <a-scene>.\n * <a-scene> extends from <a-entity> in A-Frame so we reuse <Entity/>.\n */\n\n\nvar Scene = exports.Scene = function (_Entity) {\n  _inherits(Scene, _Entity);\n\n  function Scene(props) {\n    _classCallCheck(this, Scene);\n\n    var _this2 = _possibleConstructorReturn(this, (Scene.__proto__ || Object.getPrototypeOf(Scene)).call(this, props));\n\n    _this2.isScene = true;\n    return _this2;\n  }\n\n  return Scene;\n}(Entity);\n\n/**\n * Handle diffing of previous and current event maps.\n *\n * @param {Element} el\n * @param {Object} prevEvents - Previous event map.\n * @param {Object} events - Current event map.\n */\n\n\nfunction updateEventListeners(el, prevEvents, events) {\n  var eventName;\n\n  if (!prevEvents || !events || prevEvents === events) {\n    return;\n  }\n\n  for (eventName in events) {\n    // Didn't change.\n    if (prevEvents[eventName] === events[eventName]) {\n      continue;\n    }\n\n    // If changed, remove old previous event listeners.\n    if (prevEvents[eventName]) {\n      removeEventListeners(el, eventName, prevEvents[eventName]);\n    }\n\n    // Add new event listeners.\n    addEventListeners(el, eventName, events[eventName]);\n  }\n\n  // See if event handlers were removed.\n  for (eventName in prevEvents) {\n    if (!events[eventName]) {\n      removeEventListeners(el, eventName, prevEvents[eventName]);\n    }\n  }\n}\n\n/**\n * Register event handlers for an event name to ref.\n *\n * @param {Element} el - DOM element.\n * @param {string} eventName\n * @param {array|function} eventHandlers - Handler function or array of handler functions.\n */\nfunction addEventListeners(el, eventName, handlers) {\n  var handler;\n  var i;\n\n  if (!handlers) {\n    return;\n  }\n\n  // Convert to array.\n  if (handlers.constructor === Function) {\n    handlers = [handlers];\n  }\n\n  // Register.\n  for (i = 0; i < handlers.length; i++) {\n    el.addEventListener(eventName, handlers[i]);\n  }\n}\n\n/**\n * Unregister event handlers for an event name to ref.\n *\n * @param {Element} el - DOM element.\n * @param {string} eventName\n * @param {array|function} eventHandlers - Handler function or array of handler functions.\n */\nfunction removeEventListeners(el, eventName, handlers) {\n  var handler;\n  var i;\n\n  if (!handlers) {\n    return;\n  }\n\n  // Convert to array.\n  if (handlers.constructor === Function) {\n    handlers = [handlers];\n  }\n\n  // Unregister.\n  for (i = 0; i < handlers.length; i++) {\n    el.removeEventListener(eventName, handlers[i]);\n  }\n}","import { useEffect, useRef, useImperativeHandle, forwardRef, useState } from 'react'\nimport { Entity, Scene } from 'aframe-react'\n\ninterface ARSceneAFrameProps {\n  className?: string\n  onSceneReady?: () => void\n  cameraFacing?: 'environment' | 'user'\n}\n\nexport interface ARSceneAFrameRef {\n  addEntity: (data: any) => string\n  removeEntity: (id: string) => void\n  getScene: () => any\n  captureScreenshot: () => string\n  setCameraFacing: (facing: 'environment' | 'user') => void\n}\n\nexport const ARSceneAFrame = forwardRef<ARSceneAFrameRef, ARSceneAFrameProps>(({\n  className = '',\n  onSceneReady,\n  cameraFacing: _cameraFacing = 'environment'\n}, ref) => {\n  const sceneRef = useRef<any>(null)\n  const [entities, setEntities] = useState<Array<{ id: string; data: any }>>([])\n  const [sceneReady, setSceneReady] = useState(false)\n\n  useEffect(() => {\n    // Aguardar o A-Frame estar pronto\n    const checkAFrame = () => {\n      if (typeof window !== 'undefined' && (window as any).AFRAME) {\n        setSceneReady(true)\n        if (onSceneReady) {\n          onSceneReady()\n        }\n\n        requestAnimationFrame(() => {\n          const vrButton = document.querySelector('.a-enter-vr-button') as HTMLElement | null\n          if (vrButton) {\n            vrButton.style.display = 'none'\n            vrButton.style.visibility = 'hidden'\n            vrButton.style.pointerEvents = 'none'\n          }\n\n          // A permissão de orientação já foi solicitada na LoadingScreen\n          // Apenas verificar se está disponível\n          if (typeof DeviceOrientationEvent !== 'undefined') {\n            if ((DeviceOrientationEvent as any).requestPermission) {\n              console.log('DeviceOrientationEvent requer permissão (já solicitada na tela de loading)')\n            } else {\n              console.log('DeviceOrientationEvent disponível (não requer permissão)')\n            }\n          }\n        })\n      } else {\n        // Se não estiver pronto, tentar novamente\n        setTimeout(checkAFrame, 100)\n      }\n    }\n\n    checkAFrame()\n  }, [onSceneReady])\n\n  useImperativeHandle(ref, () => ({\n    addEntity: (data: any) => {\n      const id = `entity-${Date.now()}`\n      setEntities(prev => [...prev, { id, data }])\n      return id\n    },\n    removeEntity: (id: string) => {\n      setEntities(prev => prev.filter(e => e.id !== id))\n    },\n    getScene: () => {\n      if (typeof window !== 'undefined' && (window as any).AFRAME) {\n        const sceneEl = document.querySelector('a-scene')\n        return sceneEl || sceneRef.current\n      }\n      return sceneRef.current\n    },\n    captureScreenshot: () => {\n      if (typeof window !== 'undefined' && (window as any).AFRAME) {\n        const sceneEl = document.querySelector('a-scene')\n        if (sceneEl) {\n          const renderer = (sceneEl as any).renderer\n          if (renderer && renderer.domElement) {\n            return renderer.domElement.toDataURL('image/png')\n          }\n        }\n      }\n      return ''\n    },\n    setCameraFacing: (facing: 'environment' | 'user') => {\n      // A câmera é gerenciada pelo ARScreen, apenas aceitar a mudança\n      console.log('Camera facing changed to:', facing)\n    }\n  }), [])\n\n  const sceneProps: any = {\n    embedded: true,\n    'vr-mode-ui': 'enabled: false',\n    'device-orientation-permission-ui': 'enabled: true',\n    renderer: 'alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;',\n    webxr: 'enabled: false',\n    background: 'transparent: true',\n    'stats': 'false'\n  }\n\n  return (\n    <div className={`ar-scene-aframe ${className}`} style={{ width: '100%', height: '100%', position: 'relative', zIndex: 1 }}>\n      {sceneReady && (\n        <Scene {...sceneProps}>\n          {/* Assets for textures */}\n          <Entity primitive=\"a-assets\">\n            <img id=\"skyTexture\" src=\"/teste-aframe-ar/assets/images/SKY.jpg\" crossOrigin=\"anonymous\" />\n          </Entity>\n\n          {/* Skybox using the SKY.png texture with transparency */}\n          <Entity\n            primitive=\"a-sky\"\n            rotation=\"0 -90 0\"\n            material={{ src: '#skyTexture', opacity: 0.5, transparent: true }}\n          />\n          <Entity\n            id=\"camera\"\n            camera={{ active: true }}\n            lookControls={{\n              enabled: true,\n              reverseMouseDrag: false,\n              touchEnabled: true,\n              magicWindowTrackingEnabled: true,\n              pointerLockEnabled: false,\n              touchSensitivity: 1,\n              mouseSensitivity: 1\n            }}\n            wasdControls={{\n              enabled: false\n            }}\n            device-orientation-permission-ui={{\n              enabled: true\n            }}\n            position=\"0 1.6 0\"\n          />\n\n          <Entity light={{ type: 'ambient', color: '#888' }} />\n\n          <Entity\n            light={{\n              type: 'directional',\n              color: '#fff',\n              intensity: 0.6\n            }}\n            position=\"1 1 1\"\n          />\n\n          {entities.map(entity => (\n            <Entity\n              key={entity.id}\n              {...entity.data}\n            />\n          ))}\n\n          {/* Cube that follows head rotation */}\n          <Entity\n            id=\"head-cube\"\n            geometry={{ primitive: 'box', width: 0.3, height: 0.3, depth: 0.3 }}\n            material={{ color: '#FF6B6B', opacity: 0.9, transparent: true }}\n            position=\"0 1 -1.2\"\n            rotation=\"0 0 0\"\n          />\n\n          {/* Example cube can remain commented or removed if not needed */}\n          {false && (\n            <Entity\n              id=\"default-cube\"\n              geometry={{ primitive: 'box', width: 0.6, height: 0.6, depth: 0.6 }}\n              material={{ color: '#4CC3D9' }}\n              position=\"0 1 -1.5\"\n              animation={{\n                property: 'rotation',\n                to: '0 360 0',\n                loop: true,\n                dur: 8000\n              }}\n            />\n          )}\n        </Scene>\n      )}\n      {!sceneReady && (\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '100%',\n          color: '#fff'\n        }}>\n          Carregando A-Frame...\n        </div>\n      )}\n    </div>\n  )\n})\n\nARSceneAFrame.displayName = 'ARSceneAFrame'\n\n","import React, { useEffect, useRef, useState, useCallback } from 'react'\nimport { FaceTracker } from '../FaceTracker'\nimport { ARSceneAFrame } from '../ARSceneAFrame'\nimport type { ScreenType } from '../../types/screens'\n\ninterface ARScreenProps {\n  onNavigate: (screen: ScreenType) => void\n}\n\ninterface FallingObject {\n  id: string\n  type: 'star' | 'comet'\n  x: number\n  y: number\n  speed: number\n}\n\nexport const ARScreen: React.FC<ARScreenProps> = ({\n  onNavigate\n}) => {\n  const gameCanvasRef = useRef<HTMLCanvasElement>(null)\n  const animationFrameRef = useRef<number | null>(null)\n  const [score, setScore] = useState(0)\n  const [timeLeft, setTimeLeft] = useState(60) // 1 minuto em segundos\n  const [gameStarted, setGameStarted] = useState(false)\n  const [gameOver, setGameOver] = useState(false)\n  const [progress, setProgress] = useState(0)\n  const [feedback, setFeedback] = useState<'acerto' | 'erro' | null>(null)\n  const [arLoading, setArLoading] = useState(true)\n  const [countdown, setCountdown] = useState<number | null>(null)\n  const [showResultModal, setShowResultModal] = useState(false)\n  const [resultType, setResultType] = useState<'acerto' | 'erro' | null>(null)\n\n  const fallingObjectsRef = useRef<FallingObject[]>([])\n  const navePositionRef = useRef({ x: 0.5, y: 0.5 })\n  const faceDetectedRef = useRef(false)\n  const videoRef = useRef<HTMLVideoElement | null>(null)\n  const mediaStreamRef = useRef<MediaStream | null>(null)\n\n  // Mostrar vídeo e garantir que está pronto\n  useEffect(() => {\n    async function setupCamera() {\n      try {\n        // Verificar se já existe vídeo e stream\n        let video = document.getElementById('arjs-video') as HTMLVideoElement\n        if (video && video.srcObject) {\n          // Vídeo já existe, apenas mostrar\n          video.classList.add('ar-video-visible')\n\n          // Aguardar FaceTracker estar pronto\n          await new Promise<void>((resolve) => {\n            const checkFaceTracker = () => {\n              const canvas = document.getElementById('face-tracker-overlay')\n              if (canvas || video.readyState >= 2) {\n                resolve()\n              } else {\n                setTimeout(checkFaceTracker, 100)\n              }\n            }\n            checkFaceTracker()\n          })\n\n          setArLoading(false)\n          return\n        }\n\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            width: { ideal: 1280 },\n            height: { ideal: 720 },\n            facingMode: { ideal: 'user' } // Câmera frontal para face tracking\n          },\n          audio: false\n        })\n\n        if (!video) {\n          video = document.createElement('video')\n          video.setAttribute('id', 'arjs-video')\n          video.setAttribute('playsinline', '')\n          video.setAttribute('autoplay', '')\n          video.muted = true\n          video.style.position = 'fixed'\n          video.style.top = '0'\n          video.style.left = '0'\n          video.style.width = '100vw'\n          video.style.height = '100vh'\n          video.style.objectFit = 'cover'\n          video.style.zIndex = '0'\n          video.classList.add('ar-video-visible')\n          document.body.appendChild(video)\n        }\n\n        // Limpar stream anterior se existir\n        if (video.srcObject) {\n          const oldStream = video.srcObject as MediaStream\n          oldStream.getTracks().forEach(t => t.stop())\n        }\n\n        video.srcObject = stream\n        mediaStreamRef.current = stream\n        videoRef.current = video\n\n        // Aguardar vídeo estar pronto antes de play\n        const playVideo = async () => {\n          try {\n            if (video.readyState >= 2) {\n              await video.play()\n            } else {\n              await new Promise<void>((resolve, reject) => {\n                const onLoadedMetadata = () => {\n                  video.removeEventListener('loadedmetadata', onLoadedMetadata)\n                  video.removeEventListener('error', onError)\n                  video.play().then(resolve).catch(reject)\n                }\n                const onError = () => {\n                  video.removeEventListener('loadedmetadata', onLoadedMetadata)\n                  video.removeEventListener('error', onError)\n                  reject(new Error('Video load error'))\n                }\n                video.addEventListener('loadedmetadata', onLoadedMetadata, { once: true })\n                video.addEventListener('error', onError, { once: true })\n                if (video.readyState >= 1) {\n                  video.play().then(resolve).catch(reject)\n                }\n              })\n            }\n          } catch (playErr) {\n            // Ignorar erro de play se já estiver rodando\n            if (video.paused === false) {\n              return\n            }\n            console.warn('Erro ao dar play no vídeo:', playErr)\n          }\n        }\n\n        await playVideo()\n\n        // Aguardar FaceTracker estar pronto\n        await new Promise<void>((resolve) => {\n          const checkFaceTracker = () => {\n            const canvas = document.getElementById('face-tracker-overlay')\n            if (canvas || video.readyState >= 2) {\n              resolve()\n            } else {\n              setTimeout(checkFaceTracker, 100)\n            }\n          }\n          checkFaceTracker()\n        })\n\n        setArLoading(false)\n      } catch (err) {\n        console.error('Erro ao inicializar câmera:', err)\n        // Mesmo com erro, tentar continuar\n        setArLoading(false)\n      }\n    }\n\n    setupCamera()\n\n    return () => {\n      // Não limpar aqui - deixar o vídeo para o FaceTracker\n    }\n  }, [])\n\n  // Contagem regressiva após loading\n  useEffect(() => {\n    if (!arLoading && !gameStarted && countdown === null) {\n      setCountdown(3)\n    }\n  }, [arLoading, gameStarted, countdown])\n\n  useEffect(() => {\n    if (countdown === null || countdown <= 0) {\n      if (countdown === 0) {\n        // \"Vai!\" - iniciar jogo\n        setTimeout(() => {\n          setCountdown(null)\n          setGameStarted(true)\n        }, 500)\n      }\n      return\n    }\n\n    const timer = setTimeout(() => {\n      setCountdown(countdown - 1)\n    }, 1000)\n\n    return () => clearTimeout(timer)\n  }, [countdown])\n\n  // Get base URL\n  const getBaseUrl = () => {\n    const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n    const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\n    return b === '/' ? '' : b.endsWith('/') ? b.slice(0, -1) : b\n  }\n\n  const baseUrl = getBaseUrl()\n  const normalizePath = (path: string) => {\n    if (baseUrl === '') {\n      return path.startsWith('/') ? path : `/${path}`\n    }\n    const cleanPath = path.startsWith('/') ? path.slice(1) : path\n    return `${baseUrl}/${cleanPath}`\n  }\n\n  const images = {\n    nave: normalizePath('assets/images/sprites/nave.png'),\n    estrela: normalizePath('assets/images/sprites/estrela.png'),\n    cometa: normalizePath('assets/images/sprites/cometa.png'),\n    barraProgresso: normalizePath('assets/images/sprites/barra-progresso.png'),\n    contador: normalizePath('assets/images/sprites/contador.png'),\n    feedbackAcerto: normalizePath('assets/images/sprites/feedback-acerto.png'),\n    feedbackErro: normalizePath('assets/images/sprites/feedback-erro.png'),\n    modalAcerto: normalizePath('assets/images/modal-acerto.png'),\n    modalErro: normalizePath('assets/images/modal-erro.png'),\n    btnRegistrar: normalizePath('assets/images/btn-registrar.png'),\n    btnInicio: normalizePath('assets/images/btn-inicio.png'),\n    btnVoltar: normalizePath('assets/images/btn-voltar.png')\n  }\n\n  const imagesLoadedRef = useRef<Record<string, HTMLImageElement>>({})\n\n  // Carregar imagens\n  useEffect(() => {\n    const loadImages = async () => {\n      const promises = Object.entries(images).map(([key, src]) => {\n        return new Promise<void>((resolve) => {\n          const img = new Image()\n          img.onload = () => {\n            imagesLoadedRef.current[key] = img\n            resolve()\n          }\n          img.onerror = () => {\n            console.warn(`Failed to load image: ${src}`)\n            resolve()\n          }\n          img.src = src\n        })\n      })\n      await Promise.all(promises)\n      // Não setar gameStarted aqui - será setado após countdown\n    }\n    loadImages()\n  }, [])\n\n  // Timer\n  useEffect(() => {\n    if (!gameStarted || gameOver) return\n\n    const interval = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          setGameOver(true)\n          return 0\n        }\n        return prev - 1\n      })\n    }, 1000)\n\n    return () => clearInterval(interval)\n  }, [gameStarted, gameOver])\n\n  // Detectar posição do nariz através do evento customizado do FaceTracker\n  useEffect(() => {\n    const handleNosePosition = (event: CustomEvent<{ x: number; y: number; detected: boolean }>) => {\n      const { x, y, detected } = event.detail\n      faceDetectedRef.current = detected\n      if (detected) {\n        navePositionRef.current = { x, y }\n      }\n    }\n\n    window.addEventListener('nave-position' as any, handleNosePosition as EventListener)\n    return () => {\n      window.removeEventListener('nave-position' as any, handleNosePosition as EventListener)\n    }\n  }, [])\n\n  // Criar objetos caindo\n  const createFallingObject = useCallback(() => {\n    const type = Math.random() > 0.5 ? 'star' : 'comet'\n    const obj: FallingObject = {\n      id: Math.random().toString(36).substr(2, 9),\n      type,\n      x: Math.random() * 0.8 + 0.1, // Entre 10% e 90% da largura\n      y: -0.1, // Começa acima da tela\n      speed: 0.0035 + Math.random() * 0.003 // Velocidade ajustada (um pouco mais rápido que 0.002)\n    }\n    fallingObjectsRef.current.push(obj)\n  }, [])\n\n  // Spawn de objetos\n  useEffect(() => {\n    if (!gameStarted || gameOver) return\n\n    const spawnInterval = setInterval(() => {\n      createFallingObject()\n    }, 1000) // Spawn a cada 1 segundo\n\n    return () => clearInterval(spawnInterval)\n  }, [gameStarted, gameOver, createFallingObject])\n\n  // Detectar colisões\n  const checkCollisions = useCallback(() => {\n    const nave = navePositionRef.current\n    const naveRadius = 0.08 // Raio de colisão da nave (aumentado proporcionalmente)\n\n    fallingObjectsRef.current = fallingObjectsRef.current.filter((obj) => {\n      const dx = obj.x - nave.x\n      const dy = obj.y - nave.y\n      const distance = Math.sqrt(dx * dx + dy * dy)\n\n      if (distance < naveRadius + 0.03) {\n        // Colisão detectada\n        if (obj.type === 'star') {\n          setScore((prev) => prev + 10)\n          setProgress((prev) => Math.min(100, prev + 5))\n          setFeedback('acerto')\n          setTimeout(() => setFeedback(null), 500)\n        } else {\n          setScore((prev) => Math.max(0, prev - 5))\n          setProgress((prev) => Math.max(0, prev - 5))\n          setFeedback('erro')\n          setTimeout(() => setFeedback(null), 500)\n        }\n        return false // Remove objeto\n      }\n\n      // Remove se saiu da tela\n      if (obj.y > 1.1) {\n        return false\n      }\n\n      return true\n    })\n  }, [])\n\n  // Loop do jogo\n  useEffect(() => {\n    if (!gameStarted || gameOver) return\n\n    const canvas = gameCanvasRef.current\n    if (!canvas) return\n\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n\n    const resizeCanvas = () => {\n      canvas.width = window.innerWidth\n      canvas.height = window.innerHeight\n    }\n    resizeCanvas()\n    window.addEventListener('resize', resizeCanvas)\n\n    const gameLoop = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n      // Atualizar posição dos objetos\n      fallingObjectsRef.current.forEach((obj) => {\n        obj.y += obj.speed\n      })\n\n      // Desenhar nave (mesma posição da máscara/nariz)\n      const naveImg = imagesLoadedRef.current.nave\n      if (naveImg) {\n        const naveX = navePositionRef.current.x * canvas.width\n        const naveY = navePositionRef.current.y * canvas.height\n        const naveSize = canvas.width * 0.25 // Aumentado de 0.15 para 0.25\n        ctx.drawImage(\n          naveImg,\n          naveX - naveSize / 2,\n          naveY - naveSize / 2,\n          naveSize,\n          naveSize\n        )\n      }\n\n      // Desenhar objetos caindo\n      fallingObjectsRef.current.forEach((obj) => {\n        const img = imagesLoadedRef.current[obj.type === 'star' ? 'estrela' : 'cometa']\n        if (img) {\n          const objX = obj.x * canvas.width\n          const objY = obj.y * canvas.height\n          const objSize = canvas.width * 0.12 // Aumentado de 0.08 para 0.12\n          ctx.drawImage(\n            img,\n            objX - objSize / 2,\n            objY - objSize / 2,\n            objSize,\n            objSize\n          )\n        }\n      })\n\n      // Verificar colisões\n      checkCollisions()\n\n      animationFrameRef.current = requestAnimationFrame(gameLoop)\n    }\n\n    gameLoop()\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas)\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current)\n      }\n    }\n  }, [gameStarted, gameOver, checkCollisions])\n\n  // Mostrar modal de resultado quando terminar\n  useEffect(() => {\n    if (gameOver && timeLeft === 0 && !showResultModal) {\n      // Determinar resultado baseado no progresso (acerto se >= 50%)\n      const isAcerto = progress >= 50\n      setResultType(isAcerto ? 'acerto' : 'erro')\n      setTimeout(() => {\n        setShowResultModal(true)\n      }, 1000)\n    }\n  }, [gameOver, timeLeft, progress, showResultModal])\n\n  // Reiniciar jogo\n  const restartGame = () => {\n    setShowResultModal(false)\n    setResultType(null)\n    setScore(0)\n    setTimeLeft(60)\n    setProgress(0)\n    setFeedback(null)\n    setGameOver(false)\n    setGameStarted(false)\n    fallingObjectsRef.current = []\n    // Reiniciar contagem regressiva\n    setCountdown(3)\n  }\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60)\n    const secs = seconds % 60\n    return `${mins}:${secs.toString().padStart(2, '0')}`\n  }\n\n  return (\n    <div className=\"ar-game-screen\">\n      {/* Loading overlay */}\n      {arLoading && (\n        <div className=\"ar-loading-overlay\">\n          <div className=\"ar-loading-content\">\n            <div className=\"ar-loading-spinner\"></div>\n            <p className=\"ar-loading-text\">Preparando AR...</p>\n          </div>\n        </div>\n      )}\n\n      {/* Countdown overlay */}\n      {countdown !== null && (\n        <div className=\"ar-countdown-overlay\">\n          <div className=\"ar-countdown-content\">\n            {countdown > 0 ? (\n              <div className=\"ar-countdown-number\">{countdown}</div>\n            ) : (\n              <div className=\"ar-countdown-go\">Vai!</div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* A-Frame Scene */}\n      <ARSceneAFrame\n        cameraFacing=\"user\"\n      />\n\n      {/* Canvas do jogo */}\n      <canvas\n        ref={gameCanvasRef}\n        className=\"ar-game-canvas\"\n      />\n\n      {/* Face Tracker */}\n      <FaceTracker enabled={true} />\n\n      {/* Contador de tempo */}\n      <div className=\"ar-timer-container\">\n        <img\n          src={images.contador}\n          alt=\"Timer\"\n          className=\"ar-timer-bg\"\n        />\n        <div className=\"ar-timer-text\">{formatTime(timeLeft)}</div>\n      </div>\n\n      {/* Barra de progresso */}\n      <div className=\"ar-progress-container\">\n        <img\n          src={images.barraProgresso}\n          alt=\"Progress Bar\"\n          className=\"ar-progress-bg\"\n        />\n        <div\n          className=\"ar-progress-fill\"\n          style={{ width: `${progress}%` }}\n        />\n      </div>\n\n      {/* Feedback */}\n      {feedback && (\n        <div className={`ar-feedback ar-feedback-${feedback}`}>\n          <img\n            src={feedback === 'acerto' ? images.feedbackAcerto : images.feedbackErro}\n            alt={feedback}\n            className=\"ar-feedback-image\"\n          />\n        </div>\n      )}\n\n      {/* Pontuação */}\n      <div className=\"ar-score\">Pontos: {score}</div>\n\n      {/* Modal de Resultado */}\n      {showResultModal && resultType && (\n        <div className=\"ar-result-modal-overlay\">\n          <div className=\"ar-result-modal-content\">\n            <img\n              src={resultType === 'acerto' ? images.modalAcerto : images.modalErro}\n              alt={resultType === 'acerto' ? 'Acerto' : 'Erro'}\n              className=\"ar-result-modal-image\"\n            />\n\n            {/* Botões para acerto */}\n            {resultType === 'acerto' && (\n              <div className=\"ar-result-modal-buttons\">\n                <button\n                  className=\"ar-result-button ar-result-button-registrar\"\n                  onClick={() => {\n                    setShowResultModal(false)\n                    onNavigate('selfie')\n                  }}\n                  style={{\n                    backgroundImage: `url(${images.btnRegistrar})`,\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat',\n                    backgroundPosition: 'center'\n                  }}\n                />\n                <button\n                  className=\"ar-result-button ar-result-button-inicio\"\n                  onClick={() => {\n                    setShowResultModal(false)\n                    onNavigate('cover')\n                  }}\n                  style={{\n                    backgroundImage: `url(${images.btnInicio})`,\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat',\n                    backgroundPosition: 'center'\n                  }}\n                />\n              </div>\n            )}\n\n            {/* Botão para erro */}\n            {resultType === 'erro' && (\n              <div className=\"ar-result-modal-buttons\">\n                <button\n                  className=\"ar-result-button ar-result-button-voltar\"\n                  onClick={() => {\n                    restartGame()\n                  }}\n                  style={{\n                    backgroundImage: `url(${images.btnVoltar})`,\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat',\n                    backgroundPosition: 'center'\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport type { ScreenType } from '../../types/screens'\n\ninterface SettingsScreenProps {\n  onNavigate: (screen: ScreenType) => void\n  onSettingsChange?: (settings: any) => void\n}\n\ninterface Settings {\n  quality: 'low' | 'medium' | 'high'\n  enableSound: boolean\n  enableVibration: boolean\n  autoSave: boolean\n  language: 'pt-BR' | 'en-US' | 'es-ES'\n}\n\nconst DEFAULT_SETTINGS: Settings = {\n  quality: 'high',\n  enableSound: true,\n  enableVibration: true,\n  autoSave: true,\n  language: 'pt-BR'\n}\n\nexport const SettingsScreen: React.FC<SettingsScreenProps> = ({\n  onNavigate,\n  onSettingsChange\n}) => {\n  const [settings, setSettings] = useState<Settings>(DEFAULT_SETTINGS)\n\n  const handleSettingChange = (key: keyof Settings, value: any) => {\n    const newSettings = { ...settings, [key]: value }\n    setSettings(newSettings)\n    onSettingsChange?.(newSettings)\n  }\n\n  const handleBack = () => {\n    onNavigate('ar')\n  }\n\n  const handleReset = () => {\n    setSettings(DEFAULT_SETTINGS)\n    onSettingsChange?.(DEFAULT_SETTINGS)\n  }\n\n  return (\n    <div className=\"settings-screen\">\n      <div className=\"settings-header\">\n        <button \n          className=\"settings-back-button\"\n          onClick={handleBack}\n        >\n          ← Voltar\n        </button>\n        \n        <h1 className=\"settings-title\">Configurações</h1>\n      </div>\n\n      <div className=\"settings-content\">\n        <div className=\"settings-section\">\n          <h3>Qualidade</h3>\n          <select \n            value={settings.quality}\n            onChange={(e) => handleSettingChange('quality', e.target.value)}\n            className=\"settings-select\"\n          >\n            <option value=\"low\">Baixa</option>\n            <option value=\"medium\">Média</option>\n            <option value=\"high\">Alta</option>\n          </select>\n        </div>\n\n        <div className=\"settings-section\">\n          <h3>Som</h3>\n          <label className=\"settings-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={settings.enableSound}\n              onChange={(e) => handleSettingChange('enableSound', e.target.checked)}\n            />\n            <span className=\"toggle-slider\"></span>\n            Habilitar som\n          </label>\n        </div>\n\n        <div className=\"settings-section\">\n          <h3>Vibração</h3>\n          <label className=\"settings-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={settings.enableVibration}\n              onChange={(e) => handleSettingChange('enableVibration', e.target.checked)}\n            />\n            <span className=\"toggle-slider\"></span>\n            Habilitar vibração\n          </label>\n        </div>\n\n        <div className=\"settings-section\">\n          <h3>Salvamento</h3>\n          <label className=\"settings-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={settings.autoSave}\n              onChange={(e) => handleSettingChange('autoSave', e.target.checked)}\n            />\n            <span className=\"toggle-slider\"></span>\n            Salvar automaticamente\n          </label>\n        </div>\n\n        <div className=\"settings-section\">\n          <h3>Idioma</h3>\n          <select \n            value={settings.language}\n            onChange={(e) => handleSettingChange('language', e.target.value)}\n            className=\"settings-select\"\n          >\n            <option value=\"pt-BR\">Português</option>\n            <option value=\"en-US\">English</option>\n            <option value=\"es-ES\">Español</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"settings-footer\">\n        <button \n          className=\"settings-button secondary\"\n          onClick={handleReset}\n        >\n          Restaurar Padrões\n        </button>\n        \n        <button \n          className=\"settings-button primary\"\n          onClick={handleBack}\n        >\n          Salvar\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport type { ScreenType } from '../../types/screens'\n\ninterface AboutScreenProps {\n  onNavigate: (screen: ScreenType) => void\n  appName?: string\n  version?: string\n  description?: string\n  developer?: string\n}\n\nexport const AboutScreen: React.FC<AboutScreenProps> = ({\n  onNavigate,\n  appName = 'Realidade Aumentada',\n  version = '1.0.0',\n  description = 'Uma aplicação inovadora de realidade aumentada desenvolvida com tecnologias modernas.',\n  developer = 'Desenvolvedor AR'\n}) => {\n  const handleBack = () => {\n    onNavigate('cover')\n  }\n\n  return (\n    <div className=\"about-screen\">\n      <div className=\"about-header\">\n        <button \n          className=\"about-back-button\"\n          onClick={handleBack}\n        >\n          ← Voltar\n        </button>\n        \n        <h1 className=\"about-title\">Sobre</h1>\n      </div>\n\n      <div className=\"about-content\">\n        <div className=\"about-app-info\">\n          <h2 className=\"app-name\">{appName}</h2>\n          <p className=\"app-version\">Versão {version}</p>\n          <p className=\"app-description\">{description}</p>\n        </div>\n\n        <div className=\"about-section\">\n          <h3>Desenvolvedor</h3>\n          <p>{developer}</p>\n        </div>\n\n        <div className=\"about-section\">\n          <h3>Tecnologias</h3>\n          <ul className=\"tech-list\">\n            <li>React 18</li>\n            <li>TypeScript</li>\n            <li>A-Frame</li>\n            <li>AR.js</li>\n            <li>Vite</li>\n          </ul>\n        </div>\n\n        <div className=\"about-section\">\n          <h3>Funcionalidades</h3>\n          <ul className=\"features-list\">\n            <li>Renderização 3D em tempo real</li>\n            <li>Adição de objetos 3D</li>\n            <li>Captura de screenshots</li>\n            <li>Interface responsiva</li>\n            <li>Suporte a gestos</li>\n          </ul>\n        </div>\n\n        <div className=\"about-section\">\n          <h3>Licença</h3>\n          <p>MIT License - Código aberto</p>\n        </div>\n      </div>\n\n      <div className=\"about-footer\">\n        <button \n          className=\"about-button\"\n          onClick={handleBack}\n        >\n          Voltar ao Início\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\r\nimport type { ScreenType } from '../../types/screens'\r\n\r\ninterface FinalScreenProps {\r\n    onNavigate: (screen: ScreenType) => void\r\n}\r\n\r\nexport const FinalScreen: React.FC<FinalScreenProps> = ({ onNavigate }) => {\r\n    const handleRestart = () => {\r\n        onNavigate('cover')\r\n    }\r\n\r\n    return (\r\n        <div className=\"final-screen\">\r\n            <div className=\"final-content\">\r\n                <div className=\"final-header\">\r\n                    <div className=\"final-icon\">🎉</div>\r\n                    <h1 className=\"final-title\">Parabéns!</h1>\r\n                    <p className=\"final-subtitle\">Você completou a experiência de Realidade Aumentada</p>\r\n                </div>\r\n\r\n                <div className=\"final-body\">\r\n                    <div className=\"final-message\">\r\n                        <p>Esperamos que você tenha aproveitado essa jornada interativa!</p>\r\n                    </div>\r\n\r\n                    <div className=\"final-stats\">\r\n                        <div className=\"stat-item\">\r\n                            <div className=\"stat-value\">✓</div>\r\n                            <div className=\"stat-label\">Experiência Completa</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"final-footer\">\r\n                    <button\r\n                        className=\"final-button primary\"\r\n                        onClick={handleRestart}\r\n                    >\r\n                        Jogar Novamente\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport type { ScreenType } from '../../types/screens'\r\n\r\ninterface SelfieScreenProps {\r\n    onNavigate: (screen: ScreenType) => void\r\n}\r\n\r\nexport const SelfieScreen: React.FC<SelfieScreenProps> = () => {\r\n    const videoRef = useRef<HTMLVideoElement | null>(null)\r\n    const mediaStreamRef = useRef<MediaStream | null>(null)\r\n    const [isCapturing, setIsCapturing] = useState(false)\r\n\r\n    // Get base URL\r\n    const getBaseUrl = () => {\r\n        const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\r\n        const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\r\n        return b === '/' ? '' : b.endsWith('/') ? b.slice(0, -1) : b\r\n    }\r\n\r\n    const baseUrl = getBaseUrl()\r\n    const normalizePath = (path: string) => {\r\n        if (baseUrl === '') {\r\n            return path.startsWith('/') ? path : `/${path}`\r\n        }\r\n        const cleanPath = path.startsWith('/') ? path.slice(1) : path\r\n        return `${baseUrl}/${cleanPath}`\r\n    }\r\n\r\n    const topImage = normalizePath('assets/images/selfie-top.png')\r\n    const bottomImage = normalizePath('assets/images/selfie-bottom.png')\r\n    const cameraIcon = normalizePath('assets/images/camera-icon.png')\r\n\r\n    // Setup camera\r\n    useEffect(() => {\r\n        async function setupCamera() {\r\n            try {\r\n                // Verificar se já existe vídeo\r\n                let video = document.getElementById('selfie-video') as HTMLVideoElement\r\n                if (video && video.srcObject) {\r\n                    video.classList.add('selfie-video-visible')\r\n                    videoRef.current = video\r\n                    return\r\n                }\r\n\r\n                const stream = await navigator.mediaDevices.getUserMedia({\r\n                    video: {\r\n                        width: { ideal: 1280 },\r\n                        height: { ideal: 720 },\r\n                        facingMode: { ideal: 'user' } // Câmera frontal para selfie\r\n                    },\r\n                    audio: false\r\n                })\r\n\r\n                if (!video) {\r\n                    video = document.createElement('video')\r\n                    video.setAttribute('id', 'selfie-video')\r\n                    video.setAttribute('playsinline', '')\r\n                    video.setAttribute('autoplay', '')\r\n                    video.muted = true\r\n                    video.style.position = 'fixed'\r\n                    video.style.top = '0'\r\n                    video.style.left = '0'\r\n                    video.style.width = '100vw'\r\n                    video.style.height = '100vh'\r\n                    video.style.objectFit = 'cover'\r\n                    video.style.zIndex = '0'\r\n                    video.classList.add('selfie-video-visible')\r\n                    document.body.appendChild(video)\r\n                }\r\n\r\n                video.srcObject = stream\r\n                mediaStreamRef.current = stream\r\n                videoRef.current = video\r\n\r\n                await video.play()\r\n            } catch (err) {\r\n                console.error('Erro ao inicializar câmera:', err)\r\n            }\r\n        }\r\n\r\n        setupCamera()\r\n\r\n        return () => {\r\n            // Não limpar aqui - deixar o vídeo para ser usado\r\n        }\r\n    }, [])\r\n\r\n    // Capturar foto\r\n    const capturePhoto = () => {\r\n        if (!videoRef.current || isCapturing) return\r\n\r\n        setIsCapturing(true)\r\n\r\n        // Criar canvas temporário para capturar\r\n        const video = videoRef.current\r\n        const canvas = document.createElement('canvas')\r\n        canvas.width = video.videoWidth || video.clientWidth\r\n        canvas.height = video.videoHeight || video.clientHeight\r\n        const ctx = canvas.getContext('2d')\r\n\r\n        if (ctx) {\r\n            // Desenhar vídeo no canvas\r\n            ctx.drawImage(video, 0, 0, canvas.width, canvas.height)\r\n\r\n            // Converter para blob e fazer download\r\n            canvas.toBlob((blob) => {\r\n                if (blob) {\r\n                    const url = URL.createObjectURL(blob)\r\n                    const link = document.createElement('a')\r\n                    link.href = url\r\n                    link.download = `selfie-${Date.now()}.png`\r\n                    document.body.appendChild(link)\r\n                    link.click()\r\n                    document.body.removeChild(link)\r\n                    URL.revokeObjectURL(url)\r\n                }\r\n                setIsCapturing(false)\r\n            }, 'image/png')\r\n        } else {\r\n            setIsCapturing(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"selfie-screen\">\r\n            {/* Video element será criado dinamicamente */}\r\n\r\n            {/* Top overlay */}\r\n            <div className=\"selfie-top-overlay\">\r\n                <img\r\n                    src={topImage}\r\n                    alt=\"Top\"\r\n                    className=\"selfie-top-img\"\r\n                />\r\n            </div>\r\n\r\n            {/* Bottom overlay */}\r\n            <div className=\"selfie-bottom-overlay\">\r\n                <img\r\n                    src={bottomImage}\r\n                    alt=\"Bottom\"\r\n                    className=\"selfie-bottom-img\"\r\n                />\r\n            </div>\r\n\r\n            {/* Camera button */}\r\n            <button\r\n                className=\"selfie-camera-button\"\r\n                onClick={capturePhoto}\r\n                disabled={isCapturing}\r\n                style={{\r\n                    backgroundImage: `url(${cameraIcon})`,\r\n                    backgroundSize: 'contain',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    backgroundPosition: 'center'\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react'\nimport { LoadingScreen } from './screens/LoadingScreen'\nimport { CoverScreen } from './screens/CoverScreen'\nimport { TutorialScreen } from './screens/TutorialScreen'\nimport { ARScreen } from './screens/ARScreen'\nimport { SettingsScreen } from './screens/SettingsScreen'\nimport { AboutScreen } from './screens/AboutScreen'\nimport { FinalScreen } from './screens/FinalScreen'\nimport { SelfieScreen } from './screens/SelfieScreen'\n// import { RADataDisplay } from './RADataDisplay' // Removido\nimport type { ScreenType, TransitionType, TransitionDirection } from '../types/screens'\nimport '../styles/screens.css'\n\ninterface ScreenManagerProps {\n  initialScreen: ScreenType\n  appConfig: {\n    title: string\n    subtitle: string\n    version: string\n    developer: string\n  }\n  // Configuração de transição padrão\n  defaultTransition?: TransitionType\n  defaultDirection?: TransitionDirection\n}\n\n// Transições\n/*\nfade: 'fade',\nslide-horizontal: 'slide-horizontal',\nslide-vertical: 'slide-vertical',\nzoom-in: 'zoom-in',\nzoom-out: 'zoom-out',\nflip: 'flip',\nnone: 'none'\n */\n\nexport const ScreenManager: React.FC<ScreenManagerProps> = ({\n  initialScreen = 'loading',\n  appConfig,\n  defaultTransition = 'zoom-out',\n  defaultDirection = 'right'\n}) => {\n  const [currentScreen, setCurrentScreen] = useState<ScreenType>(initialScreen || 'loading')\n  const [isTransitioning, setIsTransitioning] = useState(false)\n  const [transitionType, setTransitionType] = useState<TransitionType>(defaultTransition)\n  const [transitionDirection, setTransitionDirection] = useState<TransitionDirection>(defaultDirection)\n  const [previousScreen, setPreviousScreen] = useState<ScreenType | null>(null)\n\n  // Debug: logar a tela inicial\n  useEffect(() => {\n    console.log('🎬 ScreenManager inicializado com tela:', currentScreen)\n  }, [])\n\n  // Atualizar previousScreen quando a transição terminar\n  useEffect(() => {\n    if (!isTransitioning) {\n      // Limpar previousScreen após um delay para não interferir em próximas transições\n      const timeout = setTimeout(() => {\n        if (currentScreen !== 'loading') {\n          setPreviousScreen(null)\n        }\n      }, 1000)\n\n      return () => clearTimeout(timeout)\n    }\n  }, [currentScreen, isTransitioning])\n\n  // Função para determinar direção automática baseada na ordem das telas\n  const getAutoDirection = (from: ScreenType, to: ScreenType): TransitionDirection => {\n    const screenOrder = ['loading', 'cover', 'tutorial', 'ar', 'final', 'settings', 'about', 'selfie']\n    const fromIndex = screenOrder.indexOf(from)\n    const toIndex = screenOrder.indexOf(to)\n\n    if (toIndex > fromIndex) return 'right'\n    if (toIndex < fromIndex) return 'left'\n    return 'right'\n  }\n\n  const navigateTo = (\n    screen: ScreenType,\n    transition?: TransitionType,\n    direction?: TransitionDirection\n  ) => {\n    const finalTransition = transition || transitionType\n    const finalDirection = direction || getAutoDirection(currentScreen, screen)\n\n    // Salvar tela atual antes de começar transição\n    setPreviousScreen(currentScreen)\n    setTransitionType(finalTransition)\n    setTransitionDirection(finalDirection)\n\n    // Duração maior para transição do loading\n    const duration = currentScreen === 'loading' ? 800 : 300\n\n    setIsTransitioning(true)\n\n    setTimeout(() => {\n      setCurrentScreen(screen)\n      setIsTransitioning(false)\n    }, duration)\n  }\n\n  // Função para mudar o tipo de transição globalmente\n  // const setGlobalTransition = (type: TransitionType) => {\n  //   setTransitionType(type)\n  // }\n\n  const renderScreen = () => {\n    switch (currentScreen) {\n      case 'loading':\n        return <LoadingScreen onNavigate={navigateTo} />\n      case 'cover':\n        return (\n          <CoverScreen\n            onNavigate={navigateTo}\n            title={appConfig.title}\n            subtitle={appConfig.subtitle}\n          />\n        )\n      case 'tutorial':\n        return <TutorialScreen onNavigate={navigateTo} />\n      case 'ar':\n        return <ARScreen onNavigate={navigateTo} />\n      case 'final':\n        return <FinalScreen onNavigate={navigateTo} />\n      case 'settings':\n        return <SettingsScreen onNavigate={navigateTo} />\n      case 'about':\n        return <AboutScreen onNavigate={navigateTo} />\n      case 'selfie':\n        return <SelfieScreen onNavigate={navigateTo} />\n      default:\n        return <LoadingScreen onNavigate={navigateTo} />\n    }\n  }\n\n  // Gera classes CSS dinâmicas baseadas no tipo de transição\n  const getTransitionClasses = () => {\n    const baseClass = 'screen-manager'\n    const transitionClass = `transition-${transitionType}`\n    const directionClass = `direction-${transitionDirection}`\n    const transitioningClass = isTransitioning ? 'transitioning' : ''\n    const previousScreenClass = previousScreen ? `from-${previousScreen}` : ''\n\n    return `${baseClass} ${transitionClass} ${directionClass} ${transitioningClass} ${previousScreenClass}`.trim()\n  }\n\n  return (\n    <div className={getTransitionClasses()}>\n      {/* Componente de dados do RA removido */}\n\n      {renderScreen()}\n    </div>\n  )\n}\n","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react'\n\n// Tipos para os dados do RA\ninterface RAMetadados {\n  marca: string\n  codigo: string\n}\n\ninterface RAData {\n  metadados: RAMetadados\n}\n\ninterface RAContextType {\n  raData: RAData | null\n  loading: boolean\n  error: string | null\n  refreshData: () => void\n}\n\n// Criar o contexto\nconst RAContext = createContext<RAContextType | undefined>(undefined)\n\n// Hook personalizado para usar o contexto\nexport const useRA = () => {\n  const context = useContext(RAContext)\n  if (context === undefined) {\n    throw new Error('useRA deve ser usado dentro de um RAProvider')\n  }\n  return context\n}\n\n// Props do provider\ninterface RAProviderProps {\n  children: ReactNode\n}\n\n// Provider do contexto\nexport const RAProvider: React.FC<RAProviderProps> = ({ children }) => {\n  const [raData, setRaData] = useState<RAData | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  const loadRAData = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      \n      console.log('🔄 Carregando dados do RA...')\n      \n      const base = (import.meta as any)?.env?.BASE_URL || (document?.baseURI ? new URL(document.baseURI).pathname : '/')\n      const b = base && base !== '/' ? (base.endsWith('/') ? base : base + '/') : '/'\n      const url = `${b}assets/data/ra.json`\n      const response = await fetch(url)\n      \n      if (!response.ok) {\n        throw new Error(`Erro ao carregar dados: ${response.status}`)\n      }\n      \n      const data: RAData = await response.json()\n      \n      console.log('✅ Dados do RA carregados:', data)\n      setRaData(data)\n      \n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Erro desconhecido'\n      console.error('❌ Erro ao carregar dados do RA:', errorMessage)\n      setError(errorMessage)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const refreshData = () => {\n    loadRAData()\n  }\n\n  useEffect(() => {\n    loadRAData()\n  }, [])\n\n  const value: RAContextType = {\n    raData,\n    loading,\n    error,\n    refreshData\n  }\n\n  return (\n    <RAContext.Provider value={value}>\n      {children}\n    </RAContext.Provider>\n  )\n}\n","import React, { useState, useEffect } from 'react'\n\nexport const LandscapeBlocker: React.FC = () => {\n  const [isBlocked, setIsBlocked] = useState(false)\n\n  const checkOrientation = () => {\n    // Múltiplas formas de detectar landscape\n    const width = window.innerWidth\n    const height = window.innerHeight\n    const isLandscape = width > height\n    \n    // Verificar se é mobile (para não bloquear desktop)\n    const userAgent = navigator.userAgent.toLowerCase()\n    const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent) || \n                     ('ontouchstart' in window) ||\n                     (navigator.maxTouchPoints > 0)\n    \n    // Para desktop, também bloquear se a largura for menor que 768px E landscape\n    const isSmallScreen = width <= 768\n    \n    // Bloquear se for mobile E landscape OU se for tela pequena E landscape\n    if ((isMobile && isLandscape) || (isSmallScreen && isLandscape)) {\n      setIsBlocked(true)\n      // Desabilitar interações com elementos abaixo\n      document.body.style.overflow = 'hidden'\n      document.body.style.touchAction = 'none'\n    } else {\n      setIsBlocked(false)\n      // Reabilitar interações\n      document.body.style.overflow = ''\n      document.body.style.touchAction = ''\n    }\n  }\n\n  useEffect(() => {\n    // Verificar orientação inicial\n    checkOrientation()\n\n    // Adicionar listeners com debounce para evitar muitas chamadas\n    let resizeTimeout: NodeJS.Timeout\n    let orientationTimeout: NodeJS.Timeout\n\n    const handleResize = () => {\n      clearTimeout(resizeTimeout)\n      resizeTimeout = setTimeout(() => {\n        checkOrientation()\n      }, 100)\n    }\n\n    const handleOrientationChange = () => {\n      clearTimeout(orientationTimeout)\n      orientationTimeout = setTimeout(() => {\n        checkOrientation()\n      }, 300)\n    }\n\n    const handleScreenOrientationChange = () => {\n      clearTimeout(orientationTimeout)\n      orientationTimeout = setTimeout(() => {\n        checkOrientation()\n      }, 300)\n    }\n\n    const handleMediaQueryChange = (e: MediaQueryListEvent) => {\n      clearTimeout(orientationTimeout)\n      orientationTimeout = setTimeout(() => {\n        checkOrientation()\n      }, 100)\n    }\n\n    // Listener para redimensionamento da janela\n    window.addEventListener('resize', handleResize)\n    \n    // Listener para mudança de orientação\n    window.addEventListener('orientationchange', handleOrientationChange)\n    \n    // Listener para mudança de orientação em dispositivos móveis\n    if (window.screen && window.screen.orientation) {\n      window.screen.orientation.addEventListener('change', handleScreenOrientationChange)\n    }\n    \n    // Listener para mudança de orientação usando matchMedia\n    const mediaQuery = window.matchMedia('(orientation: landscape)')\n    mediaQuery.addEventListener('change', handleMediaQueryChange)\n\n    // Verificar periodicamente para garantir que não perdeu nenhum evento\n    const intervalCheck = setInterval(() => {\n      checkOrientation()\n    }, 2000)\n\n    return () => {\n      clearTimeout(resizeTimeout)\n      clearTimeout(orientationTimeout)\n      clearInterval(intervalCheck)\n      \n      window.removeEventListener('resize', handleResize)\n      window.removeEventListener('orientationchange', handleOrientationChange)\n      if (window.screen && window.screen.orientation) {\n        window.screen.orientation.removeEventListener('change', handleScreenOrientationChange)\n      }\n      mediaQuery.removeEventListener('change', handleMediaQueryChange)\n      \n      // Reabilitar interações ao desmontar\n      document.body.style.overflow = ''\n      document.body.style.touchAction = ''\n    }\n  }, [])\n\n  // Só renderizar o overlay quando bloqueado\n  if (!isBlocked) return null\n\n  return (\n    <div \n      className=\"landscape-blocker\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 999999999,\n        color: 'white',\n        fontFamily: 'Arial, sans-serif',\n        textAlign: 'center',\n        padding: '20px',\n        boxSizing: 'border-box',\n        pointerEvents: 'auto'\n      }}\n    >\n      {/* Ícone de rotação */}\n      <div \n        style={{\n          width: '80px',\n          height: '80px',\n          marginBottom: '20px',\n          fontSize: '60px',\n          animation: 'rotate 2s ease-in-out infinite'\n        }}\n      >\n        📱\n      </div>\n      \n      {/* Texto informativo */}\n      <h2 style={{ margin: '0 0 10px 0', fontSize: '24px' }}>\n        Gire seu dispositivo\n      </h2>\n      \n      <p style={{ margin: '0', fontSize: '16px', opacity: 0.9 }}>\n        Para uma melhor experiência de Realidade Aumentada, \n        mantenha seu dispositivo na orientação retrato (vertical).\n      </p>\n      \n      {/* CSS para animação */}\n      <style>\n        {`\n          @keyframes rotate {\n            0%, 100% { transform: rotate(0deg); }\n            50% { transform: rotate(90deg); }\n          }\n        `}\n      </style>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ScreenManager } from './components/ScreenManager'\nimport { RAProvider } from './contexts/RAContext'\nimport { LandscapeBlocker } from './components/LandscapeBlocker'\nimport './App.css'\n\nfunction App() {\n  const appConfig = {\n    title: 'Realidade Aumentada',\n    subtitle: 'Explore o mundo em 3D',\n    version: '1.0.0',\n    developer: 'AR Developer'\n  }\n\n  return (\n    <RAProvider>\n      <div className=\"ar-app\">\n        <LandscapeBlocker />\n        <ScreenManager\n          initialScreen=\"loading\"\n          appConfig={appConfig}\n        />\n      </div>\n    </RAProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","initializeCamera","stream","video","err","loadFaceApi","resolve","reject","script","initializeAFrame","checkAFrame","tempScene","LoadingScreen","onNavigate","onLoadingComplete","progress","setProgress","useState","status","setStatus","useEffect","resources","baseUrl","base","_b","_a","i","resource","fullUrl","error","img","newProgress","jsxs","jsx","CoverScreen","backgroundImage","normalizePath","path","cleanPath","bgImage","headerImage","bottomImage","btnJogarImage","TutorialScreen","tutorialPanelImage","btnComecarImage","FaceTracker","enabled","canvasRef","useRef","rafRef","modelsLoadedRef","prevRotRef","prevPosRef","maskImgRef","maskLoadedRef","isMobile","ensureCanvas","removeCanvas","loadModels","faceapi","MODEL_URL","loadMask","normalize","candidatesBase","candidatesFallback","candidates","index","tryNext","url","setCanvasSize","canvas","dpr","ctx","start","waitForVideo","resolved","timeout","tryResolve","v","hasStream","onPlaying","observer","v0","resizeCanvas","detect","scheduleNext","unlock","isMirrored","options","pipeline","detections","canvasCssWidth","canvasCssHeight","scaleX","scaleY","mapX","x","w","raw","mapY","y","drawPoint","label","color","px","py","det","box","rawW","expr","entries","topLabel","topScore","textW","pts","noseTip","leftEyeIdx","rightEyeIdx","avg","arr","eyeCenter","ids","leftEye","rightEye","midEyes","midEyesPx","dxEyes","dyEyes","rollDeg","eyeDist","yawDeg","pitchDeg","clamp","centerX","centerY","normalizedX","normalizedY","alphaR","prevR","smoothedR","cameraEl","headEl","threeCam","THREE","nx","ny","depth","origin","dir","ndc","targetPos","alphaP","prevP","smoothedP","cleanupResize","dist","Scene_1","Entity_1","_extends","target","source","key","_createClass","defineProperties","props","descriptor","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","obj","_classCallCheck","instance","_possibleConstructorReturn","self","call","_inherits","subClass","superClass","nonEntityPropNames","filterNonEntityPropNames","propName","doSetAttribute","el","updateAttributes","prevProps","Entity","_React$Component","_ref","_temp","_this","_ret","_len","args","_key","eventName","addEventListeners","prevState","updateEventListeners","removeEventListeners","elementName","reactProps","_Entity","Scene","_this2","prevEvents","events","handlers","ARSceneAFrame","forwardRef","className","onSceneReady","_cameraFacing","ref","sceneRef","entities","setEntities","sceneReady","setSceneReady","vrButton","useImperativeHandle","data","id","prev","sceneEl","renderer","facing","sceneProps","entity","ARScreen","gameCanvasRef","animationFrameRef","score","setScore","timeLeft","setTimeLeft","gameStarted","setGameStarted","gameOver","setGameOver","feedback","setFeedback","arLoading","setArLoading","countdown","setCountdown","showResultModal","setShowResultModal","resultType","setResultType","fallingObjectsRef","navePositionRef","faceDetectedRef","videoRef","mediaStreamRef","setupCamera","checkFaceTracker","t","onLoadedMetadata","onError","playErr","timer","images","imagesLoadedRef","promises","src","interval","handleNosePosition","event","detected","createFallingObject","useCallback","type","spawnInterval","checkCollisions","nave","naveRadius","dx","dy","gameLoop","naveImg","naveX","naveY","naveSize","objX","objY","objSize","isAcerto","restartGame","formatTime","seconds","mins","secs","DEFAULT_SETTINGS","SettingsScreen","onSettingsChange","settings","setSettings","handleSettingChange","value","newSettings","handleBack","handleReset","AboutScreen","appName","version","description","developer","FinalScreen","handleRestart","SelfieScreen","isCapturing","setIsCapturing","topImage","cameraIcon","capturePhoto","blob","link","ScreenManager","initialScreen","appConfig","defaultTransition","defaultDirection","currentScreen","setCurrentScreen","isTransitioning","setIsTransitioning","transitionType","setTransitionType","transitionDirection","setTransitionDirection","previousScreen","setPreviousScreen","getAutoDirection","from","to","screenOrder","fromIndex","toIndex","navigateTo","screen","transition","direction","finalTransition","finalDirection","duration","renderScreen","getTransitionClasses","baseClass","transitionClass","directionClass","transitioningClass","previousScreenClass","RAContext","createContext","RAProvider","children","raData","setRaData","loading","setLoading","setError","loadRAData","response","errorMessage","refreshData","LandscapeBlocker","isBlocked","setIsBlocked","checkOrientation","width","height","isLandscape","userAgent","isSmallScreen","resizeTimeout","orientationTimeout","handleResize","handleOrientationChange","handleScreenOrientationChange","handleMediaQueryChange","mediaQuery","intervalCheck","App","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2,7]}